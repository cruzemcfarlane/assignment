{"changed":true,"filter":false,"title":"prototype.js","tooltip":"/prototype.js","value":"/*  Prototype JavaScript framework, version 1.7.2\n *  (c) 2005-2010 Sam Stephenson\n *\n *  Prototype is freely distributable under the terms of an MIT-style license.\n *  For details, see the Prototype web site: http://www.prototypejs.org/\n *\n *--------------------------------------------------------------------------*/\n\nvar Prototype = {\n\n  Version: '1.7.2',\n\n  Browser: (function(){\n    var ua = navigator.userAgent;\n    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';\n    return {\n      IE:             !!window.attachEvent && !isOpera,\n      Opera:          isOpera,\n      WebKit:         ua.indexOf('AppleWebKit/') > -1,\n      Gecko:          ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1,\n      MobileSafari:   /Apple.*Mobile/.test(ua)\n    }\n  })(),\n\n  BrowserFeatures: {\n    XPath: !!document.evaluate,\n\n    SelectorsAPI: !!document.querySelector,\n\n    ElementExtensions: (function() {\n      var constructor = window.Element || window.HTMLElement;\n      return !!(constructor && constructor.prototype);\n    })(),\n    SpecificElementExtensions: (function() {\n      if (typeof window.HTMLDivElement !== 'undefined')\n        return true;\n\n      var div = document.createElement('div'),\n          form = document.createElement('form'),\n          isSupported = false;\n\n      if (div['__proto__'] && (div['__proto__'] !== form['__proto__'])) {\n        isSupported = true;\n      }\n\n      div = form = null;\n\n      return isSupported;\n    })()\n  },\n\n  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\/script\\\\s*>',\n  JSONFilter: /^\\/\\*-secure-([\\s\\S]*)\\*\\/\\s*$/,\n\n  emptyFunction: function() { },\n\n  K: function(x) { return x }\n};\n\nif (Prototype.Browser.MobileSafari)\n  Prototype.BrowserFeatures.SpecificElementExtensions = false;\n/* Based on Alex Arnell's inheritance implementation. */\n\nvar Class = (function() {\n\n  var IS_DONTENUM_BUGGY = (function(){\n    for (var p in { toString: 1 }) {\n      if (p === 'toString') return false;\n    }\n    return true;\n  })();\n\n  function subclass() {};\n  function create() {\n    var parent = null, properties = $A(arguments);\n    if (Object.isFunction(properties[0]))\n      parent = properties.shift();\n\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    Object.extend(klass, Class.Methods);\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      subclass.prototype = parent.prototype;\n      klass.prototype = new subclass;\n      parent.subclasses.push(klass);\n    }\n\n    for (var i = 0, length = properties.length; i < length; i++)\n      klass.addMethods(properties[i]);\n\n    if (!klass.prototype.initialize)\n      klass.prototype.initialize = Prototype.emptyFunction;\n\n    klass.prototype.constructor = klass;\n    return klass;\n  }\n\n  function addMethods(source) {\n    var ancestor   = this.superclass && this.superclass.prototype,\n        properties = Object.keys(source);\n\n    if (IS_DONTENUM_BUGGY) {\n      if (source.toString != Object.prototype.toString)\n        properties.push(\"toString\");\n      if (source.valueOf != Object.prototype.valueOf)\n        properties.push(\"valueOf\");\n    }\n\n    for (var i = 0, length = properties.length; i < length; i++) {\n      var property = properties[i], value = source[property];\n      if (ancestor && Object.isFunction(value) &&\n          value.argumentNames()[0] == \"$super\") {\n        var method = value;\n        value = (function(m) {\n          return function() { return ancestor[m].apply(this, arguments); };\n        })(property).wrap(method);\n\n        value.valueOf = (function(method) {\n          return function() { return method.valueOf.call(method); };\n        })(method);\n\n        value.toString = (function(method) {\n          return function() { return method.toString.call(method); };\n        })(method);\n      }\n      this.prototype[property] = value;\n    }\n\n    return this;\n  }\n\n  return {\n    create: create,\n    Methods: {\n      addMethods: addMethods\n    }\n  };\n})();\n(function() {\n\n  var _toString = Object.prototype.toString,\n      _hasOwnProperty = Object.prototype.hasOwnProperty,\n      NULL_TYPE = 'Null',\n      UNDEFINED_TYPE = 'Undefined',\n      BOOLEAN_TYPE = 'Boolean',\n      NUMBER_TYPE = 'Number',\n      STRING_TYPE = 'String',\n      OBJECT_TYPE = 'Object',\n      FUNCTION_CLASS = '[object Function]',\n      BOOLEAN_CLASS = '[object Boolean]',\n      NUMBER_CLASS = '[object Number]',\n      STRING_CLASS = '[object String]',\n      ARRAY_CLASS = '[object Array]',\n      DATE_CLASS = '[object Date]',\n      NATIVE_JSON_STRINGIFY_SUPPORT = window.JSON &&\n        typeof JSON.stringify === 'function' &&\n        JSON.stringify(0) === '0' &&\n        typeof JSON.stringify(Prototype.K) === 'undefined';\n\n\n\n  var DONT_ENUMS = ['toString', 'toLocaleString', 'valueOf',\n   'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];\n\n  var IS_DONTENUM_BUGGY = (function(){\n    for (var p in { toString: 1 }) {\n      if (p === 'toString') return false;\n    }\n    return true;\n  })();\n\n  function Type(o) {\n    switch(o) {\n      case null: return NULL_TYPE;\n      case (void 0): return UNDEFINED_TYPE;\n    }\n    var type = typeof o;\n    switch(type) {\n      case 'boolean': return BOOLEAN_TYPE;\n      case 'number':  return NUMBER_TYPE;\n      case 'string':  return STRING_TYPE;\n    }\n    return OBJECT_TYPE;\n  }\n\n  function extend(destination, source) {\n    for (var property in source)\n      destination[property] = source[property];\n    return destination;\n  }\n\n  function inspect(object) {\n    try {\n      if (isUndefined(object)) return 'undefined';\n      if (object === null) return 'null';\n      return object.inspect ? object.inspect() : String(object);\n    } catch (e) {\n      if (e instanceof RangeError) return '...';\n      throw e;\n    }\n  }\n\n  function toJSON(value) {\n    return Str('', { '': value }, []);\n  }\n\n  function Str(key, holder, stack) {\n    var value = holder[key];\n    if (Type(value) === OBJECT_TYPE && typeof value.toJSON === 'function') {\n      value = value.toJSON(key);\n    }\n\n    var _class = _toString.call(value);\n\n    switch (_class) {\n      case NUMBER_CLASS:\n      case BOOLEAN_CLASS:\n      case STRING_CLASS:\n        value = value.valueOf();\n    }\n\n    switch (value) {\n      case null: return 'null';\n      case true: return 'true';\n      case false: return 'false';\n    }\n\n    var type = typeof value;\n    switch (type) {\n      case 'string':\n        return value.inspect(true);\n      case 'number':\n        return isFinite(value) ? String(value) : 'null';\n      case 'object':\n\n        for (var i = 0, length = stack.length; i < length; i++) {\n          if (stack[i] === value) {\n            throw new TypeError(\"Cyclic reference to '\" + value + \"' in object\");\n          }\n        }\n        stack.push(value);\n\n        var partial = [];\n        if (_class === ARRAY_CLASS) {\n          for (var i = 0, length = value.length; i < length; i++) {\n            var str = Str(i, value, stack);\n            partial.push(typeof str === 'undefined' ? 'null' : str);\n          }\n          partial = '[' + partial.join(',') + ']';\n        } else {\n          var keys = Object.keys(value);\n          for (var i = 0, length = keys.length; i < length; i++) {\n            var key = keys[i], str = Str(key, value, stack);\n            if (typeof str !== \"undefined\") {\n               partial.push(key.inspect(true)+ ':' + str);\n             }\n          }\n          partial = '{' + partial.join(',') + '}';\n        }\n        stack.pop();\n        return partial;\n    }\n  }\n\n  function stringify(object) {\n    return JSON.stringify(object);\n  }\n\n  function toQueryString(object) {\n    return $H(object).toQueryString();\n  }\n\n  function toHTML(object) {\n    return object && object.toHTML ? object.toHTML() : String.interpret(object);\n  }\n\n  function keys(object) {\n    if (Type(object) !== OBJECT_TYPE) { throw new TypeError(); }\n    var results = [];\n    for (var property in object) {\n      if (_hasOwnProperty.call(object, property))\n        results.push(property);\n    }\n\n    if (IS_DONTENUM_BUGGY) {\n      for (var i = 0; property = DONT_ENUMS[i]; i++) {\n        if (_hasOwnProperty.call(object, property))\n          results.push(property);\n      }\n    }\n\n    return results;\n  }\n\n  function values(object) {\n    var results = [];\n    for (var property in object)\n      results.push(object[property]);\n    return results;\n  }\n\n  function clone(object) {\n    return extend({ }, object);\n  }\n\n  function isElement(object) {\n    return !!(object && object.nodeType == 1);\n  }\n\n  function isArray(object) {\n    return _toString.call(object) === ARRAY_CLASS;\n  }\n\n  var hasNativeIsArray = (typeof Array.isArray == 'function')\n    && Array.isArray([]) && !Array.isArray({});\n\n  if (hasNativeIsArray) {\n    isArray = Array.isArray;\n  }\n\n  function isHash(object) {\n    return object instanceof Hash;\n  }\n\n  function isFunction(object) {\n    return _toString.call(object) === FUNCTION_CLASS;\n  }\n\n  function isString(object) {\n    return _toString.call(object) === STRING_CLASS;\n  }\n\n  function isNumber(object) {\n    return _toString.call(object) === NUMBER_CLASS;\n  }\n\n  function isDate(object) {\n    return _toString.call(object) === DATE_CLASS;\n  }\n\n  function isUndefined(object) {\n    return typeof object === \"undefined\";\n  }\n\n  extend(Object, {\n    extend:        extend,\n    inspect:       inspect,\n    toJSON:        NATIVE_JSON_STRINGIFY_SUPPORT ? stringify : toJSON,\n    toQueryString: toQueryString,\n    toHTML:        toHTML,\n    keys:          Object.keys || keys,\n    values:        values,\n    clone:         clone,\n    isElement:     isElement,\n    isArray:       isArray,\n    isHash:        isHash,\n    isFunction:    isFunction,\n    isString:      isString,\n    isNumber:      isNumber,\n    isDate:        isDate,\n    isUndefined:   isUndefined\n  });\n})();\nObject.extend(Function.prototype, (function() {\n  var slice = Array.prototype.slice;\n\n  function update(array, args) {\n    var arrayLength = array.length, length = args.length;\n    while (length--) array[arrayLength + length] = args[length];\n    return array;\n  }\n\n  function merge(array, args) {\n    array = slice.call(array, 0);\n    return update(array, args);\n  }\n\n  function argumentNames() {\n    var names = this.toString().match(/^[\\s\\(]*function[^(]*\\(([^)]*)\\)/)[1]\n      .replace(/\\/\\/.*?[\\r\\n]|\\/\\*(?:.|[\\r\\n])*?\\*\\//g, '')\n      .replace(/\\s+/g, '').split(',');\n    return names.length == 1 && !names[0] ? [] : names;\n  }\n\n\n  function bind(context) {\n    if (arguments.length < 2 && Object.isUndefined(arguments[0]))\n      return this;\n\n    if (!Object.isFunction(this))\n      throw new TypeError(\"The object is not callable.\");\n\n    var nop = function() {};\n    var __method = this, args = slice.call(arguments, 1);\n\n    var bound = function() {\n      var a = merge(args, arguments);\n      var c = this instanceof bound ? this : context;\n      return __method.apply(c, a);\n    };\n\n    nop.prototype   = this.prototype;\n    bound.prototype = new nop();\n\n    return bound;\n  }\n\n  function bindAsEventListener(context) {\n    var __method = this, args = slice.call(arguments, 1);\n    return function(event) {\n      var a = update([event || window.event], args);\n      return __method.apply(context, a);\n    }\n  }\n\n  function curry() {\n    if (!arguments.length) return this;\n    var __method = this, args = slice.call(arguments, 0);\n    return function() {\n      var a = merge(args, arguments);\n      return __method.apply(this, a);\n    }\n  }\n\n  function delay(timeout) {\n    var __method = this, args = slice.call(arguments, 1);\n    timeout = timeout * 1000;\n    return window.setTimeout(function() {\n      return __method.apply(__method, args);\n    }, timeout);\n  }\n\n  function defer() {\n    var args = update([0.01], arguments);\n    return this.delay.apply(this, args);\n  }\n\n  function wrap(wrapper) {\n    var __method = this;\n    return function() {\n      var a = update([__method.bind(this)], arguments);\n      return wrapper.apply(this, a);\n    }\n  }\n\n  function methodize() {\n    if (this._methodized) return this._methodized;\n    var __method = this;\n    return this._methodized = function() {\n      var a = update([this], arguments);\n      return __method.apply(null, a);\n    };\n  }\n\n  var extensions = {\n    argumentNames:       argumentNames,\n    bindAsEventListener: bindAsEventListener,\n    curry:               curry,\n    delay:               delay,\n    defer:               defer,\n    wrap:                wrap,\n    methodize:           methodize\n  };\n\n  if (!Function.prototype.bind)\n    extensions.bind = bind;\n\n  return extensions;\n})());\n\n\n\n(function(proto) {\n\n\n  function toISOString() {\n    return this.getUTCFullYear() + '-' +\n      (this.getUTCMonth() + 1).toPaddedString(2) + '-' +\n      this.getUTCDate().toPaddedString(2) + 'T' +\n      this.getUTCHours().toPaddedString(2) + ':' +\n      this.getUTCMinutes().toPaddedString(2) + ':' +\n      this.getUTCSeconds().toPaddedString(2) + 'Z';\n  }\n\n\n  function toJSON() {\n    return this.toISOString();\n  }\n\n  if (!proto.toISOString) proto.toISOString = toISOString;\n  if (!proto.toJSON) proto.toJSON = toJSON;\n\n})(Date.prototype);\n\n\nRegExp.prototype.match = RegExp.prototype.test;\n\nRegExp.escape = function(str) {\n  return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\nvar PeriodicalExecuter = Class.create({\n  initialize: function(callback, frequency) {\n    this.callback = callback;\n    this.frequency = frequency;\n    this.currentlyExecuting = false;\n\n    this.registerCallback();\n  },\n\n  registerCallback: function() {\n    this.timer = setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);\n  },\n\n  execute: function() {\n    this.callback(this);\n  },\n\n  stop: function() {\n    if (!this.timer) return;\n    clearInterval(this.timer);\n    this.timer = null;\n  },\n\n  onTimerEvent: function() {\n    if (!this.currentlyExecuting) {\n      try {\n        this.currentlyExecuting = true;\n        this.execute();\n        this.currentlyExecuting = false;\n      } catch(e) {\n        this.currentlyExecuting = false;\n        throw e;\n      }\n    }\n  }\n});\nObject.extend(String, {\n  interpret: function(value) {\n    return value == null ? '' : String(value);\n  },\n  specialChar: {\n    '\\b': '\\\\b',\n    '\\t': '\\\\t',\n    '\\n': '\\\\n',\n    '\\f': '\\\\f',\n    '\\r': '\\\\r',\n    '\\\\': '\\\\\\\\'\n  }\n});\n\nObject.extend(String.prototype, (function() {\n  var NATIVE_JSON_PARSE_SUPPORT = window.JSON &&\n    typeof JSON.parse === 'function' &&\n    JSON.parse('{\"test\": true}').test;\n\n  function prepareReplacement(replacement) {\n    if (Object.isFunction(replacement)) return replacement;\n    var template = new Template(replacement);\n    return function(match) { return template.evaluate(match) };\n  }\n\n  function isNonEmptyRegExp(regexp) {\n    return regexp.source && regexp.source !== '(?:)';\n  }\n\n\n  function gsub(pattern, replacement) {\n    var result = '', source = this, match;\n    replacement = prepareReplacement(replacement);\n\n    if (Object.isString(pattern))\n      pattern = RegExp.escape(pattern);\n\n    if (!(pattern.length || isNonEmptyRegExp(pattern))) {\n      replacement = replacement('');\n      return replacement + source.split('').join(replacement) + replacement;\n    }\n\n    while (source.length > 0) {\n      match = source.match(pattern)\n      if (match && match[0].length > 0) {\n        result += source.slice(0, match.index);\n        result += String.interpret(replacement(match));\n        source  = source.slice(match.index + match[0].length);\n      } else {\n        result += source, source = '';\n      }\n    }\n    return result;\n  }\n\n  function sub(pattern, replacement, count) {\n    replacement = prepareReplacement(replacement);\n    count = Object.isUndefined(count) ? 1 : count;\n\n    return this.gsub(pattern, function(match) {\n      if (--count < 0) return match[0];\n      return replacement(match);\n    });\n  }\n\n  function scan(pattern, iterator) {\n    this.gsub(pattern, iterator);\n    return String(this);\n  }\n\n  function truncate(length, truncation) {\n    length = length || 30;\n    truncation = Object.isUndefined(truncation) ? '...' : truncation;\n    return this.length > length ?\n      this.slice(0, length - truncation.length) + truncation : String(this);\n  }\n\n  function strip() {\n    return this.replace(/^\\s+/, '').replace(/\\s+$/, '');\n  }\n\n  function stripTags() {\n    return this.replace(/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\/\\w+>/gi, '');\n  }\n\n  function stripScripts() {\n    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');\n  }\n\n  function extractScripts() {\n    var matchAll = new RegExp(Prototype.ScriptFragment, 'img'),\n        matchOne = new RegExp(Prototype.ScriptFragment, 'im');\n    return (this.match(matchAll) || []).map(function(scriptTag) {\n      return (scriptTag.match(matchOne) || ['', ''])[1];\n    });\n  }\n\n  function evalScripts() {\n    return this.extractScripts().map(function(script) { return eval(script); });\n  }\n\n  function escapeHTML() {\n    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n  }\n\n  function unescapeHTML() {\n    return this.stripTags().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');\n  }\n\n\n  function toQueryParams(separator) {\n    var match = this.strip().match(/([^?#]*)(#.*)?$/);\n    if (!match) return { };\n\n    return match[1].split(separator || '&').inject({ }, function(hash, pair) {\n      if ((pair = pair.split('='))[0]) {\n        var key = decodeURIComponent(pair.shift()),\n            value = pair.length > 1 ? pair.join('=') : pair[0];\n\n        if (value != undefined) {\n          value = value.gsub('+', ' ');\n          value = decodeURIComponent(value);\n        }\n\n        if (key in hash) {\n          if (!Object.isArray(hash[key])) hash[key] = [hash[key]];\n          hash[key].push(value);\n        }\n        else hash[key] = value;\n      }\n      return hash;\n    });\n  }\n\n  function toArray() {\n    return this.split('');\n  }\n\n  function succ() {\n    return this.slice(0, this.length - 1) +\n      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);\n  }\n\n  function times(count) {\n    return count < 1 ? '' : new Array(count + 1).join(this);\n  }\n\n  function camelize() {\n    return this.replace(/-+(.)?/g, function(match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n  }\n\n  function capitalize() {\n    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();\n  }\n\n  function underscore() {\n    return this.replace(/::/g, '/')\n               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n               .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n               .replace(/-/g, '_')\n               .toLowerCase();\n  }\n\n  function dasherize() {\n    return this.replace(/_/g, '-');\n  }\n\n  function inspect(useDoubleQuotes) {\n    var escapedString = this.replace(/[\\x00-\\x1f\\\\]/g, function(character) {\n      if (character in String.specialChar) {\n        return String.specialChar[character];\n      }\n      return '\\\\u00' + character.charCodeAt().toPaddedString(2, 16);\n    });\n    if (useDoubleQuotes) return '\"' + escapedString.replace(/\"/g, '\\\\\"') + '\"';\n    return \"'\" + escapedString.replace(/'/g, '\\\\\\'') + \"'\";\n  }\n\n  function unfilterJSON(filter) {\n    return this.replace(filter || Prototype.JSONFilter, '$1');\n  }\n\n  function isJSON() {\n    var str = this;\n    if (str.blank()) return false;\n    str = str.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@');\n    str = str.replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']');\n    str = str.replace(/(?:^|:|,)(?:\\s*\\[)+/g, '');\n    return (/^[\\],:{}\\s]*$/).test(str);\n  }\n\n  function evalJSON(sanitize) {\n    var json = this.unfilterJSON(),\n        cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    if (cx.test(json)) {\n      json = json.replace(cx, function (a) {\n        return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n      });\n    }\n    try {\n      if (!sanitize || json.isJSON()) return eval('(' + json + ')');\n    } catch (e) { }\n    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());\n  }\n\n  function parseJSON() {\n    var json = this.unfilterJSON();\n    return JSON.parse(json);\n  }\n\n  function include(pattern) {\n    return this.indexOf(pattern) > -1;\n  }\n\n  function startsWith(pattern, position) {\n    position = Object.isNumber(position) ? position : 0;\n    return this.lastIndexOf(pattern, position) === position;\n  }\n\n  function endsWith(pattern, position) {\n    pattern = String(pattern);\n    position = Object.isNumber(position) ? position : this.length;\n    if (position < 0) position = 0;\n    if (position > this.length) position = this.length;\n    var d = position - pattern.length;\n    return d >= 0 && this.indexOf(pattern, d) === d;\n  }\n\n  function empty() {\n    return this == '';\n  }\n\n  function blank() {\n    return /^\\s*$/.test(this);\n  }\n\n  function interpolate(object, pattern) {\n    return new Template(this, pattern).evaluate(object);\n  }\n\n  return {\n    gsub:           gsub,\n    sub:            sub,\n    scan:           scan,\n    truncate:       truncate,\n    strip:          String.prototype.trim || strip,\n    stripTags:      stripTags,\n    stripScripts:   stripScripts,\n    extractScripts: extractScripts,\n    evalScripts:    evalScripts,\n    escapeHTML:     escapeHTML,\n    unescapeHTML:   unescapeHTML,\n    toQueryParams:  toQueryParams,\n    parseQuery:     toQueryParams,\n    toArray:        toArray,\n    succ:           succ,\n    times:          times,\n    camelize:       camelize,\n    capitalize:     capitalize,\n    underscore:     underscore,\n    dasherize:      dasherize,\n    inspect:        inspect,\n    unfilterJSON:   unfilterJSON,\n    isJSON:         isJSON,\n    evalJSON:       NATIVE_JSON_PARSE_SUPPORT ? parseJSON : evalJSON,\n    include:        include,\n    startsWith:     String.prototype.startsWith || startsWith,\n    endsWith:       String.prototype.endsWith || endsWith,\n    empty:          empty,\n    blank:          blank,\n    interpolate:    interpolate\n  };\n})());\n\nvar Template = Class.create({\n  initialize: function(template, pattern) {\n    this.template = template.toString();\n    this.pattern = pattern || Template.Pattern;\n  },\n\n  evaluate: function(object) {\n    if (object && Object.isFunction(object.toTemplateReplacements))\n      object = object.toTemplateReplacements();\n\n    return this.template.gsub(this.pattern, function(match) {\n      if (object == null) return (match[1] + '');\n\n      var before = match[1] || '';\n      if (before == '\\\\') return match[2];\n\n      var ctx = object, expr = match[3],\n          pattern = /^([^.[]+|\\[((?:.*?[^\\\\])?)\\])(\\.|\\[|$)/;\n\n      match = pattern.exec(expr);\n      if (match == null) return before;\n\n      while (match != null) {\n        var comp = match[1].startsWith('[') ? match[2].replace(/\\\\\\\\]/g, ']') : match[1];\n        ctx = ctx[comp];\n        if (null == ctx || '' == match[3]) break;\n        expr = expr.substring('[' == match[3] ? match[1].length : match[0].length);\n        match = pattern.exec(expr);\n      }\n\n      return before + String.interpret(ctx);\n    });\n  }\n});\nTemplate.Pattern = /(^|.|\\r|\\n)(#\\{(.*?)\\})/;\n\nvar $break = { };\n\nvar Enumerable = (function() {\n  function each(iterator, context) {\n    try {\n      this._each(iterator, context);\n    } catch (e) {\n      if (e != $break) throw e;\n    }\n    return this;\n  }\n\n  function eachSlice(number, iterator, context) {\n    var index = -number, slices = [], array = this.toArray();\n    if (number < 1) return array;\n    while ((index += number) < array.length)\n      slices.push(array.slice(index, index+number));\n    return slices.collect(iterator, context);\n  }\n\n  function all(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result = true;\n    this.each(function(value, index) {\n      result = result && !!iterator.call(context, value, index, this);\n      if (!result) throw $break;\n    }, this);\n    return result;\n  }\n\n  function any(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result = false;\n    this.each(function(value, index) {\n      if (result = !!iterator.call(context, value, index, this))\n        throw $break;\n    }, this);\n    return result;\n  }\n\n  function collect(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var results = [];\n    this.each(function(value, index) {\n      results.push(iterator.call(context, value, index, this));\n    }, this);\n    return results;\n  }\n\n  function detect(iterator, context) {\n    var result;\n    this.each(function(value, index) {\n      if (iterator.call(context, value, index, this)) {\n        result = value;\n        throw $break;\n      }\n    }, this);\n    return result;\n  }\n\n  function findAll(iterator, context) {\n    var results = [];\n    this.each(function(value, index) {\n      if (iterator.call(context, value, index, this))\n        results.push(value);\n    }, this);\n    return results;\n  }\n\n  function grep(filter, iterator, context) {\n    iterator = iterator || Prototype.K;\n    var results = [];\n\n    if (Object.isString(filter))\n      filter = new RegExp(RegExp.escape(filter));\n\n    this.each(function(value, index) {\n      if (filter.match(value))\n        results.push(iterator.call(context, value, index, this));\n    }, this);\n    return results;\n  }\n\n  function include(object) {\n    if (Object.isFunction(this.indexOf) && this.indexOf(object) != -1)\n      return true;\n\n    var found = false;\n    this.each(function(value) {\n      if (value == object) {\n        found = true;\n        throw $break;\n      }\n    });\n    return found;\n  }\n\n  function inGroupsOf(number, fillWith) {\n    fillWith = Object.isUndefined(fillWith) ? null : fillWith;\n    return this.eachSlice(number, function(slice) {\n      while(slice.length < number) slice.push(fillWith);\n      return slice;\n    });\n  }\n\n  function inject(memo, iterator, context) {\n    this.each(function(value, index) {\n      memo = iterator.call(context, memo, value, index, this);\n    }, this);\n    return memo;\n  }\n\n  function invoke(method) {\n    var args = $A(arguments).slice(1);\n    return this.map(function(value) {\n      return value[method].apply(value, args);\n    });\n  }\n\n  function max(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator.call(context, value, index, this);\n      if (result == null || value >= result)\n        result = value;\n    }, this);\n    return result;\n  }\n\n  function min(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var result;\n    this.each(function(value, index) {\n      value = iterator.call(context, value, index, this);\n      if (result == null || value < result)\n        result = value;\n    }, this);\n    return result;\n  }\n\n  function partition(iterator, context) {\n    iterator = iterator || Prototype.K;\n    var trues = [], falses = [];\n    this.each(function(value, index) {\n      (iterator.call(context, value, index, this) ?\n        trues : falses).push(value);\n    }, this);\n    return [trues, falses];\n  }\n\n  function pluck(property) {\n    var results = [];\n    this.each(function(value) {\n      results.push(value[property]);\n    });\n    return results;\n  }\n\n  function reject(iterator, context) {\n    var results = [];\n    this.each(function(value, index) {\n      if (!iterator.call(context, value, index, this))\n        results.push(value);\n    }, this);\n    return results;\n  }\n\n  function sortBy(iterator, context) {\n    return this.map(function(value, index) {\n      return {\n        value: value,\n        criteria: iterator.call(context, value, index, this)\n      };\n    }, this).sort(function(left, right) {\n      var a = left.criteria, b = right.criteria;\n      return a < b ? -1 : a > b ? 1 : 0;\n    }).pluck('value');\n  }\n\n  function toArray() {\n    return this.map();\n  }\n\n  function zip() {\n    var iterator = Prototype.K, args = $A(arguments);\n    if (Object.isFunction(args.last()))\n      iterator = args.pop();\n\n    var collections = [this].concat(args).map($A);\n    return this.map(function(value, index) {\n      return iterator(collections.pluck(index));\n    });\n  }\n\n  function size() {\n    return this.toArray().length;\n  }\n\n  function inspect() {\n    return '#<Enumerable:' + this.toArray().inspect() + '>';\n  }\n\n\n\n\n\n\n\n\n\n  return {\n    each:       each,\n    eachSlice:  eachSlice,\n    all:        all,\n    every:      all,\n    any:        any,\n    some:       any,\n    collect:    collect,\n    map:        collect,\n    detect:     detect,\n    findAll:    findAll,\n    select:     findAll,\n    filter:     findAll,\n    grep:       grep,\n    include:    include,\n    member:     include,\n    inGroupsOf: inGroupsOf,\n    inject:     inject,\n    invoke:     invoke,\n    max:        max,\n    min:        min,\n    partition:  partition,\n    pluck:      pluck,\n    reject:     reject,\n    sortBy:     sortBy,\n    toArray:    toArray,\n    entries:    toArray,\n    zip:        zip,\n    size:       size,\n    inspect:    inspect,\n    find:       detect\n  };\n})();\n\nfunction $A(iterable) {\n  if (!iterable) return [];\n  if ('toArray' in Object(iterable)) return iterable.toArray();\n  var length = iterable.length || 0, results = new Array(length);\n  while (length--) results[length] = iterable[length];\n  return results;\n}\n\n\nfunction $w(string) {\n  if (!Object.isString(string)) return [];\n  string = string.strip();\n  return string ? string.split(/\\s+/) : [];\n}\n\nArray.from = $A;\n\n\n(function() {\n  var arrayProto = Array.prototype,\n      slice = arrayProto.slice,\n      _each = arrayProto.forEach; // use native browser JS 1.6 implementation if available\n\n  function each(iterator, context) {\n    for (var i = 0, length = this.length >>> 0; i < length; i++) {\n      if (i in this) iterator.call(context, this[i], i, this);\n    }\n  }\n  if (!_each) _each = each;\n\n  function clear() {\n    this.length = 0;\n    return this;\n  }\n\n  function first() {\n    return this[0];\n  }\n\n  function last() {\n    return this[this.length - 1];\n  }\n\n  function compact() {\n    return this.select(function(value) {\n      return value != null;\n    });\n  }\n\n  function flatten() {\n    return this.inject([], function(array, value) {\n      if (Object.isArray(value))\n        return array.concat(value.flatten());\n      array.push(value);\n      return array;\n    });\n  }\n\n  function without() {\n    var values = slice.call(arguments, 0);\n    return this.select(function(value) {\n      return !values.include(value);\n    });\n  }\n\n  function reverse(inline) {\n    return (inline === false ? this.toArray() : this)._reverse();\n  }\n\n  function uniq(sorted) {\n    return this.inject([], function(array, value, index) {\n      if (0 == index || (sorted ? array.last() != value : !array.include(value)))\n        array.push(value);\n      return array;\n    });\n  }\n\n  function intersect(array) {\n    return this.uniq().findAll(function(item) {\n      return array.indexOf(item) !== -1;\n    });\n  }\n\n\n  function clone() {\n    return slice.call(this, 0);\n  }\n\n  function size() {\n    return this.length;\n  }\n\n  function inspect() {\n    return '[' + this.map(Object.inspect).join(', ') + ']';\n  }\n\n  function indexOf(item, i) {\n    if (this == null) throw new TypeError();\n\n    var array = Object(this), length = array.length >>> 0;\n    if (length === 0) return -1;\n\n    i = Number(i);\n    if (isNaN(i)) {\n      i = 0;\n    } else if (i !== 0 && isFinite(i)) {\n      i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));\n    }\n\n    if (i > length) return -1;\n\n    var k = i >= 0 ? i : Math.max(length - Math.abs(i), 0);\n    for (; k < length; k++)\n      if (k in array && array[k] === item) return k;\n    return -1;\n  }\n\n\n  function lastIndexOf(item, i) {\n    if (this == null) throw new TypeError();\n\n    var array = Object(this), length = array.length >>> 0;\n    if (length === 0) return -1;\n\n    if (!Object.isUndefined(i)) {\n      i = Number(i);\n      if (isNaN(i)) {\n        i = 0;\n      } else if (i !== 0 && isFinite(i)) {\n        i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));\n      }\n    } else {\n      i = length;\n    }\n\n    var k = i >= 0 ? Math.min(i, length - 1) :\n     length - Math.abs(i);\n\n    for (; k >= 0; k--)\n      if (k in array && array[k] === item) return k;\n    return -1;\n  }\n\n  function concat(_) {\n    var array = [], items = slice.call(arguments, 0), item, n = 0;\n    items.unshift(this);\n    for (var i = 0, length = items.length; i < length; i++) {\n      item = items[i];\n      if (Object.isArray(item) && !('callee' in item)) {\n        for (var j = 0, arrayLength = item.length; j < arrayLength; j++) {\n          if (j in item) array[n] = item[j];\n          n++;\n        }\n      } else {\n        array[n++] = item;\n      }\n    }\n    array.length = n;\n    return array;\n  }\n\n\n  function wrapNative(method) {\n    return function() {\n      if (arguments.length === 0) {\n        return method.call(this, Prototype.K);\n      } else if (arguments[0] === undefined) {\n        var args = slice.call(arguments, 1);\n        args.unshift(Prototype.K);\n        return method.apply(this, args);\n      } else {\n        return method.apply(this, arguments);\n      }\n    };\n  }\n\n\n  function map(iterator) {\n    if (this == null) throw new TypeError();\n    iterator = iterator || Prototype.K;\n\n    var object = Object(this);\n    var results = [], context = arguments[1], n = 0;\n\n    for (var i = 0, length = object.length >>> 0; i < length; i++) {\n      if (i in object) {\n        results[n] = iterator.call(context, object[i], i, object);\n      }\n      n++;\n    }\n    results.length = n;\n    return results;\n  }\n\n  if (arrayProto.map) {\n    map = wrapNative(Array.prototype.map);\n  }\n\n  function filter(iterator) {\n    if (this == null || !Object.isFunction(iterator))\n      throw new TypeError();\n\n    var object = Object(this);\n    var results = [], context = arguments[1], value;\n\n    for (var i = 0, length = object.length >>> 0; i < length; i++) {\n      if (i in object) {\n        value = object[i];\n        if (iterator.call(context, value, i, object)) {\n          results.push(value);\n        }\n      }\n    }\n    return results;\n  }\n\n  if (arrayProto.filter) {\n    filter = Array.prototype.filter;\n  }\n\n  function some(iterator) {\n    if (this == null) throw new TypeError();\n    iterator = iterator || Prototype.K;\n    var context = arguments[1];\n\n    var object = Object(this);\n    for (var i = 0, length = object.length >>> 0; i < length; i++) {\n      if (i in object && iterator.call(context, object[i], i, object)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  if (arrayProto.some) {\n    var some = wrapNative(Array.prototype.some);\n  }\n\n\n  function every(iterator) {\n    if (this == null) throw new TypeError();\n    iterator = iterator || Prototype.K;\n    var context = arguments[1];\n\n    var object = Object(this);\n    for (var i = 0, length = object.length >>> 0; i < length; i++) {\n      if (i in object && !iterator.call(context, object[i], i, object)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  if (arrayProto.every) {\n    var every = wrapNative(Array.prototype.every);\n  }\n\n  var _reduce = arrayProto.reduce;\n  function inject(memo, iterator) {\n    iterator = iterator || Prototype.K;\n    var context = arguments[2];\n    return _reduce.call(this, iterator.bind(context), memo);\n  }\n\n  if (!arrayProto.reduce) {\n    var inject = Enumerable.inject;\n  }\n\n  Object.extend(arrayProto, Enumerable);\n\n  if (!arrayProto._reverse)\n    arrayProto._reverse = arrayProto.reverse;\n\n  Object.extend(arrayProto, {\n    _each:     _each,\n\n    map:       map,\n    collect:   map,\n    select:    filter,\n    filter:    filter,\n    findAll:   filter,\n    some:      some,\n    any:       some,\n    every:     every,\n    all:       every,\n    inject:    inject,\n\n    clear:     clear,\n    first:     first,\n    last:      last,\n    compact:   compact,\n    flatten:   flatten,\n    without:   without,\n    reverse:   reverse,\n    uniq:      uniq,\n    intersect: intersect,\n    clone:     clone,\n    toArray:   clone,\n    size:      size,\n    inspect:   inspect\n  });\n\n  var CONCAT_ARGUMENTS_BUGGY = (function() {\n    return [].concat(arguments)[0][0] !== 1;\n  })(1,2);\n\n  if (CONCAT_ARGUMENTS_BUGGY) arrayProto.concat = concat;\n\n  if (!arrayProto.indexOf) arrayProto.indexOf = indexOf;\n  if (!arrayProto.lastIndexOf) arrayProto.lastIndexOf = lastIndexOf;\n})();\nfunction $H(object) {\n  return new Hash(object);\n};\n\nvar Hash = Class.create(Enumerable, (function() {\n  function initialize(object) {\n    this._object = Object.isHash(object) ? object.toObject() : Object.clone(object);\n  }\n\n\n  function _each(iterator, context) {\n    var i = 0;\n    for (var key in this._object) {\n      var value = this._object[key], pair = [key, value];\n      pair.key = key;\n      pair.value = value;\n      iterator.call(context, pair, i);\n      i++;\n    }\n  }\n\n  function set(key, value) {\n    return this._object[key] = value;\n  }\n\n  function get(key) {\n    if (this._object[key] !== Object.prototype[key])\n      return this._object[key];\n  }\n\n  function unset(key) {\n    var value = this._object[key];\n    delete this._object[key];\n    return value;\n  }\n\n  function toObject() {\n    return Object.clone(this._object);\n  }\n\n\n\n  function keys() {\n    return this.pluck('key');\n  }\n\n  function values() {\n    return this.pluck('value');\n  }\n\n  function index(value) {\n    var match = this.detect(function(pair) {\n      return pair.value === value;\n    });\n    return match && match.key;\n  }\n\n  function merge(object) {\n    return this.clone().update(object);\n  }\n\n  function update(object) {\n    return new Hash(object).inject(this, function(result, pair) {\n      result.set(pair.key, pair.value);\n      return result;\n    });\n  }\n\n  function toQueryPair(key, value) {\n    if (Object.isUndefined(value)) return key;\n\n    value = String.interpret(value);\n\n    value = value.gsub(/(\\r)?\\n/, '\\r\\n');\n    value = encodeURIComponent(value);\n    value = value.gsub(/%20/, '+');\n    return key + '=' + value;\n  }\n\n  function toQueryString() {\n    return this.inject([], function(results, pair) {\n      var key = encodeURIComponent(pair.key), values = pair.value;\n\n      if (values && typeof values == 'object') {\n        if (Object.isArray(values)) {\n          var queryValues = [];\n          for (var i = 0, len = values.length, value; i < len; i++) {\n            value = values[i];\n            queryValues.push(toQueryPair(key, value));\n          }\n          return results.concat(queryValues);\n        }\n      } else results.push(toQueryPair(key, values));\n      return results;\n    }).join('&');\n  }\n\n  function inspect() {\n    return '#<Hash:{' + this.map(function(pair) {\n      return pair.map(Object.inspect).join(': ');\n    }).join(', ') + '}>';\n  }\n\n  function clone() {\n    return new Hash(this);\n  }\n\n  return {\n    initialize:             initialize,\n    _each:                  _each,\n    set:                    set,\n    get:                    get,\n    unset:                  unset,\n    toObject:               toObject,\n    toTemplateReplacements: toObject,\n    keys:                   keys,\n    values:                 values,\n    index:                  index,\n    merge:                  merge,\n    update:                 update,\n    toQueryString:          toQueryString,\n    inspect:                inspect,\n    toJSON:                 toObject,\n    clone:                  clone\n  };\n})());\n\nHash.from = $H;\nObject.extend(Number.prototype, (function() {\n  function toColorPart() {\n    return this.toPaddedString(2, 16);\n  }\n\n  function succ() {\n    return this + 1;\n  }\n\n  function times(iterator, context) {\n    $R(0, this, true).each(iterator, context);\n    return this;\n  }\n\n  function toPaddedString(length, radix) {\n    var string = this.toString(radix || 10);\n    return '0'.times(length - string.length) + string;\n  }\n\n  function abs() {\n    return Math.abs(this);\n  }\n\n  function round() {\n    return Math.round(this);\n  }\n\n  function ceil() {\n    return Math.ceil(this);\n  }\n\n  function floor() {\n    return Math.floor(this);\n  }\n\n  return {\n    toColorPart:    toColorPart,\n    succ:           succ,\n    times:          times,\n    toPaddedString: toPaddedString,\n    abs:            abs,\n    round:          round,\n    ceil:           ceil,\n    floor:          floor\n  };\n})());\n\nfunction $R(start, end, exclusive) {\n  return new ObjectRange(start, end, exclusive);\n}\n\nvar ObjectRange = Class.create(Enumerable, (function() {\n  function initialize(start, end, exclusive) {\n    this.start = start;\n    this.end = end;\n    this.exclusive = exclusive;\n  }\n\n  function _each(iterator, context) {\n    var value = this.start, i;\n    for (i = 0; this.include(value); i++) {\n      iterator.call(context, value, i);\n      value = value.succ();\n    }\n  }\n\n  function include(value) {\n    if (value < this.start)\n      return false;\n    if (this.exclusive)\n      return value < this.end;\n    return value <= this.end;\n  }\n\n  return {\n    initialize: initialize,\n    _each:      _each,\n    include:    include\n  };\n})());\n\n\n\nvar Abstract = { };\n\n\nvar Try = {\n  these: function() {\n    var returnValue;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      var lambda = arguments[i];\n      try {\n        returnValue = lambda();\n        break;\n      } catch (e) { }\n    }\n\n    return returnValue;\n  }\n};\n\nvar Ajax = {\n  getTransport: function() {\n    return Try.these(\n      function() {return new XMLHttpRequest()},\n      function() {return new ActiveXObject('Msxml2.XMLHTTP')},\n      function() {return new ActiveXObject('Microsoft.XMLHTTP')}\n    ) || false;\n  },\n\n  activeRequestCount: 0\n};\n\nAjax.Responders = {\n  responders: [],\n\n  _each: function(iterator, context) {\n    this.responders._each(iterator, context);\n  },\n\n  register: function(responder) {\n    if (!this.include(responder))\n      this.responders.push(responder);\n  },\n\n  unregister: function(responder) {\n    this.responders = this.responders.without(responder);\n  },\n\n  dispatch: function(callback, request, transport, json) {\n    this.each(function(responder) {\n      if (Object.isFunction(responder[callback])) {\n        try {\n          responder[callback].apply(responder, [request, transport, json]);\n        } catch (e) { }\n      }\n    });\n  }\n};\n\nObject.extend(Ajax.Responders, Enumerable);\n\nAjax.Responders.register({\n  onCreate:   function() { Ajax.activeRequestCount++ },\n  onComplete: function() { Ajax.activeRequestCount-- }\n});\nAjax.Base = Class.create({\n  initialize: function(options) {\n    this.options = {\n      method:       'post',\n      asynchronous: true,\n      contentType:  'application/x-www-form-urlencoded',\n      encoding:     'UTF-8',\n      parameters:   '',\n      evalJSON:     true,\n      evalJS:       true\n    };\n    Object.extend(this.options, options || { });\n\n    this.options.method = this.options.method.toLowerCase();\n\n    if (Object.isHash(this.options.parameters))\n      this.options.parameters = this.options.parameters.toObject();\n  }\n});\nAjax.Request = Class.create(Ajax.Base, {\n  _complete: false,\n\n  initialize: function($super, url, options) {\n    $super(options);\n    this.transport = Ajax.getTransport();\n    this.request(url);\n  },\n\n  request: function(url) {\n    this.url = url;\n    this.method = this.options.method;\n    var params = Object.isString(this.options.parameters) ?\n          this.options.parameters :\n          Object.toQueryString(this.options.parameters);\n\n    if (!['get', 'post'].include(this.method)) {\n      params += (params ? '&' : '') + \"_method=\" + this.method;\n      this.method = 'post';\n    }\n\n    if (params && this.method === 'get') {\n      this.url += (this.url.include('?') ? '&' : '?') + params;\n    }\n\n    this.parameters = params.toQueryParams();\n\n    try {\n      var response = new Ajax.Response(this);\n      if (this.options.onCreate) this.options.onCreate(response);\n      Ajax.Responders.dispatch('onCreate', this, response);\n\n      this.transport.open(this.method.toUpperCase(), this.url,\n        this.options.asynchronous);\n\n      if (this.options.asynchronous) this.respondToReadyState.bind(this).defer(1);\n\n      this.transport.onreadystatechange = this.onStateChange.bind(this);\n      this.setRequestHeaders();\n\n      this.body = this.method == 'post' ? (this.options.postBody || params) : null;\n      this.transport.send(this.body);\n\n      /* Force Firefox to handle ready state 4 for synchronous requests */\n      if (!this.options.asynchronous && this.transport.overrideMimeType)\n        this.onStateChange();\n\n    }\n    catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  onStateChange: function() {\n    var readyState = this.transport.readyState;\n    if (readyState > 1 && !((readyState == 4) && this._complete))\n      this.respondToReadyState(this.transport.readyState);\n  },\n\n  setRequestHeaders: function() {\n    var headers = {\n      'X-Requested-With': 'XMLHttpRequest',\n      'X-Prototype-Version': Prototype.Version,\n      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'\n    };\n\n    if (this.method == 'post') {\n      headers['Content-type'] = this.options.contentType +\n        (this.options.encoding ? '; charset=' + this.options.encoding : '');\n\n      /* Force \"Connection: close\" for older Mozilla browsers to work\n       * around a bug where XMLHttpRequest sends an incorrect\n       * Content-length header. See Mozilla Bugzilla #246651.\n       */\n      if (this.transport.overrideMimeType &&\n          (navigator.userAgent.match(/Gecko\\/(\\d{4})/) || [0,2005])[1] < 2005)\n            headers['Connection'] = 'close';\n    }\n\n    if (typeof this.options.requestHeaders == 'object') {\n      var extras = this.options.requestHeaders;\n\n      if (Object.isFunction(extras.push))\n        for (var i = 0, length = extras.length; i < length; i += 2)\n          headers[extras[i]] = extras[i+1];\n      else\n        $H(extras).each(function(pair) { headers[pair.key] = pair.value });\n    }\n\n    for (var name in headers)\n      if (headers[name] != null)\n        this.transport.setRequestHeader(name, headers[name]);\n  },\n\n  success: function() {\n    var status = this.getStatus();\n    return !status || (status >= 200 && status < 300) || status == 304;\n  },\n\n  getStatus: function() {\n    try {\n      if (this.transport.status === 1223) return 204;\n      return this.transport.status || 0;\n    } catch (e) { return 0 }\n  },\n\n  respondToReadyState: function(readyState) {\n    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);\n\n    if (state == 'Complete') {\n      try {\n        this._complete = true;\n        (this.options['on' + response.status]\n         || this.options['on' + (this.success() ? 'Success' : 'Failure')]\n         || Prototype.emptyFunction)(response, response.headerJSON);\n      } catch (e) {\n        this.dispatchException(e);\n      }\n\n      var contentType = response.getHeader('Content-type');\n      if (this.options.evalJS == 'force'\n          || (this.options.evalJS && this.isSameOrigin() && contentType\n          && contentType.match(/^\\s*(text|application)\\/(x-)?(java|ecma)script(;.*)?\\s*$/i)))\n        this.evalResponse();\n    }\n\n    try {\n      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);\n      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);\n    } catch (e) {\n      this.dispatchException(e);\n    }\n\n    if (state == 'Complete') {\n      this.transport.onreadystatechange = Prototype.emptyFunction;\n    }\n  },\n\n  isSameOrigin: function() {\n    var m = this.url.match(/^\\s*https?:\\/\\/[^\\/]*/);\n    return !m || (m[0] == '#{protocol}//#{domain}#{port}'.interpolate({\n      protocol: location.protocol,\n      domain: document.domain,\n      port: location.port ? ':' + location.port : ''\n    }));\n  },\n\n  getHeader: function(name) {\n    try {\n      return this.transport.getResponseHeader(name) || null;\n    } catch (e) { return null; }\n  },\n\n  evalResponse: function() {\n    try {\n      return eval((this.transport.responseText || '').unfilterJSON());\n    } catch (e) {\n      this.dispatchException(e);\n    }\n  },\n\n  dispatchException: function(exception) {\n    (this.options.onException || Prototype.emptyFunction)(this, exception);\n    Ajax.Responders.dispatch('onException', this, exception);\n  }\n});\n\nAjax.Request.Events =\n  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];\n\n\n\n\n\n\n\n\nAjax.Response = Class.create({\n  initialize: function(request){\n    this.request = request;\n    var transport  = this.transport  = request.transport,\n        readyState = this.readyState = transport.readyState;\n\n    if ((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {\n      this.status       = this.getStatus();\n      this.statusText   = this.getStatusText();\n      this.responseText = String.interpret(transport.responseText);\n      this.headerJSON   = this._getHeaderJSON();\n    }\n\n    if (readyState == 4) {\n      var xml = transport.responseXML;\n      this.responseXML  = Object.isUndefined(xml) ? null : xml;\n      this.responseJSON = this._getResponseJSON();\n    }\n  },\n\n  status:      0,\n\n  statusText: '',\n\n  getStatus: Ajax.Request.prototype.getStatus,\n\n  getStatusText: function() {\n    try {\n      return this.transport.statusText || '';\n    } catch (e) { return '' }\n  },\n\n  getHeader: Ajax.Request.prototype.getHeader,\n\n  getAllHeaders: function() {\n    try {\n      return this.getAllResponseHeaders();\n    } catch (e) { return null }\n  },\n\n  getResponseHeader: function(name) {\n    return this.transport.getResponseHeader(name);\n  },\n\n  getAllResponseHeaders: function() {\n    return this.transport.getAllResponseHeaders();\n  },\n\n  _getHeaderJSON: function() {\n    var json = this.getHeader('X-JSON');\n    if (!json) return null;\n\n    try {\n      json = decodeURIComponent(escape(json));\n    } catch(e) {\n    }\n\n    try {\n      return json.evalJSON(this.request.options.sanitizeJSON ||\n        !this.request.isSameOrigin());\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  },\n\n  _getResponseJSON: function() {\n    var options = this.request.options;\n    if (!options.evalJSON || (options.evalJSON != 'force' &&\n      !(this.getHeader('Content-type') || '').include('application/json')) ||\n        this.responseText.blank())\n          return null;\n    try {\n      return this.responseText.evalJSON(options.sanitizeJSON ||\n        !this.request.isSameOrigin());\n    } catch (e) {\n      this.request.dispatchException(e);\n    }\n  }\n});\n\nAjax.Updater = Class.create(Ajax.Request, {\n  initialize: function($super, container, url, options) {\n    this.container = {\n      success: (container.success || container),\n      failure: (container.failure || (container.success ? null : container))\n    };\n\n    options = Object.clone(options);\n    var onComplete = options.onComplete;\n    options.onComplete = (function(response, json) {\n      this.updateContent(response.responseText);\n      if (Object.isFunction(onComplete)) onComplete(response, json);\n    }).bind(this);\n\n    $super(url, options);\n  },\n\n  updateContent: function(responseText) {\n    var receiver = this.container[this.success() ? 'success' : 'failure'],\n        options = this.options;\n\n    if (!options.evalScripts) responseText = responseText.stripScripts();\n\n    if (receiver = $(receiver)) {\n      if (options.insertion) {\n        if (Object.isString(options.insertion)) {\n          var insertion = { }; insertion[options.insertion] = responseText;\n          receiver.insert(insertion);\n        }\n        else options.insertion(receiver, responseText);\n      }\n      else receiver.update(responseText);\n    }\n  }\n});\n\nAjax.PeriodicalUpdater = Class.create(Ajax.Base, {\n  initialize: function($super, container, url, options) {\n    $super(options);\n    this.onComplete = this.options.onComplete;\n\n    this.frequency = (this.options.frequency || 2);\n    this.decay = (this.options.decay || 1);\n\n    this.updater = { };\n    this.container = container;\n    this.url = url;\n\n    this.start();\n  },\n\n  start: function() {\n    this.options.onComplete = this.updateComplete.bind(this);\n    this.onTimerEvent();\n  },\n\n  stop: function() {\n    this.updater.options.onComplete = undefined;\n    clearTimeout(this.timer);\n    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);\n  },\n\n  updateComplete: function(response) {\n    if (this.options.decay) {\n      this.decay = (response.responseText == this.lastText ?\n        this.decay * this.options.decay : 1);\n\n      this.lastText = response.responseText;\n    }\n    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);\n  },\n\n  onTimerEvent: function() {\n    this.updater = new Ajax.Updater(this.container, this.url, this.options);\n  }\n});\n\n(function(GLOBAL) {\n\n  var UNDEFINED;\n  var SLICE = Array.prototype.slice;\n\n  var DIV = document.createElement('div');\n\n\n  function $(element) {\n    if (arguments.length > 1) {\n      for (var i = 0, elements = [], length = arguments.length; i < length; i++)\n        elements.push($(arguments[i]));\n      return elements;\n    }\n\n    if (Object.isString(element))\n      element = document.getElementById(element);\n    return Element.extend(element);\n  }\n\n  GLOBAL.$ = $;\n\n\n  if (!GLOBAL.Node) GLOBAL.Node = {};\n\n  if (!GLOBAL.Node.ELEMENT_NODE) {\n    Object.extend(GLOBAL.Node, {\n      ELEMENT_NODE:                1,\n      ATTRIBUTE_NODE:              2,\n      TEXT_NODE:                   3,\n      CDATA_SECTION_NODE:          4,\n      ENTITY_REFERENCE_NODE:       5,\n      ENTITY_NODE:                 6,\n      PROCESSING_INSTRUCTION_NODE: 7,\n      COMMENT_NODE:                8,\n      DOCUMENT_NODE:               9,\n      DOCUMENT_TYPE_NODE:         10,\n      DOCUMENT_FRAGMENT_NODE:     11,\n      NOTATION_NODE:              12\n    });\n  }\n\n  var ELEMENT_CACHE = {};\n\n  function shouldUseCreationCache(tagName, attributes) {\n    if (tagName === 'select') return false;\n    if ('type' in attributes) return false;\n    return true;\n  }\n\n  var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX = (function(){\n    try {\n      var el = document.createElement('<input name=\"x\">');\n      return el.tagName.toLowerCase() === 'input' && el.name === 'x';\n    }\n    catch(err) {\n      return false;\n    }\n  })();\n\n\n  var oldElement = GLOBAL.Element;\n  function Element(tagName, attributes) {\n    attributes = attributes || {};\n    tagName = tagName.toLowerCase();\n\n    if (HAS_EXTENDED_CREATE_ELEMENT_SYNTAX && attributes.name) {\n      tagName = '<' + tagName + ' name=\"' + attributes.name + '\">';\n      delete attributes.name;\n      return Element.writeAttribute(document.createElement(tagName), attributes);\n    }\n\n    if (!ELEMENT_CACHE[tagName])\n      ELEMENT_CACHE[tagName] = Element.extend(document.createElement(tagName));\n\n    var node = shouldUseCreationCache(tagName, attributes) ?\n     ELEMENT_CACHE[tagName].cloneNode(false) : document.createElement(tagName);\n\n    return Element.writeAttribute(node, attributes);\n  }\n\n  GLOBAL.Element = Element;\n\n  Object.extend(GLOBAL.Element, oldElement || {});\n  if (oldElement) GLOBAL.Element.prototype = oldElement.prototype;\n\n  Element.Methods = { ByTag: {}, Simulated: {} };\n\n  var methods = {};\n\n  var INSPECT_ATTRIBUTES = { id: 'id', className: 'class' };\n  function inspect(element) {\n    element = $(element);\n    var result = '<' + element.tagName.toLowerCase();\n\n    var attribute, value;\n    for (var property in INSPECT_ATTRIBUTES) {\n      attribute = INSPECT_ATTRIBUTES[property];\n      value = (element[property] || '').toString();\n      if (value) result += ' ' + attribute + '=' + value.inspect(true);\n    }\n\n    return result + '>';\n  }\n\n  methods.inspect = inspect;\n\n\n  function visible(element) {\n    return $(element).style.display !== 'none';\n  }\n\n  function toggle(element, bool) {\n    element = $(element);\n    if (Object.isUndefined(bool))\n      bool = !Element.visible(element);\n    Element[bool ? 'show' : 'hide'](element);\n\n    return element;\n  }\n\n  function hide(element) {\n    element = $(element);\n    element.style.display = 'none';\n    return element;\n  }\n\n  function show(element) {\n    element = $(element);\n    element.style.display = '';\n    return element;\n  }\n\n\n  Object.extend(methods, {\n    visible: visible,\n    toggle:  toggle,\n    hide:    hide,\n    show:    show\n  });\n\n\n  function remove(element) {\n    element = $(element);\n    element.parentNode.removeChild(element);\n    return element;\n  }\n\n  var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){\n    var el = document.createElement(\"select\"),\n        isBuggy = true;\n    el.innerHTML = \"<option value=\\\"test\\\">test</option>\";\n    if (el.options && el.options[0]) {\n      isBuggy = el.options[0].nodeName.toUpperCase() !== \"OPTION\";\n    }\n    el = null;\n    return isBuggy;\n  })();\n\n  var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){\n    try {\n      var el = document.createElement(\"table\");\n      if (el && el.tBodies) {\n        el.innerHTML = \"<tbody><tr><td>test</td></tr></tbody>\";\n        var isBuggy = typeof el.tBodies[0] == \"undefined\";\n        el = null;\n        return isBuggy;\n      }\n    } catch (e) {\n      return true;\n    }\n  })();\n\n  var LINK_ELEMENT_INNERHTML_BUGGY = (function() {\n    try {\n      var el = document.createElement('div');\n      el.innerHTML = \"<link />\";\n      var isBuggy = (el.childNodes.length === 0);\n      el = null;\n      return isBuggy;\n    } catch(e) {\n      return true;\n    }\n  })();\n\n  var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||\n   TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;\n\n  var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {\n    var s = document.createElement(\"script\"),\n        isBuggy = false;\n    try {\n      s.appendChild(document.createTextNode(\"\"));\n      isBuggy = !s.firstChild ||\n        s.firstChild && s.firstChild.nodeType !== 3;\n    } catch (e) {\n      isBuggy = true;\n    }\n    s = null;\n    return isBuggy;\n  })();\n\n  function update(element, content) {\n    element = $(element);\n\n    var descendants = element.getElementsByTagName('*'),\n     i = descendants.length;\n    while (i--) purgeElement(descendants[i]);\n\n    if (content && content.toElement)\n      content = content.toElement();\n\n    if (Object.isElement(content))\n      return element.update().insert(content);\n\n\n    content = Object.toHTML(content);\n    var tagName = element.tagName.toUpperCase();\n\n    if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {\n      element.text = content;\n      return element;\n    }\n\n    if (ANY_INNERHTML_BUGGY) {\n      if (tagName in INSERTION_TRANSLATIONS.tags) {\n        while (element.firstChild)\n          element.removeChild(element.firstChild);\n\n        var nodes = getContentFromAnonymousElement(tagName, content.stripScripts());\n        for (var i = 0, node; node = nodes[i]; i++)\n          element.appendChild(node);\n\n      } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {\n        while (element.firstChild)\n          element.removeChild(element.firstChild);\n\n        var nodes = getContentFromAnonymousElement(tagName,\n         content.stripScripts(), true);\n\n        for (var i = 0, node; node = nodes[i]; i++)\n          element.appendChild(node);\n      } else {\n        element.innerHTML = content.stripScripts();\n      }\n    } else {\n      element.innerHTML = content.stripScripts();\n    }\n\n    content.evalScripts.bind(content).defer();\n    return element;\n  }\n\n  function replace(element, content) {\n    element = $(element);\n\n    if (content && content.toElement) {\n      content = content.toElement();\n    } else if (!Object.isElement(content)) {\n      content = Object.toHTML(content);\n      var range = element.ownerDocument.createRange();\n      range.selectNode(element);\n      content.evalScripts.bind(content).defer();\n      content = range.createContextualFragment(content.stripScripts());\n    }\n\n    element.parentNode.replaceChild(content, element);\n    return element;\n  }\n\n  var INSERTION_TRANSLATIONS = {\n    before: function(element, node) {\n      element.parentNode.insertBefore(node, element);\n    },\n    top: function(element, node) {\n      element.insertBefore(node, element.firstChild);\n    },\n    bottom: function(element, node) {\n      element.appendChild(node);\n    },\n    after: function(element, node) {\n      element.parentNode.insertBefore(node, element.nextSibling);\n    },\n\n    tags: {\n      TABLE:  ['<table>',                '</table>',                   1],\n      TBODY:  ['<table><tbody>',         '</tbody></table>',           2],\n      TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],\n      TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],\n      SELECT: ['<select>',               '</select>',                  1]\n    }\n  };\n\n  var tags = INSERTION_TRANSLATIONS.tags;\n\n  Object.extend(tags, {\n    THEAD: tags.TBODY,\n    TFOOT: tags.TBODY,\n    TH:    tags.TD\n  });\n\n  function replace_IE(element, content) {\n    element = $(element);\n    if (content && content.toElement)\n      content = content.toElement();\n    if (Object.isElement(content)) {\n      element.parentNode.replaceChild(content, element);\n      return element;\n    }\n\n    content = Object.toHTML(content);\n    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();\n\n    if (tagName in INSERTION_TRANSLATIONS.tags) {\n      var nextSibling = Element.next(element);\n      var fragments = getContentFromAnonymousElement(\n       tagName, content.stripScripts());\n\n      parent.removeChild(element);\n\n      var iterator;\n      if (nextSibling)\n        iterator = function(node) { parent.insertBefore(node, nextSibling) };\n      else\n        iterator = function(node) { parent.appendChild(node); }\n\n      fragments.each(iterator);\n    } else {\n      element.outerHTML = content.stripScripts();\n    }\n\n    content.evalScripts.bind(content).defer();\n    return element;\n  }\n\n  if ('outerHTML' in document.documentElement)\n    replace = replace_IE;\n\n  function isContent(content) {\n    if (Object.isUndefined(content) || content === null) return false;\n\n    if (Object.isString(content) || Object.isNumber(content)) return true;\n    if (Object.isElement(content)) return true;\n    if (content.toElement || content.toHTML) return true;\n\n    return false;\n  }\n\n  function insertContentAt(element, content, position) {\n    position   = position.toLowerCase();\n    var method = INSERTION_TRANSLATIONS[position];\n\n    if (content && content.toElement) content = content.toElement();\n    if (Object.isElement(content)) {\n      method(element, content);\n      return element;\n    }\n\n    content = Object.toHTML(content);\n    var tagName = ((position === 'before' || position === 'after') ?\n     element.parentNode : element).tagName.toUpperCase();\n\n    var childNodes = getContentFromAnonymousElement(tagName, content.stripScripts());\n\n    if (position === 'top' || position === 'after') childNodes.reverse();\n\n    for (var i = 0, node; node = childNodes[i]; i++)\n      method(element, node);\n\n    content.evalScripts.bind(content).defer();\n  }\n\n  function insert(element, insertions) {\n    element = $(element);\n\n    if (isContent(insertions))\n      insertions = { bottom: insertions };\n\n    for (var position in insertions)\n      insertContentAt(element, insertions[position], position);\n\n    return element;\n  }\n\n  function wrap(element, wrapper, attributes) {\n    element = $(element);\n\n    if (Object.isElement(wrapper)) {\n      $(wrapper).writeAttribute(attributes || {});\n    } else if (Object.isString(wrapper)) {\n      wrapper = new Element(wrapper, attributes);\n    } else {\n      wrapper = new Element('div', wrapper);\n    }\n\n    if (element.parentNode)\n      element.parentNode.replaceChild(wrapper, element);\n\n    wrapper.appendChild(element);\n\n    return wrapper;\n  }\n\n  function cleanWhitespace(element) {\n    element = $(element);\n    var node = element.firstChild;\n\n    while (node) {\n      var nextNode = node.nextSibling;\n      if (node.nodeType === Node.TEXT_NODE && !/\\S/.test(node.nodeValue))\n        element.removeChild(node);\n      node = nextNode;\n    }\n    return element;\n  }\n\n  function empty(element) {\n    return $(element).innerHTML.blank();\n  }\n\n  function getContentFromAnonymousElement(tagName, html, force) {\n    var t = INSERTION_TRANSLATIONS.tags[tagName], div = DIV;\n\n    var workaround = !!t;\n    if (!workaround && force) {\n      workaround = true;\n      t = ['', '', 0];\n    }\n\n    if (workaround) {\n      div.innerHTML = '&#160;' + t[0] + html + t[1];\n      div.removeChild(div.firstChild);\n      for (var i = t[2]; i--; )\n        div = div.firstChild;\n    } else {\n      div.innerHTML = html;\n    }\n\n    return $A(div.childNodes);\n  }\n\n  function clone(element, deep) {\n    if (!(element = $(element))) return;\n    var clone = element.cloneNode(deep);\n    if (!HAS_UNIQUE_ID_PROPERTY) {\n      clone._prototypeUID = UNDEFINED;\n      if (deep) {\n        var descendants = Element.select(clone, '*'),\n         i = descendants.length;\n        while (i--)\n          descendants[i]._prototypeUID = UNDEFINED;\n      }\n    }\n    return Element.extend(clone);\n  }\n\n  function purgeElement(element) {\n    var uid = getUniqueElementID(element);\n    if (uid) {\n      Element.stopObserving(element);\n      if (!HAS_UNIQUE_ID_PROPERTY)\n        element._prototypeUID = UNDEFINED;\n      delete Element.Storage[uid];\n    }\n  }\n\n  function purgeCollection(elements) {\n    var i = elements.length;\n    while (i--)\n      purgeElement(elements[i]);\n  }\n\n  function purgeCollection_IE(elements) {\n    var i = elements.length, element, uid;\n    while (i--) {\n      element = elements[i];\n      uid = getUniqueElementID(element);\n      delete Element.Storage[uid];\n      delete Event.cache[uid];\n    }\n  }\n\n  if (HAS_UNIQUE_ID_PROPERTY) {\n    purgeCollection = purgeCollection_IE;\n  }\n\n\n  function purge(element) {\n    if (!(element = $(element))) return;\n    purgeElement(element);\n\n    var descendants = element.getElementsByTagName('*'),\n     i = descendants.length;\n\n    while (i--) purgeElement(descendants[i]);\n\n    return null;\n  }\n\n  Object.extend(methods, {\n    remove:  remove,\n    update:  update,\n    replace: replace,\n    insert:  insert,\n    wrap:    wrap,\n    cleanWhitespace: cleanWhitespace,\n    empty:   empty,\n    clone:   clone,\n    purge:   purge\n  });\n\n\n\n  function recursivelyCollect(element, property, maximumLength) {\n    element = $(element);\n    maximumLength = maximumLength || -1;\n    var elements = [];\n\n    while (element = element[property]) {\n      if (element.nodeType === Node.ELEMENT_NODE)\n        elements.push(Element.extend(element));\n\n      if (elements.length === maximumLength) break;\n    }\n\n    return elements;\n  }\n\n\n  function ancestors(element) {\n    return recursivelyCollect(element, 'parentNode');\n  }\n\n  function descendants(element) {\n    return Element.select(element, '*');\n  }\n\n  function firstDescendant(element) {\n    element = $(element).firstChild;\n    while (element && element.nodeType !== Node.ELEMENT_NODE)\n      element = element.nextSibling;\n\n    return $(element);\n  }\n\n  function immediateDescendants(element) {\n    var results = [], child = $(element).firstChild;\n\n    while (child) {\n      if (child.nodeType === Node.ELEMENT_NODE)\n        results.push(Element.extend(child));\n\n      child = child.nextSibling;\n    }\n\n    return results;\n  }\n\n  function previousSiblings(element) {\n    return recursivelyCollect(element, 'previousSibling');\n  }\n\n  function nextSiblings(element) {\n    return recursivelyCollect(element, 'nextSibling');\n  }\n\n  function siblings(element) {\n    element = $(element);\n    var previous = previousSiblings(element),\n     next = nextSiblings(element);\n    return previous.reverse().concat(next);\n  }\n\n  function match(element, selector) {\n    element = $(element);\n\n    if (Object.isString(selector))\n      return Prototype.Selector.match(element, selector);\n\n    return selector.match(element);\n  }\n\n\n  function _recursivelyFind(element, property, expression, index) {\n    element = $(element), expression = expression || 0, index = index || 0;\n    if (Object.isNumber(expression)) {\n      index = expression, expression = null;\n    }\n\n    while (element = element[property]) {\n      if (element.nodeType !== 1) continue;\n      if (expression && !Prototype.Selector.match(element, expression))\n        continue;\n      if (--index >= 0) continue;\n\n      return Element.extend(element);\n    }\n  }\n\n\n  function up(element, expression, index) {\n    element = $(element);\n\n    if (arguments.length === 1) return $(element.parentNode);\n    return _recursivelyFind(element, 'parentNode', expression, index);\n  }\n\n  function down(element, expression, index) {\n    if (arguments.length === 1) return firstDescendant(element);\n    element = $(element), expression = expression || 0, index = index || 0;\n\n    if (Object.isNumber(expression))\n      index = expression, expression = '*';\n\n    var node = Prototype.Selector.select(expression, element)[index];\n    return Element.extend(node);\n  }\n\n  function previous(element, expression, index) {\n    return _recursivelyFind(element, 'previousSibling', expression, index);\n  }\n\n  function next(element, expression, index) {\n    return _recursivelyFind(element, 'nextSibling', expression, index);\n  }\n\n  function select(element) {\n    element = $(element);\n    var expressions = SLICE.call(arguments, 1).join(', ');\n    return Prototype.Selector.select(expressions, element);\n  }\n\n  function adjacent(element) {\n    element = $(element);\n    var expressions = SLICE.call(arguments, 1).join(', ');\n    var siblings = Element.siblings(element), results = [];\n    for (var i = 0, sibling; sibling = siblings[i]; i++) {\n      if (Prototype.Selector.match(sibling, expressions))\n        results.push(sibling);\n    }\n\n    return results;\n  }\n\n  function descendantOf_DOM(element, ancestor) {\n    element = $(element), ancestor = $(ancestor);\n    while (element = element.parentNode)\n      if (element === ancestor) return true;\n    return false;\n  }\n\n  function descendantOf_contains(element, ancestor) {\n    element = $(element), ancestor = $(ancestor);\n    if (!ancestor.contains) return descendantOf_DOM(element, ancestor);\n    return ancestor.contains(element) && ancestor !== element;\n  }\n\n  function descendantOf_compareDocumentPosition(element, ancestor) {\n    element = $(element), ancestor = $(ancestor);\n    return (element.compareDocumentPosition(ancestor) & 8) === 8;\n  }\n\n  var descendantOf;\n  if (DIV.compareDocumentPosition) {\n    descendantOf = descendantOf_compareDocumentPosition;\n  } else if (DIV.contains) {\n    descendantOf = descendantOf_contains;\n  } else {\n    descendantOf = descendantOf_DOM;\n  }\n\n\n  Object.extend(methods, {\n    recursivelyCollect:   recursivelyCollect,\n    ancestors:            ancestors,\n    descendants:          descendants,\n    firstDescendant:      firstDescendant,\n    immediateDescendants: immediateDescendants,\n    previousSiblings:     previousSiblings,\n    nextSiblings:         nextSiblings,\n    siblings:             siblings,\n    match:                match,\n    up:                   up,\n    down:                 down,\n    previous:             previous,\n    next:                 next,\n    select:               select,\n    adjacent:             adjacent,\n    descendantOf:         descendantOf,\n\n    getElementsBySelector: select,\n\n    childElements:         immediateDescendants\n  });\n\n\n  var idCounter = 1;\n  function identify(element) {\n    element = $(element);\n    var id = Element.readAttribute(element, 'id');\n    if (id) return id;\n\n    do { id = 'anonymous_element_' + idCounter++ } while ($(id));\n\n    Element.writeAttribute(element, 'id', id);\n    return id;\n  }\n\n\n  function readAttribute(element, name) {\n    return $(element).getAttribute(name);\n  }\n\n  function readAttribute_IE(element, name) {\n    element = $(element);\n\n    var table = ATTRIBUTE_TRANSLATIONS.read;\n    if (table.values[name])\n      return table.values[name](element, name);\n\n    if (table.names[name]) name = table.names[name];\n\n    if (name.include(':')) {\n      if (!element.attributes || !element.attributes[name]) return null;\n      return element.attributes[name].value;\n    }\n\n    return element.getAttribute(name);\n  }\n\n  function readAttribute_Opera(element, name) {\n    if (name === 'title') return element.title;\n    return element.getAttribute(name);\n  }\n\n  var PROBLEMATIC_ATTRIBUTE_READING = (function() {\n    DIV.setAttribute('onclick', []);\n    var value = DIV.getAttribute('onclick');\n    var isFunction = Object.isArray(value);\n    DIV.removeAttribute('onclick');\n    return isFunction;\n  })();\n\n  if (PROBLEMATIC_ATTRIBUTE_READING) {\n    readAttribute = readAttribute_IE;\n  } else if (Prototype.Browser.Opera) {\n    readAttribute = readAttribute_Opera;\n  }\n\n\n  function writeAttribute(element, name, value) {\n    element = $(element);\n    var attributes = {}, table = ATTRIBUTE_TRANSLATIONS.write;\n\n    if (typeof name === 'object') {\n      attributes = name;\n    } else {\n      attributes[name] = Object.isUndefined(value) ? true : value;\n    }\n\n    for (var attr in attributes) {\n      name = table.names[attr] || attr;\n      value = attributes[attr];\n      if (table.values[attr])\n        name = table.values[attr](element, value) || name;\n      if (value === false || value === null)\n        element.removeAttribute(name);\n      else if (value === true)\n        element.setAttribute(name, name);\n      else element.setAttribute(name, value);\n    }\n\n    return element;\n  }\n\n  var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES = (function () {\n    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) {\n      return false;\n    }\n    var checkbox = document.createElement('<input type=\"checkbox\">');\n    checkbox.checked = true;\n    var node = checkbox.getAttributeNode('checked');\n    return !node || !node.specified;\n  })();\n\n  function hasAttribute(element, attribute) {\n    attribute = ATTRIBUTE_TRANSLATIONS.has[attribute] || attribute;\n    var node = $(element).getAttributeNode(attribute);\n    return !!(node && node.specified);\n  }\n\n  function hasAttribute_IE(element, attribute) {\n    if (attribute === 'checked') {\n      return element.checked;\n    }\n    return hasAttribute(element, attribute);\n  }\n\n  GLOBAL.Element.Methods.Simulated.hasAttribute =\n   PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES ?\n   hasAttribute_IE : hasAttribute;\n\n  function classNames(element) {\n    return new Element.ClassNames(element);\n  }\n\n  var regExpCache = {};\n  function getRegExpForClassName(className) {\n    if (regExpCache[className]) return regExpCache[className];\n\n    var re = new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");\n    regExpCache[className] = re;\n    return re;\n  }\n\n  function hasClassName(element, className) {\n    if (!(element = $(element))) return;\n\n    var elementClassName = element.className;\n\n    if (elementClassName.length === 0) return false;\n    if (elementClassName === className) return true;\n\n    return getRegExpForClassName(className).test(elementClassName);\n  }\n\n  function addClassName(element, className) {\n    if (!(element = $(element))) return;\n\n    if (!hasClassName(element, className))\n      element.className += (element.className ? ' ' : '') + className;\n\n    return element;\n  }\n\n  function removeClassName(element, className) {\n    if (!(element = $(element))) return;\n\n    element.className = element.className.replace(\n     getRegExpForClassName(className), ' ').strip();\n\n    return element;\n  }\n\n  function toggleClassName(element, className, bool) {\n    if (!(element = $(element))) return;\n\n    if (Object.isUndefined(bool))\n      bool = !hasClassName(element, className);\n\n    var method = Element[bool ? 'addClassName' : 'removeClassName'];\n    return method(element, className);\n  }\n\n  var ATTRIBUTE_TRANSLATIONS = {};\n\n  var classProp = 'className', forProp = 'for';\n\n  DIV.setAttribute(classProp, 'x');\n  if (DIV.className !== 'x') {\n    DIV.setAttribute('class', 'x');\n    if (DIV.className === 'x')\n      classProp = 'class';\n  }\n\n  var LABEL = document.createElement('label');\n  LABEL.setAttribute(forProp, 'x');\n  if (LABEL.htmlFor !== 'x') {\n    LABEL.setAttribute('htmlFor', 'x');\n    if (LABEL.htmlFor === 'x')\n      forProp = 'htmlFor';\n  }\n  LABEL = null;\n\n  function _getAttr(element, attribute) {\n    return element.getAttribute(attribute);\n  }\n\n  function _getAttr2(element, attribute) {\n    return element.getAttribute(attribute, 2);\n  }\n\n  function _getAttrNode(element, attribute) {\n    var node = element.getAttributeNode(attribute);\n    return node ? node.value : '';\n  }\n\n  function _getFlag(element, attribute) {\n    return $(element).hasAttribute(attribute) ? attribute : null;\n  }\n\n  DIV.onclick = Prototype.emptyFunction;\n  var onclickValue = DIV.getAttribute('onclick');\n\n  var _getEv;\n\n  if (String(onclickValue).indexOf('{') > -1) {\n    _getEv = function(element, attribute) {\n      var value = element.getAttribute(attribute);\n      if (!value) return null;\n      value = value.toString();\n      value = value.split('{')[1];\n      value = value.split('}')[0];\n      return value.strip();\n    };\n  }\n  else if (onclickValue === '') {\n    _getEv = function(element, attribute) {\n      var value = element.getAttribute(attribute);\n      if (!value) return null;\n      return value.strip();\n    };\n  }\n\n  ATTRIBUTE_TRANSLATIONS.read = {\n    names: {\n      'class':     classProp,\n      'className': classProp,\n      'for':       forProp,\n      'htmlFor':   forProp\n    },\n\n    values: {\n      style: function(element) {\n        return element.style.cssText.toLowerCase();\n      },\n      title: function(element) {\n        return element.title;\n      }\n    }\n  };\n\n  ATTRIBUTE_TRANSLATIONS.write = {\n    names: {\n      className:   'class',\n      htmlFor:     'for',\n      cellpadding: 'cellPadding',\n      cellspacing: 'cellSpacing'\n    },\n\n    values: {\n      checked: function(element, value) {\n        element.checked = !!value;\n      },\n\n      style: function(element, value) {\n        element.style.cssText = value ? value : '';\n      }\n    }\n  };\n\n  ATTRIBUTE_TRANSLATIONS.has = { names: {} };\n\n  Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,\n   ATTRIBUTE_TRANSLATIONS.read.names);\n\n  var CAMEL_CASED_ATTRIBUTE_NAMES = $w('colSpan rowSpan vAlign dateTime ' +\n   'accessKey tabIndex encType maxLength readOnly longDesc frameBorder');\n\n  for (var i = 0, attr; attr = CAMEL_CASED_ATTRIBUTE_NAMES[i]; i++) {\n    ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()] = attr;\n    ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]   = attr;\n  }\n\n  Object.extend(ATTRIBUTE_TRANSLATIONS.read.values, {\n    href:        _getAttr2,\n    src:         _getAttr2,\n    type:        _getAttr,\n    action:      _getAttrNode,\n    disabled:    _getFlag,\n    checked:     _getFlag,\n    readonly:    _getFlag,\n    multiple:    _getFlag,\n    onload:      _getEv,\n    onunload:    _getEv,\n    onclick:     _getEv,\n    ondblclick:  _getEv,\n    onmousedown: _getEv,\n    onmouseup:   _getEv,\n    onmouseover: _getEv,\n    onmousemove: _getEv,\n    onmouseout:  _getEv,\n    onfocus:     _getEv,\n    onblur:      _getEv,\n    onkeypress:  _getEv,\n    onkeydown:   _getEv,\n    onkeyup:     _getEv,\n    onsubmit:    _getEv,\n    onreset:     _getEv,\n    onselect:    _getEv,\n    onchange:    _getEv\n  });\n\n\n  Object.extend(methods, {\n    identify:        identify,\n    readAttribute:   readAttribute,\n    writeAttribute:  writeAttribute,\n    classNames:      classNames,\n    hasClassName:    hasClassName,\n    addClassName:    addClassName,\n    removeClassName: removeClassName,\n    toggleClassName: toggleClassName\n  });\n\n\n  function normalizeStyleName(style) {\n    if (style === 'float' || style === 'styleFloat')\n      return 'cssFloat';\n    return style.camelize();\n  }\n\n  function normalizeStyleName_IE(style) {\n    if (style === 'float' || style === 'cssFloat')\n      return 'styleFloat';\n    return style.camelize();\n  }\n\n  function setStyle(element, styles) {\n    element = $(element);\n    var elementStyle = element.style, match;\n\n    if (Object.isString(styles)) {\n      elementStyle.cssText += ';' + styles;\n      if (styles.include('opacity')) {\n        var opacity = styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1];\n        Element.setOpacity(element, opacity);\n      }\n      return element;\n    }\n\n    for (var property in styles) {\n      if (property === 'opacity') {\n        Element.setOpacity(element, styles[property]);\n      } else {\n        var value = styles[property];\n        if (property === 'float' || property === 'cssFloat') {\n          property = Object.isUndefined(elementStyle.styleFloat) ?\n           'cssFloat' : 'styleFloat';\n        }\n        elementStyle[property] = value;\n      }\n    }\n\n    return element;\n  }\n\n\n  function getStyle(element, style) {\n    element = $(element);\n    style = normalizeStyleName(style);\n\n    var value = element.style[style];\n    if (!value || value === 'auto') {\n      var css = document.defaultView.getComputedStyle(element, null);\n      value = css ? css[style] : null;\n    }\n\n    if (style === 'opacity') return value ? parseFloat(value) : 1.0;\n    return value === 'auto' ? null : value;\n  }\n\n  function getStyle_Opera(element, style) {\n    switch (style) {\n      case 'height': case 'width':\n        if (!Element.visible(element)) return null;\n\n        var dim = parseInt(getStyle(element, style), 10);\n\n        if (dim !== element['offset' + style.capitalize()])\n          return dim + 'px';\n\n        return Element.measure(element, style);\n\n      default: return getStyle(element, style);\n    }\n  }\n\n  function getStyle_IE(element, style) {\n    element = $(element);\n    style = normalizeStyleName_IE(style);\n\n    var value = element.style[style];\n    if (!value && element.currentStyle) {\n      value = element.currentStyle[style];\n    }\n\n    if (style === 'opacity' && !STANDARD_CSS_OPACITY_SUPPORTED)\n      return getOpacity_IE(element);\n\n    if (value === 'auto') {\n      if ((style === 'width' || style === 'height') && Element.visible(element))\n        return Element.measure(element, style) + 'px';\n      return null;\n    }\n\n    return value;\n  }\n\n  function stripAlphaFromFilter_IE(filter) {\n    return (filter || '').replace(/alpha\\([^\\)]*\\)/gi, '');\n  }\n\n  function hasLayout_IE(element) {\n    if (!element.currentStyle || !element.currentStyle.hasLayout)\n      element.style.zoom = 1;\n    return element;\n  }\n\n  var STANDARD_CSS_OPACITY_SUPPORTED = (function() {\n    DIV.style.cssText = \"opacity:.55\";\n    return /^0.55/.test(DIV.style.opacity);\n  })();\n\n  function setOpacity(element, value) {\n    element = $(element);\n    if (value == 1 || value === '') value = '';\n    else if (value < 0.00001) value = 0;\n    element.style.opacity = value;\n    return element;\n  }\n\n  function setOpacity_IE(element, value) {\n    if (STANDARD_CSS_OPACITY_SUPPORTED)\n      return setOpacity(element, value);\n\n    element = hasLayout_IE($(element));\n    var filter = Element.getStyle(element, 'filter'),\n     style = element.style;\n\n    if (value == 1 || value === '') {\n      filter = stripAlphaFromFilter_IE(filter);\n      if (filter) style.filter = filter;\n      else style.removeAttribute('filter');\n      return element;\n    }\n\n    if (value < 0.00001) value = 0;\n\n    style.filter = stripAlphaFromFilter_IE(filter) +\n     'alpha(opacity=' + (value * 100) + ')';\n\n    return element;\n  }\n\n\n  function getOpacity(element) {\n    return Element.getStyle(element, 'opacity');\n  }\n\n  function getOpacity_IE(element) {\n    if (STANDARD_CSS_OPACITY_SUPPORTED)\n      return getOpacity(element);\n\n    var filter = Element.getStyle(element, 'filter');\n    if (filter.length === 0) return 1.0;\n    var match = (filter || '').match(/alpha\\(opacity=(.*)\\)/);\n    if (match && match[1]) return parseFloat(match[1]) / 100;\n    return 1.0;\n  }\n\n\n  Object.extend(methods, {\n    setStyle:   setStyle,\n    getStyle:   getStyle,\n    setOpacity: setOpacity,\n    getOpacity: getOpacity\n  });\n\n  if ('styleFloat' in DIV.style) {\n    methods.getStyle = getStyle_IE;\n    methods.setOpacity = setOpacity_IE;\n    methods.getOpacity = getOpacity_IE;\n  }\n\n  var UID = 0;\n\n  GLOBAL.Element.Storage = { UID: 1 };\n\n  function getUniqueElementID(element) {\n    if (element === window) return 0;\n\n    if (typeof element._prototypeUID === 'undefined')\n      element._prototypeUID = Element.Storage.UID++;\n    return element._prototypeUID;\n  }\n\n  function getUniqueElementID_IE(element) {\n    if (element === window) return 0;\n    if (element == document) return 1;\n    return element.uniqueID;\n  }\n\n  var HAS_UNIQUE_ID_PROPERTY = ('uniqueID' in DIV);\n  if (HAS_UNIQUE_ID_PROPERTY)\n    getUniqueElementID = getUniqueElementID_IE;\n\n  function getStorage(element) {\n    if (!(element = $(element))) return;\n\n    var uid = getUniqueElementID(element);\n\n    if (!Element.Storage[uid])\n      Element.Storage[uid] = $H();\n\n    return Element.Storage[uid];\n  }\n\n  function store(element, key, value) {\n    if (!(element = $(element))) return;\n    var storage = getStorage(element);\n    if (arguments.length === 2) {\n      storage.update(key);\n    } else {\n      storage.set(key, value);\n    }\n    return element;\n  }\n\n  function retrieve(element, key, defaultValue) {\n    if (!(element = $(element))) return;\n    var storage = getStorage(element), value = storage.get(key);\n\n    if (Object.isUndefined(value)) {\n      storage.set(key, defaultValue);\n      value = defaultValue;\n    }\n\n    return value;\n  }\n\n\n  Object.extend(methods, {\n    getStorage: getStorage,\n    store:      store,\n    retrieve:   retrieve\n  });\n\n\n  var Methods = {}, ByTag = Element.Methods.ByTag,\n   F = Prototype.BrowserFeatures;\n\n  if (!F.ElementExtensions && ('__proto__' in DIV)) {\n    GLOBAL.HTMLElement = {};\n    GLOBAL.HTMLElement.prototype = DIV['__proto__'];\n    F.ElementExtensions = true;\n  }\n\n  function checkElementPrototypeDeficiency(tagName) {\n    if (typeof window.Element === 'undefined') return false;\n    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) return false;\n    var proto = window.Element.prototype;\n    if (proto) {\n      var id = '_' + (Math.random() + '').slice(2),\n       el = document.createElement(tagName);\n      proto[id] = 'x';\n      var isBuggy = (el[id] !== 'x');\n      delete proto[id];\n      el = null;\n      return isBuggy;\n    }\n\n    return false;\n  }\n\n  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =\n   checkElementPrototypeDeficiency('object');\n\n  function extendElementWith(element, methods) {\n    for (var property in methods) {\n      var value = methods[property];\n      if (Object.isFunction(value) && !(property in element))\n        element[property] = value.methodize();\n    }\n  }\n\n  var EXTENDED = {};\n  function elementIsExtended(element) {\n    var uid = getUniqueElementID(element);\n    return (uid in EXTENDED);\n  }\n\n  function extend(element) {\n    if (!element || elementIsExtended(element)) return element;\n    if (element.nodeType !== Node.ELEMENT_NODE || element == window)\n      return element;\n\n    var methods = Object.clone(Methods),\n     tagName = element.tagName.toUpperCase();\n\n    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);\n\n    extendElementWith(element, methods);\n    EXTENDED[getUniqueElementID(element)] = true;\n    return element;\n  }\n\n  function extend_IE8(element) {\n    if (!element || elementIsExtended(element)) return element;\n\n    var t = element.tagName;\n    if (t && (/^(?:object|applet|embed)$/i.test(t))) {\n      extendElementWith(element, Element.Methods);\n      extendElementWith(element, Element.Methods.Simulated);\n      extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);\n    }\n\n    return element;\n  }\n\n  if (F.SpecificElementExtensions) {\n    extend = HTMLOBJECTELEMENT_PROTOTYPE_BUGGY ? extend_IE8 : Prototype.K;\n  }\n\n  function addMethodsToTagName(tagName, methods) {\n    tagName = tagName.toUpperCase();\n    if (!ByTag[tagName]) ByTag[tagName] = {};\n    Object.extend(ByTag[tagName], methods);\n  }\n\n  function mergeMethods(destination, methods, onlyIfAbsent) {\n    if (Object.isUndefined(onlyIfAbsent)) onlyIfAbsent = false;\n    for (var property in methods) {\n      var value = methods[property];\n      if (!Object.isFunction(value)) continue;\n      if (!onlyIfAbsent || !(property in destination))\n        destination[property] = value.methodize();\n    }\n  }\n\n  function findDOMClass(tagName) {\n    var klass;\n    var trans = {\n      \"OPTGROUP\": \"OptGroup\", \"TEXTAREA\": \"TextArea\", \"P\": \"Paragraph\",\n      \"FIELDSET\": \"FieldSet\", \"UL\": \"UList\", \"OL\": \"OList\", \"DL\": \"DList\",\n      \"DIR\": \"Directory\", \"H1\": \"Heading\", \"H2\": \"Heading\", \"H3\": \"Heading\",\n      \"H4\": \"Heading\", \"H5\": \"Heading\", \"H6\": \"Heading\", \"Q\": \"Quote\",\n      \"INS\": \"Mod\", \"DEL\": \"Mod\", \"A\": \"Anchor\", \"IMG\": \"Image\", \"CAPTION\":\n      \"TableCaption\", \"COL\": \"TableCol\", \"COLGROUP\": \"TableCol\", \"THEAD\":\n      \"TableSection\", \"TFOOT\": \"TableSection\", \"TBODY\": \"TableSection\", \"TR\":\n      \"TableRow\", \"TH\": \"TableCell\", \"TD\": \"TableCell\", \"FRAMESET\":\n      \"FrameSet\", \"IFRAME\": \"IFrame\"\n    };\n    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName + 'Element';\n    if (window[klass]) return window[klass];\n    klass = 'HTML' + tagName.capitalize() + 'Element';\n    if (window[klass]) return window[klass];\n\n    var element = document.createElement(tagName),\n     proto = element['__proto__'] || element.constructor.prototype;\n\n    element = null;\n    return proto;\n  }\n\n  function addMethods(methods) {\n    if (arguments.length === 0) addFormMethods();\n\n    if (arguments.length === 2) {\n      var tagName = methods;\n      methods = arguments[1];\n    }\n\n    if (!tagName) {\n      Object.extend(Element.Methods, methods || {});\n    } else {\n      if (Object.isArray(tagName)) {\n        for (var i = 0, tag; tag = tagName[i]; i++)\n          addMethodsToTagName(tag, methods);\n      } else {\n        addMethodsToTagName(tagName, methods);\n      }\n    }\n\n    var ELEMENT_PROTOTYPE = window.HTMLElement ? HTMLElement.prototype :\n     Element.prototype;\n\n    if (F.ElementExtensions) {\n      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods);\n      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods.Simulated, true);\n    }\n\n    if (F.SpecificElementExtensions) {\n      for (var tag in Element.Methods.ByTag) {\n        var klass = findDOMClass(tag);\n        if (Object.isUndefined(klass)) continue;\n        mergeMethods(klass.prototype, ByTag[tag]);\n      }\n    }\n\n    Object.extend(Element, Element.Methods);\n    Object.extend(Element, Element.Methods.Simulated);\n    delete Element.ByTag;\n    delete Element.Simulated;\n\n    Element.extend.refresh();\n\n    ELEMENT_CACHE = {};\n  }\n\n  Object.extend(GLOBAL.Element, {\n    extend:     extend,\n    addMethods: addMethods\n  });\n\n  if (extend === Prototype.K) {\n    GLOBAL.Element.extend.refresh = Prototype.emptyFunction;\n  } else {\n    GLOBAL.Element.extend.refresh = function() {\n      if (Prototype.BrowserFeatures.ElementExtensions) return;\n      Object.extend(Methods, Element.Methods);\n      Object.extend(Methods, Element.Methods.Simulated);\n\n      EXTENDED = {};\n    };\n  }\n\n  function addFormMethods() {\n    Object.extend(Form, Form.Methods);\n    Object.extend(Form.Element, Form.Element.Methods);\n    Object.extend(Element.Methods.ByTag, {\n      \"FORM\":     Object.clone(Form.Methods),\n      \"INPUT\":    Object.clone(Form.Element.Methods),\n      \"SELECT\":   Object.clone(Form.Element.Methods),\n      \"TEXTAREA\": Object.clone(Form.Element.Methods),\n      \"BUTTON\":   Object.clone(Form.Element.Methods)\n    });\n  }\n\n  Element.addMethods(methods);\n\n  function destroyCache_IE() {\n    DIV = null;\n    ELEMENT_CACHE = null;\n  }\n\n  if (window.attachEvent)\n    window.attachEvent('onunload', destroyCache_IE);\n\n})(this);\n(function() {\n\n  function toDecimal(pctString) {\n    var match = pctString.match(/^(\\d+)%?$/i);\n    if (!match) return null;\n    return (Number(match[1]) / 100);\n  }\n\n  function getRawStyle(element, style) {\n    element = $(element);\n\n    var value = element.style[style];\n    if (!value || value === 'auto') {\n      var css = document.defaultView.getComputedStyle(element, null);\n      value = css ? css[style] : null;\n    }\n\n    if (style === 'opacity') return value ? parseFloat(value) : 1.0;\n    return value === 'auto' ? null : value;\n  }\n\n  function getRawStyle_IE(element, style) {\n    var value = element.style[style];\n    if (!value && element.currentStyle) {\n      value = element.currentStyle[style];\n    }\n    return value;\n  }\n\n  function getContentWidth(element, context) {\n    var boxWidth = element.offsetWidth;\n\n    var bl = getPixelValue(element, 'borderLeftWidth',  context) || 0;\n    var br = getPixelValue(element, 'borderRightWidth', context) || 0;\n    var pl = getPixelValue(element, 'paddingLeft',      context) || 0;\n    var pr = getPixelValue(element, 'paddingRight',     context) || 0;\n\n    return boxWidth - bl - br - pl - pr;\n  }\n\n  if ('currentStyle' in document.documentElement) {\n    getRawStyle = getRawStyle_IE;\n  }\n\n\n  function getPixelValue(value, property, context) {\n    var element = null;\n    if (Object.isElement(value)) {\n      element = value;\n      value = getRawStyle(element, property);\n    }\n\n    if (value === null || Object.isUndefined(value)) {\n      return null;\n    }\n\n    if ((/^(?:-)?\\d+(\\.\\d+)?(px)?$/i).test(value)) {\n      return window.parseFloat(value);\n    }\n\n    var isPercentage = value.include('%'), isViewport = (context === document.viewport);\n\n    if (/\\d/.test(value) && element && element.runtimeStyle && !(isPercentage && isViewport)) {\n      var style = element.style.left, rStyle = element.runtimeStyle.left;\n      element.runtimeStyle.left = element.currentStyle.left;\n      element.style.left = value || 0;\n      value = element.style.pixelLeft;\n      element.style.left = style;\n      element.runtimeStyle.left = rStyle;\n\n      return value;\n    }\n\n    if (element && isPercentage) {\n      context = context || element.parentNode;\n      var decimal = toDecimal(value), whole = null;\n\n      var isHorizontal = property.include('left') || property.include('right') ||\n       property.include('width');\n\n      var isVertical   = property.include('top') || property.include('bottom') ||\n        property.include('height');\n\n      if (context === document.viewport) {\n        if (isHorizontal) {\n          whole = document.viewport.getWidth();\n        } else if (isVertical) {\n          whole = document.viewport.getHeight();\n        }\n      } else {\n        if (isHorizontal) {\n          whole = $(context).measure('width');\n        } else if (isVertical) {\n          whole = $(context).measure('height');\n        }\n      }\n\n      return (whole === null) ? 0 : whole * decimal;\n    }\n\n    return 0;\n  }\n\n  function toCSSPixels(number) {\n    if (Object.isString(number) && number.endsWith('px'))\n      return number;\n    return number + 'px';\n  }\n\n  function isDisplayed(element) {\n    while (element && element.parentNode) {\n      var display = element.getStyle('display');\n      if (display === 'none') {\n        return false;\n      }\n      element = $(element.parentNode);\n    }\n    return true;\n  }\n\n  var hasLayout = Prototype.K;\n  if ('currentStyle' in document.documentElement) {\n    hasLayout = function(element) {\n      if (!element.currentStyle.hasLayout) {\n        element.style.zoom = 1;\n      }\n      return element;\n    };\n  }\n\n  function cssNameFor(key) {\n    if (key.include('border')) key = key + '-width';\n    return key.camelize();\n  }\n\n  Element.Layout = Class.create(Hash, {\n    initialize: function($super, element, preCompute) {\n      $super();\n      this.element = $(element);\n\n      Element.Layout.PROPERTIES.each( function(property) {\n        this._set(property, null);\n      }, this);\n\n      if (preCompute) {\n        this._preComputing = true;\n        this._begin();\n        Element.Layout.PROPERTIES.each( this._compute, this );\n        this._end();\n        this._preComputing = false;\n      }\n    },\n\n    _set: function(property, value) {\n      return Hash.prototype.set.call(this, property, value);\n    },\n\n    set: function(property, value) {\n      throw \"Properties of Element.Layout are read-only.\";\n    },\n\n    get: function($super, property) {\n      var value = $super(property);\n      return value === null ? this._compute(property) : value;\n    },\n\n    _begin: function() {\n      if (this._isPrepared()) return;\n\n      var element = this.element;\n      if (isDisplayed(element)) {\n        this._setPrepared(true);\n        return;\n      }\n\n\n      var originalStyles = {\n        position:   element.style.position   || '',\n        width:      element.style.width      || '',\n        visibility: element.style.visibility || '',\n        display:    element.style.display    || ''\n      };\n\n      element.store('prototype_original_styles', originalStyles);\n\n      var position = getRawStyle(element, 'position'), width = element.offsetWidth;\n\n      if (width === 0 || width === null) {\n        element.style.display = 'block';\n        width = element.offsetWidth;\n      }\n\n      var context = (position === 'fixed') ? document.viewport :\n       element.parentNode;\n\n      var tempStyles = {\n        visibility: 'hidden',\n        display:    'block'\n      };\n\n      if (position !== 'fixed') tempStyles.position = 'absolute';\n\n      element.setStyle(tempStyles);\n\n      var positionedWidth = element.offsetWidth, newWidth;\n      if (width && (positionedWidth === width)) {\n        newWidth = getContentWidth(element, context);\n      } else if (position === 'absolute' || position === 'fixed') {\n        newWidth = getContentWidth(element, context);\n      } else {\n        var parent = element.parentNode, pLayout = $(parent).getLayout();\n\n        newWidth = pLayout.get('width') -\n         this.get('margin-left') -\n         this.get('border-left') -\n         this.get('padding-left') -\n         this.get('padding-right') -\n         this.get('border-right') -\n         this.get('margin-right');\n      }\n\n      element.setStyle({ width: newWidth + 'px' });\n\n      this._setPrepared(true);\n    },\n\n    _end: function() {\n      var element = this.element;\n      var originalStyles = element.retrieve('prototype_original_styles');\n      element.store('prototype_original_styles', null);\n      element.setStyle(originalStyles);\n      this._setPrepared(false);\n    },\n\n    _compute: function(property) {\n      var COMPUTATIONS = Element.Layout.COMPUTATIONS;\n      if (!(property in COMPUTATIONS)) {\n        throw \"Property not found.\";\n      }\n\n      return this._set(property, COMPUTATIONS[property].call(this, this.element));\n    },\n\n    _isPrepared: function() {\n      return this.element.retrieve('prototype_element_layout_prepared', false);\n    },\n\n    _setPrepared: function(bool) {\n      return this.element.store('prototype_element_layout_prepared', bool);\n    },\n\n    toObject: function() {\n      var args = $A(arguments);\n      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :\n       args.join(' ').split(' ');\n      var obj = {};\n      keys.each( function(key) {\n        if (!Element.Layout.PROPERTIES.include(key)) return;\n        var value = this.get(key);\n        if (value != null) obj[key] = value;\n      }, this);\n      return obj;\n    },\n\n    toHash: function() {\n      var obj = this.toObject.apply(this, arguments);\n      return new Hash(obj);\n    },\n\n    toCSS: function() {\n      var args = $A(arguments);\n      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :\n       args.join(' ').split(' ');\n      var css = {};\n\n      keys.each( function(key) {\n        if (!Element.Layout.PROPERTIES.include(key)) return;\n        if (Element.Layout.COMPOSITE_PROPERTIES.include(key)) return;\n\n        var value = this.get(key);\n        if (value != null) css[cssNameFor(key)] = value + 'px';\n      }, this);\n      return css;\n    },\n\n    inspect: function() {\n      return \"#<Element.Layout>\";\n    }\n  });\n\n  Object.extend(Element.Layout, {\n    PROPERTIES: $w('height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height'),\n\n    COMPOSITE_PROPERTIES: $w('padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height'),\n\n    COMPUTATIONS: {\n      'height': function(element) {\n        if (!this._preComputing) this._begin();\n\n        var bHeight = this.get('border-box-height');\n        if (bHeight <= 0) {\n          if (!this._preComputing) this._end();\n          return 0;\n        }\n\n        var bTop = this.get('border-top'),\n         bBottom = this.get('border-bottom');\n\n        var pTop = this.get('padding-top'),\n         pBottom = this.get('padding-bottom');\n\n        if (!this._preComputing) this._end();\n\n        return bHeight - bTop - bBottom - pTop - pBottom;\n      },\n\n      'width': function(element) {\n        if (!this._preComputing) this._begin();\n\n        var bWidth = this.get('border-box-width');\n        if (bWidth <= 0) {\n          if (!this._preComputing) this._end();\n          return 0;\n        }\n\n        var bLeft = this.get('border-left'),\n         bRight = this.get('border-right');\n\n        var pLeft = this.get('padding-left'),\n         pRight = this.get('padding-right');\n\n        if (!this._preComputing) this._end();\n        return bWidth - bLeft - bRight - pLeft - pRight;\n      },\n\n      'padding-box-height': function(element) {\n        var height = this.get('height'),\n         pTop = this.get('padding-top'),\n         pBottom = this.get('padding-bottom');\n\n        return height + pTop + pBottom;\n      },\n\n      'padding-box-width': function(element) {\n        var width = this.get('width'),\n         pLeft = this.get('padding-left'),\n         pRight = this.get('padding-right');\n\n        return width + pLeft + pRight;\n      },\n\n      'border-box-height': function(element) {\n        if (!this._preComputing) this._begin();\n        var height = element.offsetHeight;\n        if (!this._preComputing) this._end();\n        return height;\n      },\n\n      'border-box-width': function(element) {\n        if (!this._preComputing) this._begin();\n        var width = element.offsetWidth;\n        if (!this._preComputing) this._end();\n        return width;\n      },\n\n      'margin-box-height': function(element) {\n        var bHeight = this.get('border-box-height'),\n         mTop = this.get('margin-top'),\n         mBottom = this.get('margin-bottom');\n\n        if (bHeight <= 0) return 0;\n\n        return bHeight + mTop + mBottom;\n      },\n\n      'margin-box-width': function(element) {\n        var bWidth = this.get('border-box-width'),\n         mLeft = this.get('margin-left'),\n         mRight = this.get('margin-right');\n\n        if (bWidth <= 0) return 0;\n\n        return bWidth + mLeft + mRight;\n      },\n\n      'top': function(element) {\n        var offset = element.positionedOffset();\n        return offset.top;\n      },\n\n      'bottom': function(element) {\n        var offset = element.positionedOffset(),\n         parent = element.getOffsetParent(),\n         pHeight = parent.measure('height');\n\n        var mHeight = this.get('border-box-height');\n\n        return pHeight - mHeight - offset.top;\n      },\n\n      'left': function(element) {\n        var offset = element.positionedOffset();\n        return offset.left;\n      },\n\n      'right': function(element) {\n        var offset = element.positionedOffset(),\n         parent = element.getOffsetParent(),\n         pWidth = parent.measure('width');\n\n        var mWidth = this.get('border-box-width');\n\n        return pWidth - mWidth - offset.left;\n      },\n\n      'padding-top': function(element) {\n        return getPixelValue(element, 'paddingTop');\n      },\n\n      'padding-bottom': function(element) {\n        return getPixelValue(element, 'paddingBottom');\n      },\n\n      'padding-left': function(element) {\n        return getPixelValue(element, 'paddingLeft');\n      },\n\n      'padding-right': function(element) {\n        return getPixelValue(element, 'paddingRight');\n      },\n\n      'border-top': function(element) {\n        return getPixelValue(element, 'borderTopWidth');\n      },\n\n      'border-bottom': function(element) {\n        return getPixelValue(element, 'borderBottomWidth');\n      },\n\n      'border-left': function(element) {\n        return getPixelValue(element, 'borderLeftWidth');\n      },\n\n      'border-right': function(element) {\n        return getPixelValue(element, 'borderRightWidth');\n      },\n\n      'margin-top': function(element) {\n        return getPixelValue(element, 'marginTop');\n      },\n\n      'margin-bottom': function(element) {\n        return getPixelValue(element, 'marginBottom');\n      },\n\n      'margin-left': function(element) {\n        return getPixelValue(element, 'marginLeft');\n      },\n\n      'margin-right': function(element) {\n        return getPixelValue(element, 'marginRight');\n      }\n    }\n  });\n\n  if ('getBoundingClientRect' in document.documentElement) {\n    Object.extend(Element.Layout.COMPUTATIONS, {\n      'right': function(element) {\n        var parent = hasLayout(element.getOffsetParent());\n        var rect = element.getBoundingClientRect(),\n         pRect = parent.getBoundingClientRect();\n\n        return (pRect.right - rect.right).round();\n      },\n\n      'bottom': function(element) {\n        var parent = hasLayout(element.getOffsetParent());\n        var rect = element.getBoundingClientRect(),\n         pRect = parent.getBoundingClientRect();\n\n        return (pRect.bottom - rect.bottom).round();\n      }\n    });\n  }\n\n  Element.Offset = Class.create({\n    initialize: function(left, top) {\n      this.left = left.round();\n      this.top  = top.round();\n\n      this[0] = this.left;\n      this[1] = this.top;\n    },\n\n    relativeTo: function(offset) {\n      return new Element.Offset(\n        this.left - offset.left,\n        this.top  - offset.top\n      );\n    },\n\n    inspect: function() {\n      return \"#<Element.Offset left: #{left} top: #{top}>\".interpolate(this);\n    },\n\n    toString: function() {\n      return \"[#{left}, #{top}]\".interpolate(this);\n    },\n\n    toArray: function() {\n      return [this.left, this.top];\n    }\n  });\n\n  function getLayout(element, preCompute) {\n    return new Element.Layout(element, preCompute);\n  }\n\n  function measure(element, property) {\n    return $(element).getLayout().get(property);\n  }\n\n  function getHeight(element) {\n    return Element.getDimensions(element).height;\n  }\n\n  function getWidth(element) {\n    return Element.getDimensions(element).width;\n  }\n\n  function getDimensions(element) {\n    element = $(element);\n    var display = Element.getStyle(element, 'display');\n\n    if (display && display !== 'none') {\n      return { width: element.offsetWidth, height: element.offsetHeight };\n    }\n\n    var style = element.style;\n    var originalStyles = {\n      visibility: style.visibility,\n      position:   style.position,\n      display:    style.display\n    };\n\n    var newStyles = {\n      visibility: 'hidden',\n      display:    'block'\n    };\n\n    if (originalStyles.position !== 'fixed')\n      newStyles.position = 'absolute';\n\n    Element.setStyle(element, newStyles);\n\n    var dimensions = {\n      width:  element.offsetWidth,\n      height: element.offsetHeight\n    };\n\n    Element.setStyle(element, originalStyles);\n\n    return dimensions;\n  }\n\n  function getOffsetParent(element) {\n    element = $(element);\n\n    if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))\n      return $(document.body);\n\n    var isInline = (Element.getStyle(element, 'display') === 'inline');\n    if (!isInline && element.offsetParent) return $(element.offsetParent);\n\n    while ((element = element.parentNode) && element !== document.body) {\n      if (Element.getStyle(element, 'position') !== 'static') {\n        return isHtml(element) ? $(document.body) : $(element);\n      }\n    }\n\n    return $(document.body);\n  }\n\n\n  function cumulativeOffset(element) {\n    element = $(element);\n    var valueT = 0, valueL = 0;\n    if (element.parentNode) {\n      do {\n        valueT += element.offsetTop  || 0;\n        valueL += element.offsetLeft || 0;\n        element = element.offsetParent;\n      } while (element);\n    }\n    return new Element.Offset(valueL, valueT);\n  }\n\n  function positionedOffset(element) {\n    element = $(element);\n\n    var layout = element.getLayout();\n\n    var valueT = 0, valueL = 0;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      element = element.offsetParent;\n      if (element) {\n        if (isBody(element)) break;\n        var p = Element.getStyle(element, 'position');\n        if (p !== 'static') break;\n      }\n    } while (element);\n\n    valueL -= layout.get('margin-top');\n    valueT -= layout.get('margin-left');\n\n    return new Element.Offset(valueL, valueT);\n  }\n\n  function cumulativeScrollOffset(element) {\n    var valueT = 0, valueL = 0;\n    do {\n      if (element === document.body) {\n        var bodyScrollNode = document.documentElement || document.body.parentNode || document.body;\n        valueT += !Object.isUndefined(window.pageYOffset) ? window.pageYOffset : bodyScrollNode.scrollTop || 0;\n        valueL += !Object.isUndefined(window.pageXOffset) ? window.pageXOffset : bodyScrollNode.scrollLeft || 0;\n        break;\n      } else {\n        valueT += element.scrollTop  || 0;\n        valueL += element.scrollLeft || 0;\n        element = element.parentNode;\n      }\n    } while (element);\n    return new Element.Offset(valueL, valueT);\n  }\n\n  function viewportOffset(forElement) {\n    var valueT = 0, valueL = 0, docBody = document.body;\n\n    forElement = $(forElement);\n    var element = forElement;\n    do {\n      valueT += element.offsetTop  || 0;\n      valueL += element.offsetLeft || 0;\n      if (element.offsetParent == docBody &&\n        Element.getStyle(element, 'position') == 'absolute') break;\n    } while (element = element.offsetParent);\n\n    element = forElement;\n    do {\n      if (element != docBody) {\n        valueT -= element.scrollTop  || 0;\n        valueL -= element.scrollLeft || 0;\n      }\n    } while (element = element.parentNode);\n    return new Element.Offset(valueL, valueT);\n  }\n\n  function absolutize(element) {\n    element = $(element);\n\n    if (Element.getStyle(element, 'position') === 'absolute') {\n      return element;\n    }\n\n    var offsetParent = getOffsetParent(element);\n    var eOffset = element.viewportOffset(),\n     pOffset = offsetParent.viewportOffset();\n\n    var offset = eOffset.relativeTo(pOffset);\n    var layout = element.getLayout();\n\n    element.store('prototype_absolutize_original_styles', {\n      position: element.getStyle('position'),\n      left:     element.getStyle('left'),\n      top:      element.getStyle('top'),\n      width:    element.getStyle('width'),\n      height:   element.getStyle('height')\n    });\n\n    element.setStyle({\n      position: 'absolute',\n      top:    offset.top + 'px',\n      left:   offset.left + 'px',\n      width:  layout.get('width') + 'px',\n      height: layout.get('height') + 'px'\n    });\n\n    return element;\n  }\n\n  function relativize(element) {\n    element = $(element);\n    if (Element.getStyle(element, 'position') === 'relative') {\n      return element;\n    }\n\n    var originalStyles =\n     element.retrieve('prototype_absolutize_original_styles');\n\n    if (originalStyles) element.setStyle(originalStyles);\n    return element;\n  }\n\n\n  function scrollTo(element) {\n    element = $(element);\n    var pos = Element.cumulativeOffset(element);\n    window.scrollTo(pos.left, pos.top);\n    return element;\n  }\n\n\n  function makePositioned(element) {\n    element = $(element);\n    var position = Element.getStyle(element, 'position'), styles = {};\n    if (position === 'static' || !position) {\n      styles.position = 'relative';\n      if (Prototype.Browser.Opera) {\n        styles.top  = 0;\n        styles.left = 0;\n      }\n      Element.setStyle(element, styles);\n      Element.store(element, 'prototype_made_positioned', true);\n    }\n    return element;\n  }\n\n  function undoPositioned(element) {\n    element = $(element);\n    var storage = Element.getStorage(element),\n     madePositioned = storage.get('prototype_made_positioned');\n\n    if (madePositioned) {\n      storage.unset('prototype_made_positioned');\n      Element.setStyle(element, {\n        position: '',\n        top:      '',\n        bottom:   '',\n        left:     '',\n        right:    ''\n      });\n    }\n    return element;\n  }\n\n  function makeClipping(element) {\n    element = $(element);\n\n    var storage = Element.getStorage(element),\n     madeClipping = storage.get('prototype_made_clipping');\n\n    if (Object.isUndefined(madeClipping)) {\n      var overflow = Element.getStyle(element, 'overflow');\n      storage.set('prototype_made_clipping', overflow);\n      if (overflow !== 'hidden')\n        element.style.overflow = 'hidden';\n    }\n\n    return element;\n  }\n\n  function undoClipping(element) {\n    element = $(element);\n    var storage = Element.getStorage(element),\n     overflow = storage.get('prototype_made_clipping');\n\n    if (!Object.isUndefined(overflow)) {\n      storage.unset('prototype_made_clipping');\n      element.style.overflow = overflow || '';\n    }\n\n    return element;\n  }\n\n  function clonePosition(element, source, options) {\n    options = Object.extend({\n      setLeft:    true,\n      setTop:     true,\n      setWidth:   true,\n      setHeight:  true,\n      offsetTop:  0,\n      offsetLeft: 0\n    }, options || {});\n\n    source  = $(source);\n    element = $(element);\n    var p, delta, layout, styles = {};\n\n    if (options.setLeft || options.setTop) {\n      p = Element.viewportOffset(source);\n      delta = [0, 0];\n      if (Element.getStyle(element, 'position') === 'absolute') {\n        var parent = Element.getOffsetParent(element);\n        if (parent !== document.body) delta = Element.viewportOffset(parent);\n      }\n    }\n\n    if (options.setWidth || options.setHeight) {\n      layout = Element.getLayout(source);\n    }\n\n    if (options.setLeft)\n      styles.left = (p[0] - delta[0] + options.offsetLeft) + 'px';\n    if (options.setTop)\n      styles.top  = (p[1] - delta[1] + options.offsetTop)  + 'px';\n\n    if (options.setWidth)\n      styles.width  = layout.get('border-box-width')  + 'px';\n    if (options.setHeight)\n      styles.height = layout.get('border-box-height') + 'px';\n\n    return Element.setStyle(element, styles);\n  }\n\n\n  if (Prototype.Browser.IE) {\n    getOffsetParent = getOffsetParent.wrap(\n      function(proceed, element) {\n        element = $(element);\n\n        if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))\n          return $(document.body);\n\n        var position = element.getStyle('position');\n        if (position !== 'static') return proceed(element);\n\n        element.setStyle({ position: 'relative' });\n        var value = proceed(element);\n        element.setStyle({ position: position });\n        return value;\n      }\n    );\n\n    positionedOffset = positionedOffset.wrap(function(proceed, element) {\n      element = $(element);\n      if (!element.parentNode) return new Element.Offset(0, 0);\n      var position = element.getStyle('position');\n      if (position !== 'static') return proceed(element);\n\n      var offsetParent = element.getOffsetParent();\n      if (offsetParent && offsetParent.getStyle('position') === 'fixed')\n        hasLayout(offsetParent);\n\n      element.setStyle({ position: 'relative' });\n      var value = proceed(element);\n      element.setStyle({ position: position });\n      return value;\n    });\n  } else if (Prototype.Browser.Webkit) {\n    cumulativeOffset = function(element) {\n      element = $(element);\n      var valueT = 0, valueL = 0;\n      do {\n        valueT += element.offsetTop  || 0;\n        valueL += element.offsetLeft || 0;\n        if (element.offsetParent == document.body) {\n          if (Element.getStyle(element, 'position') == 'absolute') break;\n        }\n\n        element = element.offsetParent;\n      } while (element);\n\n      return new Element.Offset(valueL, valueT);\n    };\n  }\n\n\n  Element.addMethods({\n    getLayout:              getLayout,\n    measure:                measure,\n    getWidth:               getWidth,\n    getHeight:              getHeight,\n    getDimensions:          getDimensions,\n    getOffsetParent:        getOffsetParent,\n    cumulativeOffset:       cumulativeOffset,\n    positionedOffset:       positionedOffset,\n    cumulativeScrollOffset: cumulativeScrollOffset,\n    viewportOffset:         viewportOffset,\n    absolutize:             absolutize,\n    relativize:             relativize,\n    scrollTo:               scrollTo,\n    makePositioned:         makePositioned,\n    undoPositioned:         undoPositioned,\n    makeClipping:           makeClipping,\n    undoClipping:           undoClipping,\n    clonePosition:          clonePosition\n  });\n\n  function isBody(element) {\n    return element.nodeName.toUpperCase() === 'BODY';\n  }\n\n  function isHtml(element) {\n    return element.nodeName.toUpperCase() === 'HTML';\n  }\n\n  function isDocument(element) {\n    return element.nodeType === Node.DOCUMENT_NODE;\n  }\n\n  function isDetached(element) {\n    return element !== document.body &&\n     !Element.descendantOf(element, document.body);\n  }\n\n  if ('getBoundingClientRect' in document.documentElement) {\n    Element.addMethods({\n      viewportOffset: function(element) {\n        element = $(element);\n        if (isDetached(element)) return new Element.Offset(0, 0);\n\n        var rect = element.getBoundingClientRect(),\n         docEl = document.documentElement;\n        return new Element.Offset(rect.left - docEl.clientLeft,\n         rect.top - docEl.clientTop);\n      }\n    });\n  }\n\n\n})();\n\n(function() {\n\n  var IS_OLD_OPERA = Prototype.Browser.Opera &&\n   (window.parseFloat(window.opera.version()) < 9.5);\n  var ROOT = null;\n  function getRootElement() {\n    if (ROOT) return ROOT;\n    ROOT = IS_OLD_OPERA ? document.body : document.documentElement;\n    return ROOT;\n  }\n\n  function getDimensions() {\n    return { width: this.getWidth(), height: this.getHeight() };\n  }\n\n  function getWidth() {\n    return getRootElement().clientWidth;\n  }\n\n  function getHeight() {\n    return getRootElement().clientHeight;\n  }\n\n  function getScrollOffsets() {\n    var x = window.pageXOffset || document.documentElement.scrollLeft ||\n     document.body.scrollLeft;\n    var y = window.pageYOffset || document.documentElement.scrollTop ||\n     document.body.scrollTop;\n\n    return new Element.Offset(x, y);\n  }\n\n  document.viewport = {\n    getDimensions:    getDimensions,\n    getWidth:         getWidth,\n    getHeight:        getHeight,\n    getScrollOffsets: getScrollOffsets\n  };\n\n})();\nwindow.$$ = function() {\n  var expression = $A(arguments).join(', ');\n  return Prototype.Selector.select(expression, document);\n};\n\nPrototype.Selector = (function() {\n\n  function select() {\n    throw new Error('Method \"Prototype.Selector.select\" must be defined.');\n  }\n\n  function match() {\n    throw new Error('Method \"Prototype.Selector.match\" must be defined.');\n  }\n\n  function find(elements, expression, index) {\n    index = index || 0;\n    var match = Prototype.Selector.match, length = elements.length, matchIndex = 0, i;\n\n    for (i = 0; i < length; i++) {\n      if (match(elements[i], expression) && index == matchIndex++) {\n        return Element.extend(elements[i]);\n      }\n    }\n  }\n\n  function extendElements(elements) {\n    for (var i = 0, length = elements.length; i < length; i++) {\n      Element.extend(elements[i]);\n    }\n    return elements;\n  }\n\n\n  var K = Prototype.K;\n\n  return {\n    select: select,\n    match: match,\n    find: find,\n    extendElements: (Element.extend === K) ? K : extendElements,\n    extendElement: Element.extend\n  };\n})();\nPrototype._original_property = window.Sizzle;\n/*!\n * Sizzle CSS Selector Engine v@VERSION\n * http://sizzlejs.com/\n *\n * Copyright 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: @DATE\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\texpando = \"sizzle\" + -(new Date()),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\tstrundefined = typeof undefined,\n\tMAX_NEGATIVE = 1 << 31,\n\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\tindexOf = arr.indexOf || function( elem ) {\n\t\tvar i = 0,\n\t\t\tlen = this.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( this[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\n\t\t\"*(?:([*^$|!~]?=)\" + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\n\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",\n\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\trescape = /'|\\\\/g,\n\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t};\n\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\n\tif ( !selector || typeof selector !== \"string\" ) {\n\t\treturn results;\n\t}\n\n\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {\n\t\treturn [];\n\t}\n\n\tif ( documentIsHTML && !seed ) {\n\n\t\tif ( (match = rquickExpr.exec( selector )) ) {\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\treturn results;\n\n\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\t\t\tnid = old = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType === 9 && selector;\n\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn !!fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tif ( div.parentNode ) {\n\t\t\tdiv.parentNode.removeChild( div );\n\t\t}\n\t\tdiv = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = attrs.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== strundefined && context;\n}\n\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc,\n\t\tparent = doc.defaultView;\n\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\n\tdocumentIsHTML = !isXML( doc );\n\n\tif ( parent && parent !== parent.top ) {\n\t\tif ( parent.addEventListener ) {\n\t\t\tparent.addEventListener( \"unload\", function() {\n\t\t\t\tsetDocument();\n\t\t\t}, false );\n\t\t} else if ( parent.attachEvent ) {\n\t\t\tparent.attachEvent( \"onunload\", function() {\n\t\t\t\tsetDocument();\n\t\t\t});\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.className = \"i\";\n\t\treturn !div.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\tsupport.getElementsByTagName = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {\n\t\tdiv.innerHTML = \"<div class='a'></div><div class='a i'></div>\";\n\n\t\tdiv.firstChild.className = \"i\";\n\t\treturn div.getElementsByClassName(\"i\").length === 2;\n\t});\n\n\tsupport.getById = assert(function( div ) {\n\t\tdocElem.appendChild( div ).id = expando;\n\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\n\t});\n\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== strundefined && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\treturn m && m.parentNode ? [m] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\t\t\t}\n\t\t} :\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\n\trbuggyMatches = [];\n\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\n\t\tassert(function( div ) {\n\t\t\tdiv.innerHTML = \"<select t=''><option selected=''></option></select>\";\n\n\t\t\tif ( div.querySelectorAll(\"[t^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\t\t\tvar input = doc.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t1;\n\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn doc;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch(e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [elem] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[5] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( match[3] && match[4] !== undefined ) {\n\t\t\t\tmatch[2] = match[4];\n\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t\"empty\": function( elem ) {\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\nfunction tokenize( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n}\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\touterCache[ dir ] = newCache;\n\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t[] :\n\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t}\n\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\tif ( match.length === 1 ) {\n\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\trsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\nsupport.detectDuplicates = !!hasDuplicate;\n\nsetDocument();\n\nsupport.sortDetached = assert(function( div1 ) {\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n});\n\nif ( !assert(function( div ) {\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\nif ( !support.attributes || !assert(function( div ) {\n\tdiv.innerHTML = \"<input/>\";\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\nif ( !assert(function( div ) {\n\treturn div.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine(function() { return Sizzle; });\n} else if ( typeof module !== \"undefined\" && module.exports ) {\n\tmodule.exports = Sizzle;\n} else {\n\twindow.Sizzle = Sizzle;\n}\n\n})( window );\n\n;(function(engine) {\n  var extendElements = Prototype.Selector.extendElements;\n\n  function select(selector, scope) {\n    return extendElements(engine(selector, scope || document));\n  }\n\n  function match(element, selector) {\n    return engine.matches(selector, [element]).length == 1;\n  }\n\n  Prototype.Selector.engine = engine;\n  Prototype.Selector.select = select;\n  Prototype.Selector.match = match;\n})(Sizzle);\n\nwindow.Sizzle = Prototype._original_property;\ndelete Prototype._original_property;\n\nvar Form = {\n  reset: function(form) {\n    form = $(form);\n    form.reset();\n    return form;\n  },\n\n  serializeElements: function(elements, options) {\n    if (typeof options != 'object') options = { hash: !!options };\n    else if (Object.isUndefined(options.hash)) options.hash = true;\n    var key, value, submitted = false, submit = options.submit, accumulator, initial;\n\n    if (options.hash) {\n      initial = {};\n      accumulator = function(result, key, value) {\n        if (key in result) {\n          if (!Object.isArray(result[key])) result[key] = [result[key]];\n          result[key] = result[key].concat(value);\n        } else result[key] = value;\n        return result;\n      };\n    } else {\n      initial = '';\n      accumulator = function(result, key, values) {\n        if (!Object.isArray(values)) {values = [values];}\n        if (!values.length) {return result;}\n        var encodedKey = encodeURIComponent(key).gsub(/%20/, '+');\n        return result + (result ? \"&\" : \"\") + values.map(function (value) {\n          value = value.gsub(/(\\r)?\\n/, '\\r\\n');\n          value = encodeURIComponent(value);\n          value = value.gsub(/%20/, '+');\n          return encodedKey + \"=\" + value;\n        }).join(\"&\");\n      };\n    }\n\n    return elements.inject(initial, function(result, element) {\n      if (!element.disabled && element.name) {\n        key = element.name; value = $(element).getValue();\n        if (value != null && element.type != 'file' && (element.type != 'submit' || (!submitted &&\n            submit !== false && (!submit || key == submit) && (submitted = true)))) {\n          result = accumulator(result, key, value);\n        }\n      }\n      return result;\n    });\n  }\n};\n\nForm.Methods = {\n  serialize: function(form, options) {\n    return Form.serializeElements(Form.getElements(form), options);\n  },\n\n\n  getElements: function(form) {\n    var elements = $(form).getElementsByTagName('*');\n    var element, results = [], serializers = Form.Element.Serializers;\n\n    for (var i = 0; element = elements[i]; i++) {\n      if (serializers[element.tagName.toLowerCase()])\n        results.push(Element.extend(element));\n    }\n    return results;\n  },\n\n  getInputs: function(form, typeName, name) {\n    form = $(form);\n    var inputs = form.getElementsByTagName('input');\n\n    if (!typeName && !name) return $A(inputs).map(Element.extend);\n\n    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {\n      var input = inputs[i];\n      if ((typeName && input.type != typeName) || (name && input.name != name))\n        continue;\n      matchingInputs.push(Element.extend(input));\n    }\n\n    return matchingInputs;\n  },\n\n  disable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('disable');\n    return form;\n  },\n\n  enable: function(form) {\n    form = $(form);\n    Form.getElements(form).invoke('enable');\n    return form;\n  },\n\n  findFirstElement: function(form) {\n    var elements = $(form).getElements().findAll(function(element) {\n      return 'hidden' != element.type && !element.disabled;\n    });\n    var firstByIndex = elements.findAll(function(element) {\n      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;\n    }).sortBy(function(element) { return element.tabIndex }).first();\n\n    return firstByIndex ? firstByIndex : elements.find(function(element) {\n      return /^(?:input|select|textarea)$/i.test(element.tagName);\n    });\n  },\n\n  focusFirstElement: function(form) {\n    form = $(form);\n    var element = form.findFirstElement();\n    if (element) element.activate();\n    return form;\n  },\n\n  request: function(form, options) {\n    form = $(form), options = Object.clone(options || { });\n\n    var params = options.parameters, action = form.readAttribute('action') || '';\n    if (action.blank()) action = window.location.href;\n    options.parameters = form.serialize(true);\n\n    if (params) {\n      if (Object.isString(params)) params = params.toQueryParams();\n      Object.extend(options.parameters, params);\n    }\n\n    if (form.hasAttribute('method') && !options.method)\n      options.method = form.method;\n\n    return new Ajax.Request(action, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\n\nForm.Element = {\n  focus: function(element) {\n    $(element).focus();\n    return element;\n  },\n\n  select: function(element) {\n    $(element).select();\n    return element;\n  }\n};\n\nForm.Element.Methods = {\n\n  serialize: function(element) {\n    element = $(element);\n    if (!element.disabled && element.name) {\n      var value = element.getValue();\n      if (value != undefined) {\n        var pair = { };\n        pair[element.name] = value;\n        return Object.toQueryString(pair);\n      }\n    }\n    return '';\n  },\n\n  getValue: function(element) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    return Form.Element.Serializers[method](element);\n  },\n\n  setValue: function(element, value) {\n    element = $(element);\n    var method = element.tagName.toLowerCase();\n    Form.Element.Serializers[method](element, value);\n    return element;\n  },\n\n  clear: function(element) {\n    $(element).value = '';\n    return element;\n  },\n\n  present: function(element) {\n    return $(element).value != '';\n  },\n\n  activate: function(element) {\n    element = $(element);\n    try {\n      element.focus();\n      if (element.select && (element.tagName.toLowerCase() != 'input' ||\n          !(/^(?:button|reset|submit)$/i.test(element.type))))\n        element.select();\n    } catch (e) { }\n    return element;\n  },\n\n  disable: function(element) {\n    element = $(element);\n    element.disabled = true;\n    return element;\n  },\n\n  enable: function(element) {\n    element = $(element);\n    element.disabled = false;\n    return element;\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Field = Form.Element;\n\nvar $F = Form.Element.Methods.getValue;\n\n/*--------------------------------------------------------------------------*/\n\nForm.Element.Serializers = (function() {\n  function input(element, value) {\n    switch (element.type.toLowerCase()) {\n      case 'checkbox':\n      case 'radio':\n        return inputSelector(element, value);\n      default:\n        return valueSelector(element, value);\n    }\n  }\n\n  function inputSelector(element, value) {\n    if (Object.isUndefined(value))\n      return element.checked ? element.value : null;\n    else element.checked = !!value;\n  }\n\n  function valueSelector(element, value) {\n    if (Object.isUndefined(value)) return element.value;\n    else element.value = value;\n  }\n\n  function select(element, value) {\n    if (Object.isUndefined(value))\n      return (element.type === 'select-one' ? selectOne : selectMany)(element);\n\n    var opt, currentValue, single = !Object.isArray(value);\n    for (var i = 0, length = element.length; i < length; i++) {\n      opt = element.options[i];\n      currentValue = this.optionValue(opt);\n      if (single) {\n        if (currentValue == value) {\n          opt.selected = true;\n          return;\n        }\n      }\n      else opt.selected = value.include(currentValue);\n    }\n  }\n\n  function selectOne(element) {\n    var index = element.selectedIndex;\n    return index >= 0 ? optionValue(element.options[index]) : null;\n  }\n\n  function selectMany(element) {\n    var values, length = element.length;\n    if (!length) return null;\n\n    for (var i = 0, values = []; i < length; i++) {\n      var opt = element.options[i];\n      if (opt.selected) values.push(optionValue(opt));\n    }\n    return values;\n  }\n\n  function optionValue(opt) {\n    return Element.hasAttribute(opt, 'value') ? opt.value : opt.text;\n  }\n\n  return {\n    input:         input,\n    inputSelector: inputSelector,\n    textarea:      valueSelector,\n    select:        select,\n    selectOne:     selectOne,\n    selectMany:    selectMany,\n    optionValue:   optionValue,\n    button:        valueSelector\n  };\n})();\n\n/*--------------------------------------------------------------------------*/\n\n\nAbstract.TimedObserver = Class.create(PeriodicalExecuter, {\n  initialize: function($super, element, frequency, callback) {\n    $super(callback, frequency);\n    this.element   = $(element);\n    this.lastValue = this.getValue();\n  },\n\n  execute: function() {\n    var value = this.getValue();\n    if (Object.isString(this.lastValue) && Object.isString(value) ?\n        this.lastValue != value : String(this.lastValue) != String(value)) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  }\n});\n\nForm.Element.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.Observer = Class.create(Abstract.TimedObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\n\n/*--------------------------------------------------------------------------*/\n\nAbstract.EventObserver = Class.create({\n  initialize: function(element, callback) {\n    this.element  = $(element);\n    this.callback = callback;\n\n    this.lastValue = this.getValue();\n    if (this.element.tagName.toLowerCase() == 'form')\n      this.registerFormCallbacks();\n    else\n      this.registerCallback(this.element);\n  },\n\n  onElementEvent: function() {\n    var value = this.getValue();\n    if (this.lastValue != value) {\n      this.callback(this.element, value);\n      this.lastValue = value;\n    }\n  },\n\n  registerFormCallbacks: function() {\n    Form.getElements(this.element).each(this.registerCallback, this);\n  },\n\n  registerCallback: function(element) {\n    if (element.type) {\n      switch (element.type.toLowerCase()) {\n        case 'checkbox':\n        case 'radio':\n          Event.observe(element, 'click', this.onElementEvent.bind(this));\n          break;\n        default:\n          Event.observe(element, 'change', this.onElementEvent.bind(this));\n          break;\n      }\n    }\n  }\n});\n\nForm.Element.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.Element.getValue(this.element);\n  }\n});\n\nForm.EventObserver = Class.create(Abstract.EventObserver, {\n  getValue: function() {\n    return Form.serialize(this.element);\n  }\n});\n(function(GLOBAL) {\n  var DIV = document.createElement('div');\n  var docEl = document.documentElement;\n  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl\n   && 'onmouseleave' in docEl;\n\n  var Event = {\n    KEY_BACKSPACE: 8,\n    KEY_TAB:       9,\n    KEY_RETURN:   13,\n    KEY_ESC:      27,\n    KEY_LEFT:     37,\n    KEY_UP:       38,\n    KEY_RIGHT:    39,\n    KEY_DOWN:     40,\n    KEY_DELETE:   46,\n    KEY_HOME:     36,\n    KEY_END:      35,\n    KEY_PAGEUP:   33,\n    KEY_PAGEDOWN: 34,\n    KEY_INSERT:   45\n  };\n\n\n  var isIELegacyEvent = function(event) { return false; };\n\n  if (window.attachEvent) {\n    if (window.addEventListener) {\n      isIELegacyEvent = function(event) {\n        return !(event instanceof window.Event);\n      };\n    } else {\n      isIELegacyEvent = function(event) { return true; };\n    }\n  }\n\n  var _isButton;\n\n  function _isButtonForDOMEvents(event, code) {\n    return event.which ? (event.which === code + 1) : (event.button === code);\n  }\n\n  var legacyButtonMap = { 0: 1, 1: 4, 2: 2 };\n  function _isButtonForLegacyEvents(event, code) {\n    return event.button === legacyButtonMap[code];\n  }\n\n  function _isButtonForWebKit(event, code) {\n    switch (code) {\n      case 0: return event.which == 1 && !event.metaKey;\n      case 1: return event.which == 2 || (event.which == 1 && event.metaKey);\n      case 2: return event.which == 3;\n      default: return false;\n    }\n  }\n\n  if (window.attachEvent) {\n    if (!window.addEventListener) {\n      _isButton = _isButtonForLegacyEvents;\n    } else {\n      _isButton = function(event, code) {\n        return isIELegacyEvent(event) ? _isButtonForLegacyEvents(event, code) :\n         _isButtonForDOMEvents(event, code);\n      }\n    }\n  } else if (Prototype.Browser.WebKit) {\n    _isButton = _isButtonForWebKit;\n  } else {\n    _isButton = _isButtonForDOMEvents;\n  }\n\n  function isLeftClick(event)   { return _isButton(event, 0) }\n\n  function isMiddleClick(event) { return _isButton(event, 1) }\n\n  function isRightClick(event)  { return _isButton(event, 2) }\n\n  function element(event) {\n    return Element.extend(_element(event));\n  }\n\n  function _element(event) {\n    event = Event.extend(event);\n\n    var node = event.target, type = event.type,\n     currentTarget = event.currentTarget;\n\n    if (currentTarget && currentTarget.tagName) {\n      if (type === 'load' || type === 'error' ||\n        (type === 'click' && currentTarget.tagName.toLowerCase() === 'input'\n          && currentTarget.type === 'radio'))\n            node = currentTarget;\n    }\n\n    return node.nodeType == Node.TEXT_NODE ? node.parentNode : node;\n  }\n\n  function findElement(event, expression) {\n    var element = _element(event), selector = Prototype.Selector;\n    if (!expression) return Element.extend(element);\n    while (element) {\n      if (Object.isElement(element) && selector.match(element, expression))\n        return Element.extend(element);\n      element = element.parentNode;\n    }\n  }\n\n  function pointer(event) {\n    return { x: pointerX(event), y: pointerY(event) };\n  }\n\n  function pointerX(event) {\n    var docElement = document.documentElement,\n     body = document.body || { scrollLeft: 0 };\n\n    return event.pageX || (event.clientX +\n      (docElement.scrollLeft || body.scrollLeft) -\n      (docElement.clientLeft || 0));\n  }\n\n  function pointerY(event) {\n    var docElement = document.documentElement,\n     body = document.body || { scrollTop: 0 };\n\n    return  event.pageY || (event.clientY +\n       (docElement.scrollTop || body.scrollTop) -\n       (docElement.clientTop || 0));\n  }\n\n\n  function stop(event) {\n    Event.extend(event);\n    event.preventDefault();\n    event.stopPropagation();\n\n    event.stopped = true;\n  }\n\n\n  Event.Methods = {\n    isLeftClick:   isLeftClick,\n    isMiddleClick: isMiddleClick,\n    isRightClick:  isRightClick,\n\n    element:     element,\n    findElement: findElement,\n\n    pointer:  pointer,\n    pointerX: pointerX,\n    pointerY: pointerY,\n\n    stop: stop\n  };\n\n  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {\n    m[name] = Event.Methods[name].methodize();\n    return m;\n  });\n\n  if (window.attachEvent) {\n    function _relatedTarget(event) {\n      var element;\n      switch (event.type) {\n        case 'mouseover':\n        case 'mouseenter':\n          element = event.fromElement;\n          break;\n        case 'mouseout':\n        case 'mouseleave':\n          element = event.toElement;\n          break;\n        default:\n          return null;\n      }\n      return Element.extend(element);\n    }\n\n    var additionalMethods = {\n      stopPropagation: function() { this.cancelBubble = true },\n      preventDefault:  function() { this.returnValue = false },\n      inspect: function() { return '[object Event]' }\n    };\n\n    Event.extend = function(event, element) {\n      if (!event) return false;\n\n      if (!isIELegacyEvent(event)) return event;\n\n      if (event._extendedByPrototype) return event;\n      event._extendedByPrototype = Prototype.emptyFunction;\n\n      var pointer = Event.pointer(event);\n\n      Object.extend(event, {\n        target: event.srcElement || element,\n        relatedTarget: _relatedTarget(event),\n        pageX:  pointer.x,\n        pageY:  pointer.y\n      });\n\n      Object.extend(event, methods);\n      Object.extend(event, additionalMethods);\n\n      return event;\n    };\n  } else {\n    Event.extend = Prototype.K;\n  }\n\n  if (window.addEventListener) {\n    Event.prototype = window.Event.prototype || document.createEvent('HTMLEvents').__proto__;\n    Object.extend(Event.prototype, methods);\n  }\n\n  var EVENT_TRANSLATIONS = {\n    mouseenter: 'mouseover',\n    mouseleave: 'mouseout'\n  };\n\n  function getDOMEventName(eventName) {\n    return EVENT_TRANSLATIONS[eventName] || eventName;\n  }\n\n  if (MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)\n    getDOMEventName = Prototype.K;\n\n  function getUniqueElementID(element) {\n    if (element === window) return 0;\n\n    if (typeof element._prototypeUID === 'undefined')\n      element._prototypeUID = Element.Storage.UID++;\n    return element._prototypeUID;\n  }\n\n  function getUniqueElementID_IE(element) {\n    if (element === window) return 0;\n    if (element == document) return 1;\n    return element.uniqueID;\n  }\n\n  if ('uniqueID' in DIV)\n    getUniqueElementID = getUniqueElementID_IE;\n\n  function isCustomEvent(eventName) {\n    return eventName.include(':');\n  }\n\n  Event._isCustomEvent = isCustomEvent;\n\n  function getRegistryForElement(element, uid) {\n    var CACHE = GLOBAL.Event.cache;\n    if (Object.isUndefined(uid))\n      uid = getUniqueElementID(element);\n    if (!CACHE[uid]) CACHE[uid] = { element: element };\n    return CACHE[uid];\n  }\n\n  function destroyRegistryForElement(element, uid) {\n    if (Object.isUndefined(uid))\n      uid = getUniqueElementID(element);\n    delete GLOBAL.Event.cache[uid];\n  }\n\n\n  function register(element, eventName, handler) {\n    var registry = getRegistryForElement(element);\n    if (!registry[eventName]) registry[eventName] = [];\n    var entries = registry[eventName];\n\n    var i = entries.length;\n    while (i--)\n      if (entries[i].handler === handler) return null;\n\n    var uid = getUniqueElementID(element);\n    var responder = GLOBAL.Event._createResponder(uid, eventName, handler);\n    var entry = {\n      responder: responder,\n      handler:   handler\n    };\n\n    entries.push(entry);\n    return entry;\n  }\n\n  function unregister(element, eventName, handler) {\n    var registry = getRegistryForElement(element);\n    var entries = registry[eventName];\n    if (!entries) return;\n\n    var i = entries.length, entry;\n    while (i--) {\n      if (entries[i].handler === handler) {\n        entry = entries[i];\n        break;\n      }\n    }\n\n    if (!entry) return;\n\n    var index = entries.indexOf(entry);\n    entries.splice(index, 1);\n\n    return entry;\n  }\n\n\n  function observe(element, eventName, handler) {\n    element = $(element);\n    var entry = register(element, eventName, handler);\n\n    if (entry === null) return element;\n\n    var responder = entry.responder;\n    if (isCustomEvent(eventName))\n      observeCustomEvent(element, eventName, responder);\n    else\n      observeStandardEvent(element, eventName, responder);\n\n    return element;\n  }\n\n  function observeStandardEvent(element, eventName, responder) {\n    var actualEventName = getDOMEventName(eventName);\n    if (element.addEventListener) {\n      element.addEventListener(actualEventName, responder, false);\n    } else {\n      element.attachEvent('on' + actualEventName, responder);\n    }\n  }\n\n  function observeCustomEvent(element, eventName, responder) {\n    if (element.addEventListener) {\n      element.addEventListener('dataavailable', responder, false);\n    } else {\n      element.attachEvent('ondataavailable', responder);\n      element.attachEvent('onlosecapture',   responder);\n    }\n  }\n\n  function stopObserving(element, eventName, handler) {\n    element = $(element);\n    var handlerGiven = !Object.isUndefined(handler),\n     eventNameGiven = !Object.isUndefined(eventName);\n\n    if (!eventNameGiven && !handlerGiven) {\n      stopObservingElement(element);\n      return element;\n    }\n\n    if (!handlerGiven) {\n      stopObservingEventName(element, eventName);\n      return element;\n    }\n\n    var entry = unregister(element, eventName, handler);\n\n    if (!entry) return element;\n    removeEvent(element, eventName, entry.responder);\n    return element;\n  }\n\n  function stopObservingStandardEvent(element, eventName, responder) {\n    var actualEventName = getDOMEventName(eventName);\n    if (element.removeEventListener) {\n      element.removeEventListener(actualEventName, responder, false);\n    } else {\n      element.detachEvent('on' + actualEventName, responder);\n    }\n  }\n\n  function stopObservingCustomEvent(element, eventName, responder) {\n    if (element.removeEventListener) {\n      element.removeEventListener('dataavailable', responder, false);\n    } else {\n      element.detachEvent('ondataavailable', responder);\n      element.detachEvent('onlosecapture',   responder);\n    }\n  }\n\n\n\n  function stopObservingElement(element) {\n    var uid = getUniqueElementID(element), registry = GLOBAL.Event.cache[uid];\n    if (!registry) return;\n\n    destroyRegistryForElement(element, uid);\n\n    var entries, i;\n    for (var eventName in registry) {\n      if (eventName === 'element') continue;\n\n      entries = registry[eventName];\n      i = entries.length;\n      while (i--)\n        removeEvent(element, eventName, entries[i].responder);\n    }\n  }\n\n  function stopObservingEventName(element, eventName) {\n    var registry = getRegistryForElement(element);\n    var entries = registry[eventName];\n    if (!entries) return;\n    delete registry[eventName];\n\n    var i = entries.length;\n    while (i--)\n      removeEvent(element, eventName, entries[i].responder);\n  }\n\n\n  function removeEvent(element, eventName, handler) {\n    if (isCustomEvent(eventName))\n      stopObservingCustomEvent(element, eventName, handler);\n    else\n      stopObservingStandardEvent(element, eventName, handler);\n  }\n\n\n\n  function getFireTarget(element) {\n    if (element !== document) return element;\n    if (document.createEvent && !element.dispatchEvent)\n      return document.documentElement;\n    return element;\n  }\n\n  function fire(element, eventName, memo, bubble) {\n    element = getFireTarget($(element));\n    if (Object.isUndefined(bubble)) bubble = true;\n    memo = memo || {};\n\n    var event = fireEvent(element, eventName, memo, bubble);\n    return Event.extend(event);\n  }\n\n  function fireEvent_DOM(element, eventName, memo, bubble) {\n    var event = document.createEvent('HTMLEvents');\n    event.initEvent('dataavailable', bubble, true);\n\n    event.eventName = eventName;\n    event.memo = memo;\n\n    element.dispatchEvent(event);\n    return event;\n  }\n\n  function fireEvent_IE(element, eventName, memo, bubble) {\n    var event = document.createEventObject();\n    event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';\n\n    event.eventName = eventName;\n    event.memo = memo;\n\n    element.fireEvent(event.eventType, event);\n    return event;\n  }\n\n  var fireEvent = document.createEvent ? fireEvent_DOM : fireEvent_IE;\n\n\n\n  Event.Handler = Class.create({\n    initialize: function(element, eventName, selector, callback) {\n      this.element   = $(element);\n      this.eventName = eventName;\n      this.selector  = selector;\n      this.callback  = callback;\n      this.handler   = this.handleEvent.bind(this);\n    },\n\n\n    start: function() {\n      Event.observe(this.element, this.eventName, this.handler);\n      return this;\n    },\n\n    stop: function() {\n      Event.stopObserving(this.element, this.eventName, this.handler);\n      return this;\n    },\n\n    handleEvent: function(event) {\n      var element = Event.findElement(event, this.selector);\n      if (element) this.callback.call(this.element, event, element);\n    }\n  });\n\n  function on(element, eventName, selector, callback) {\n    element = $(element);\n    if (Object.isFunction(selector) && Object.isUndefined(callback)) {\n      callback = selector, selector = null;\n    }\n\n    return new Event.Handler(element, eventName, selector, callback).start();\n  }\n\n  Object.extend(Event, Event.Methods);\n\n  Object.extend(Event, {\n    fire:          fire,\n    observe:       observe,\n    stopObserving: stopObserving,\n    on:            on\n  });\n\n  Element.addMethods({\n    fire:          fire,\n\n    observe:       observe,\n\n    stopObserving: stopObserving,\n\n    on:            on\n  });\n\n  Object.extend(document, {\n    fire:          fire.methodize(),\n\n    observe:       observe.methodize(),\n\n    stopObserving: stopObserving.methodize(),\n\n    on:            on.methodize(),\n\n    loaded:        false\n  });\n\n  if (GLOBAL.Event) Object.extend(window.Event, Event);\n  else GLOBAL.Event = Event;\n\n  GLOBAL.Event.cache = {};\n\n  function destroyCache_IE() {\n    GLOBAL.Event.cache = null;\n  }\n\n  if (window.attachEvent)\n    window.attachEvent('onunload', destroyCache_IE);\n\n  DIV = null;\n  docEl = null;\n})(this);\n\n(function(GLOBAL) {\n  /* Code for creating leak-free event responders is based on work by\n   John-David Dalton. */\n\n  var docEl = document.documentElement;\n  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl\n    && 'onmouseleave' in docEl;\n\n  function isSimulatedMouseEnterLeaveEvent(eventName) {\n    return !MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&\n     (eventName === 'mouseenter' || eventName === 'mouseleave');\n  }\n\n  function createResponder(uid, eventName, handler) {\n    if (Event._isCustomEvent(eventName))\n      return createResponderForCustomEvent(uid, eventName, handler);\n    if (isSimulatedMouseEnterLeaveEvent(eventName))\n      return createMouseEnterLeaveResponder(uid, eventName, handler);\n\n    return function(event) {\n      if (!Event.cache) return;\n\n      var element = Event.cache[uid].element;\n      Event.extend(event, element);\n      handler.call(element, event);\n    };\n  }\n\n  function createResponderForCustomEvent(uid, eventName, handler) {\n    return function(event) {\n      var element = Event.cache[uid].element;\n\n      if (Object.isUndefined(event.eventName))\n        return false;\n\n      if (event.eventName !== eventName)\n        return false;\n\n      Event.extend(event, element);\n      handler.call(element, event);\n    };\n  }\n\n  function createMouseEnterLeaveResponder(uid, eventName, handler) {\n    return function(event) {\n      var element = Event.cache[uid].element;\n\n      Event.extend(event, element);\n      var parent = event.relatedTarget;\n\n      while (parent && parent !== element) {\n        try { parent = parent.parentNode; }\n        catch(e) { parent = element; }\n      }\n\n      if (parent === element) return;\n      handler.call(element, event);\n    }\n  }\n\n  GLOBAL.Event._createResponder = createResponder;\n  docEl = null;\n})(this);\n\n(function(GLOBAL) {\n  /* Support for the DOMContentLoaded event is based on work by Dan Webb,\n     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */\n\n  var TIMER;\n\n  function fireContentLoadedEvent() {\n    if (document.loaded) return;\n    if (TIMER) window.clearTimeout(TIMER);\n    document.loaded = true;\n    document.fire('dom:loaded');\n  }\n\n  function checkReadyState() {\n    if (document.readyState === 'complete') {\n      document.detachEvent('onreadystatechange', checkReadyState);\n      fireContentLoadedEvent();\n    }\n  }\n\n  function pollDoScroll() {\n    try {\n      document.documentElement.doScroll('left');\n    } catch (e) {\n      TIMER = pollDoScroll.defer();\n      return;\n    }\n\n    fireContentLoadedEvent();\n  }\n\n\n  if (document.readyState === 'complete') {\n    fireContentLoadedEvent();\n    return;\n  }\n\n  if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent, false);\n  } else {\n    document.attachEvent('onreadystatechange', checkReadyState);\n    if (window == top) TIMER = pollDoScroll.defer();\n  }\n\n  Event.observe(window, 'load', fireContentLoadedEvent);\n})(this);\n\n\nElement.addMethods();\n/*------------------------------- DEPRECATED -------------------------------*/\n\nHash.toQueryString = Object.toQueryString;\n\nvar Toggle = { display: Element.toggle };\n\nElement.Methods.childOf = Element.Methods.descendantOf;\n\nvar Insertion = {\n  Before: function(element, content) {\n    return Element.insert(element, {before:content});\n  },\n\n  Top: function(element, content) {\n    return Element.insert(element, {top:content});\n  },\n\n  Bottom: function(element, content) {\n    return Element.insert(element, {bottom:content});\n  },\n\n  After: function(element, content) {\n    return Element.insert(element, {after:content});\n  }\n};\n\nvar $continue = new Error('\"throw $continue\" is deprecated, use \"return\" instead');\n\nvar Position = {\n  includeScrollOffsets: false,\n\n  prepare: function() {\n    this.deltaX =  window.pageXOffset\n                || document.documentElement.scrollLeft\n                || document.body.scrollLeft\n                || 0;\n    this.deltaY =  window.pageYOffset\n                || document.documentElement.scrollTop\n                || document.body.scrollTop\n                || 0;\n  },\n\n  within: function(element, x, y) {\n    if (this.includeScrollOffsets)\n      return this.withinIncludingScrolloffsets(element, x, y);\n    this.xcomp = x;\n    this.ycomp = y;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (y >= this.offset[1] &&\n            y <  this.offset[1] + element.offsetHeight &&\n            x >= this.offset[0] &&\n            x <  this.offset[0] + element.offsetWidth);\n  },\n\n  withinIncludingScrolloffsets: function(element, x, y) {\n    var offsetcache = Element.cumulativeScrollOffset(element);\n\n    this.xcomp = x + offsetcache[0] - this.deltaX;\n    this.ycomp = y + offsetcache[1] - this.deltaY;\n    this.offset = Element.cumulativeOffset(element);\n\n    return (this.ycomp >= this.offset[1] &&\n            this.ycomp <  this.offset[1] + element.offsetHeight &&\n            this.xcomp >= this.offset[0] &&\n            this.xcomp <  this.offset[0] + element.offsetWidth);\n  },\n\n  overlap: function(mode, element) {\n    if (!mode) return 0;\n    if (mode == 'vertical')\n      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /\n        element.offsetHeight;\n    if (mode == 'horizontal')\n      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /\n        element.offsetWidth;\n  },\n\n\n  cumulativeOffset: Element.Methods.cumulativeOffset,\n\n  positionedOffset: Element.Methods.positionedOffset,\n\n  absolutize: function(element) {\n    Position.prepare();\n    return Element.absolutize(element);\n  },\n\n  relativize: function(element) {\n    Position.prepare();\n    return Element.relativize(element);\n  },\n\n  realOffset: Element.Methods.cumulativeScrollOffset,\n\n  offsetParent: Element.Methods.getOffsetParent,\n\n  page: Element.Methods.viewportOffset,\n\n  clone: function(source, target, options) {\n    options = options || { };\n    return Element.clonePosition(target, source, options);\n  }\n};\n\n/*--------------------------------------------------------------------------*/\n\nif (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){\n  function iter(name) {\n    return name.blank() ? null : \"[contains(concat(' ', @class, ' '), ' \" + name + \" ')]\";\n  }\n\n  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?\n  function(element, className) {\n    className = className.toString().strip();\n    var cond = /\\s/.test(className) ? $w(className).map(iter).join('') : iter(className);\n    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];\n  } : function(element, className) {\n    className = className.toString().strip();\n    var elements = [], classNames = (/\\s/.test(className) ? $w(className) : null);\n    if (!classNames && !className) return elements;\n\n    var nodes = $(element).getElementsByTagName('*');\n    className = ' ' + className + ' ';\n\n    for (var i = 0, child, cn; child = nodes[i]; i++) {\n      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||\n          (classNames && classNames.all(function(name) {\n            return !name.toString().blank() && cn.include(' ' + name + ' ');\n          }))))\n        elements.push(Element.extend(child));\n    }\n    return elements;\n  };\n\n  return function(className, parentElement) {\n    return $(parentElement || document.body).getElementsByClassName(className);\n  };\n}(Element.Methods);\n\n/*--------------------------------------------------------------------------*/\n\nElement.ClassNames = Class.create();\nElement.ClassNames.prototype = {\n  initialize: function(element) {\n    this.element = $(element);\n  },\n\n  _each: function(iterator, context) {\n    this.element.className.split(/\\s+/).select(function(name) {\n      return name.length > 0;\n    })._each(iterator, context);\n  },\n\n  set: function(className) {\n    this.element.className = className;\n  },\n\n  add: function(classNameToAdd) {\n    if (this.include(classNameToAdd)) return;\n    this.set($A(this).concat(classNameToAdd).join(' '));\n  },\n\n  remove: function(classNameToRemove) {\n    if (!this.include(classNameToRemove)) return;\n    this.set($A(this).without(classNameToRemove).join(' '));\n  },\n\n  toString: function() {\n    return $A(this).join(' ');\n  }\n};\n\nObject.extend(Element.ClassNames.prototype, Enumerable);\n\n/*--------------------------------------------------------------------------*/\n\n(function() {\n  window.Selector = Class.create({\n    initialize: function(expression) {\n      this.expression = expression.strip();\n    },\n\n    findElements: function(rootElement) {\n      return Prototype.Selector.select(this.expression, rootElement);\n    },\n\n    match: function(element) {\n      return Prototype.Selector.match(element, this.expression);\n    },\n\n    toString: function() {\n      return this.expression;\n    },\n\n    inspect: function() {\n      return \"#<Selector: \" + this.expression + \">\";\n    }\n  });\n\n  Object.extend(Selector, {\n    matchElements: function(elements, expression) {\n      var match = Prototype.Selector.match,\n          results = [];\n\n      for (var i = 0, length = elements.length; i < length; i++) {\n        var element = elements[i];\n        if (match(element, expression)) {\n          results.push(Element.extend(element));\n        }\n      }\n      return results;\n    },\n\n    findElement: function(elements, expression, index) {\n      index = index || 0;\n      var matchIndex = 0, element;\n      for (var i = 0, length = elements.length; i < length; i++) {\n        element = elements[i];\n        if (Prototype.Selector.match(element, expression) && index === matchIndex++) {\n          return Element.extend(element);\n        }\n      }\n    },\n\n    findChildElements: function(element, expressions) {\n      var selector = expressions.toArray().join(', ');\n      return Prototype.Selector.select(selector, element || document);\n    }\n  });\n})();","undoManager":{"mark":-1,"position":15,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":12}},"text":"prototype.js"},{"action":"insertText","range":{"start":{"row":0,"column":12},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":7514,"column":0}},"lines":["Open with","Cruze McFarlane ","(cruzemcfarlane@gmail.com)","/*  Prototype JavaScript framework, version 1.7.2"," *  (c) 2005-2010 Sam Stephenson"," *"," *  Prototype is freely distributable under the terms of an MIT-style license."," *  For details, see the Prototype web site: http://www.prototypejs.org/"," *"," *--------------------------------------------------------------------------*/","","var Prototype = {","","  Version: '1.7.2',","","  Browser: (function(){","    var ua = navigator.userAgent;","    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';","    return {","      IE:             !!window.attachEvent && !isOpera,","      Opera:          isOpera,","      WebKit:         ua.indexOf('AppleWebKit/') > -1,","      Gecko:          ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1,","      MobileSafari:   /Apple.*Mobile/.test(ua)","    }","  })(),","","  BrowserFeatures: {","    XPath: !!document.evaluate,","","    SelectorsAPI: !!document.querySelector,","","    ElementExtensions: (function() {","      var constructor = window.Element || window.HTMLElement;","      return !!(constructor && constructor.prototype);","    })(),","    SpecificElementExtensions: (function() {","      if (typeof window.HTMLDivElement !== 'undefined')","        return true;","","      var div = document.createElement('div'),","          form = document.createElement('form'),","          isSupported = false;","","      if (div['__proto__'] && (div['__proto__'] !== form['__proto__'])) {","        isSupported = true;","      }","","      div = form = null;","","      return isSupported;","    })()","  },","","  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\/script\\\\s*>',","  JSONFilter: /^\\/\\*-secure-([\\s\\S]*)\\*\\/\\s*$/,","","  emptyFunction: function() { },","","  K: function(x) { return x }","};","","if (Prototype.Browser.MobileSafari)","  Prototype.BrowserFeatures.SpecificElementExtensions = false;","/* Based on Alex Arnell's inheritance implementation. */","","var Class = (function() {","","  var IS_DONTENUM_BUGGY = (function(){","    for (var p in { toString: 1 }) {","      if (p === 'toString') return false;","    }","    return true;","  })();","","  function subclass() {};","  function create() {","    var parent = null, properties = $A(arguments);","    if (Object.isFunction(properties[0]))","      parent = properties.shift();","","    function klass() {","      this.initialize.apply(this, arguments);","    }","","    Object.extend(klass, Class.Methods);","    klass.superclass = parent;","    klass.subclasses = [];","","    if (parent) {","      subclass.prototype = parent.prototype;","      klass.prototype = new subclass;","      parent.subclasses.push(klass);","    }","","    for (var i = 0, length = properties.length; i < length; i++)","      klass.addMethods(properties[i]);","","    if (!klass.prototype.initialize)","      klass.prototype.initialize = Prototype.emptyFunction;","","    klass.prototype.constructor = klass;","    return klass;","  }","","  function addMethods(source) {","    var ancestor   = this.superclass && this.superclass.prototype,","        properties = Object.keys(source);","","    if (IS_DONTENUM_BUGGY) {","      if (source.toString != Object.prototype.toString)","        properties.push(\"toString\");","      if (source.valueOf != Object.prototype.valueOf)","        properties.push(\"valueOf\");","    }","","    for (var i = 0, length = properties.length; i < length; i++) {","      var property = properties[i], value = source[property];","      if (ancestor && Object.isFunction(value) &&","          value.argumentNames()[0] == \"$super\") {","        var method = value;","        value = (function(m) {","          return function() { return ancestor[m].apply(this, arguments); };","        })(property).wrap(method);","","        value.valueOf = (function(method) {","          return function() { return method.valueOf.call(method); };","        })(method);","","        value.toString = (function(method) {","          return function() { return method.toString.call(method); };","        })(method);","      }","      this.prototype[property] = value;","    }","","    return this;","  }","","  return {","    create: create,","    Methods: {","      addMethods: addMethods","    }","  };","})();","(function() {","","  var _toString = Object.prototype.toString,","      _hasOwnProperty = Object.prototype.hasOwnProperty,","      NULL_TYPE = 'Null',","      UNDEFINED_TYPE = 'Undefined',","      BOOLEAN_TYPE = 'Boolean',","      NUMBER_TYPE = 'Number',","      STRING_TYPE = 'String',","      OBJECT_TYPE = 'Object',","      FUNCTION_CLASS = '[object Function]',","      BOOLEAN_CLASS = '[object Boolean]',","      NUMBER_CLASS = '[object Number]',","      STRING_CLASS = '[object String]',","      ARRAY_CLASS = '[object Array]',","      DATE_CLASS = '[object Date]',","      NATIVE_JSON_STRINGIFY_SUPPORT = window.JSON &&","        typeof JSON.stringify === 'function' &&","        JSON.stringify(0) === '0' &&","        typeof JSON.stringify(Prototype.K) === 'undefined';","","","","  var DONT_ENUMS = ['toString', 'toLocaleString', 'valueOf',","   'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];","","  var IS_DONTENUM_BUGGY = (function(){","    for (var p in { toString: 1 }) {","      if (p === 'toString') return false;","    }","    return true;","  })();","","  function Type(o) {","    switch(o) {","      case null: return NULL_TYPE;","      case (void 0): return UNDEFINED_TYPE;","    }","    var type = typeof o;","    switch(type) {","      case 'boolean': return BOOLEAN_TYPE;","      case 'number':  return NUMBER_TYPE;","      case 'string':  return STRING_TYPE;","    }","    return OBJECT_TYPE;","  }","","  function extend(destination, source) {","    for (var property in source)","      destination[property] = source[property];","    return destination;","  }","","  function inspect(object) {","    try {","      if (isUndefined(object)) return 'undefined';","      if (object === null) return 'null';","      return object.inspect ? object.inspect() : String(object);","    } catch (e) {","      if (e instanceof RangeError) return '...';","      throw e;","    }","  }","","  function toJSON(value) {","    return Str('', { '': value }, []);","  }","","  function Str(key, holder, stack) {","    var value = holder[key];","    if (Type(value) === OBJECT_TYPE && typeof value.toJSON === 'function') {","      value = value.toJSON(key);","    }","","    var _class = _toString.call(value);","","    switch (_class) {","      case NUMBER_CLASS:","      case BOOLEAN_CLASS:","      case STRING_CLASS:","        value = value.valueOf();","    }","","    switch (value) {","      case null: return 'null';","      case true: return 'true';","      case false: return 'false';","    }","","    var type = typeof value;","    switch (type) {","      case 'string':","        return value.inspect(true);","      case 'number':","        return isFinite(value) ? String(value) : 'null';","      case 'object':","","        for (var i = 0, length = stack.length; i < length; i++) {","          if (stack[i] === value) {","            throw new TypeError(\"Cyclic reference to '\" + value + \"' in object\");","          }","        }","        stack.push(value);","","        var partial = [];","        if (_class === ARRAY_CLASS) {","          for (var i = 0, length = value.length; i < length; i++) {","            var str = Str(i, value, stack);","            partial.push(typeof str === 'undefined' ? 'null' : str);","          }","          partial = '[' + partial.join(',') + ']';","        } else {","          var keys = Object.keys(value);","          for (var i = 0, length = keys.length; i < length; i++) {","            var key = keys[i], str = Str(key, value, stack);","            if (typeof str !== \"undefined\") {","               partial.push(key.inspect(true)+ ':' + str);","             }","          }","          partial = '{' + partial.join(',') + '}';","        }","        stack.pop();","        return partial;","    }","  }","","  function stringify(object) {","    return JSON.stringify(object);","  }","","  function toQueryString(object) {","    return $H(object).toQueryString();","  }","","  function toHTML(object) {","    return object && object.toHTML ? object.toHTML() : String.interpret(object);","  }","","  function keys(object) {","    if (Type(object) !== OBJECT_TYPE) { throw new TypeError(); }","    var results = [];","    for (var property in object) {","      if (_hasOwnProperty.call(object, property))","        results.push(property);","    }","","    if (IS_DONTENUM_BUGGY) {","      for (var i = 0; property = DONT_ENUMS[i]; i++) {","        if (_hasOwnProperty.call(object, property))","          results.push(property);","      }","    }","","    return results;","  }","","  function values(object) {","    var results = [];","    for (var property in object)","      results.push(object[property]);","    return results;","  }","","  function clone(object) {","    return extend({ }, object);","  }","","  function isElement(object) {","    return !!(object && object.nodeType == 1);","  }","","  function isArray(object) {","    return _toString.call(object) === ARRAY_CLASS;","  }","","  var hasNativeIsArray = (typeof Array.isArray == 'function')","    && Array.isArray([]) && !Array.isArray({});","","  if (hasNativeIsArray) {","    isArray = Array.isArray;","  }","","  function isHash(object) {","    return object instanceof Hash;","  }","","  function isFunction(object) {","    return _toString.call(object) === FUNCTION_CLASS;","  }","","  function isString(object) {","    return _toString.call(object) === STRING_CLASS;","  }","","  function isNumber(object) {","    return _toString.call(object) === NUMBER_CLASS;","  }","","  function isDate(object) {","    return _toString.call(object) === DATE_CLASS;","  }","","  function isUndefined(object) {","    return typeof object === \"undefined\";","  }","","  extend(Object, {","    extend:        extend,","    inspect:       inspect,","    toJSON:        NATIVE_JSON_STRINGIFY_SUPPORT ? stringify : toJSON,","    toQueryString: toQueryString,","    toHTML:        toHTML,","    keys:          Object.keys || keys,","    values:        values,","    clone:         clone,","    isElement:     isElement,","    isArray:       isArray,","    isHash:        isHash,","    isFunction:    isFunction,","    isString:      isString,","    isNumber:      isNumber,","    isDate:        isDate,","    isUndefined:   isUndefined","  });","})();","Object.extend(Function.prototype, (function() {","  var slice = Array.prototype.slice;","","  function update(array, args) {","    var arrayLength = array.length, length = args.length;","    while (length--) array[arrayLength + length] = args[length];","    return array;","  }","","  function merge(array, args) {","    array = slice.call(array, 0);","    return update(array, args);","  }","","  function argumentNames() {","    var names = this.toString().match(/^[\\s\\(]*function[^(]*\\(([^)]*)\\)/)[1]","      .replace(/\\/\\/.*?[\\r\\n]|\\/\\*(?:.|[\\r\\n])*?\\*\\//g, '')","      .replace(/\\s+/g, '').split(',');","    return names.length == 1 && !names[0] ? [] : names;","  }","","","  function bind(context) {","    if (arguments.length < 2 && Object.isUndefined(arguments[0]))","      return this;","","    if (!Object.isFunction(this))","      throw new TypeError(\"The object is not callable.\");","","    var nop = function() {};","    var __method = this, args = slice.call(arguments, 1);","","    var bound = function() {","      var a = merge(args, arguments);","      var c = this instanceof bound ? this : context;","      return __method.apply(c, a);","    };","","    nop.prototype   = this.prototype;","    bound.prototype = new nop();","","    return bound;","  }","","  function bindAsEventListener(context) {","    var __method = this, args = slice.call(arguments, 1);","    return function(event) {","      var a = update([event || window.event], args);","      return __method.apply(context, a);","    }","  }","","  function curry() {","    if (!arguments.length) return this;","    var __method = this, args = slice.call(arguments, 0);","    return function() {","      var a = merge(args, arguments);","      return __method.apply(this, a);","    }","  }","","  function delay(timeout) {","    var __method = this, args = slice.call(arguments, 1);","    timeout = timeout * 1000;","    return window.setTimeout(function() {","      return __method.apply(__method, args);","    }, timeout);","  }","","  function defer() {","    var args = update([0.01], arguments);","    return this.delay.apply(this, args);","  }","","  function wrap(wrapper) {","    var __method = this;","    return function() {","      var a = update([__method.bind(this)], arguments);","      return wrapper.apply(this, a);","    }","  }","","  function methodize() {","    if (this._methodized) return this._methodized;","    var __method = this;","    return this._methodized = function() {","      var a = update([this], arguments);","      return __method.apply(null, a);","    };","  }","","  var extensions = {","    argumentNames:       argumentNames,","    bindAsEventListener: bindAsEventListener,","    curry:               curry,","    delay:               delay,","    defer:               defer,","    wrap:                wrap,","    methodize:           methodize","  };","","  if (!Function.prototype.bind)","    extensions.bind = bind;","","  return extensions;","})());","","","","(function(proto) {","","","  function toISOString() {","    return this.getUTCFullYear() + '-' +","      (this.getUTCMonth() + 1).toPaddedString(2) + '-' +","      this.getUTCDate().toPaddedString(2) + 'T' +","      this.getUTCHours().toPaddedString(2) + ':' +","      this.getUTCMinutes().toPaddedString(2) + ':' +","      this.getUTCSeconds().toPaddedString(2) + 'Z';","  }","","","  function toJSON() {","    return this.toISOString();","  }","","  if (!proto.toISOString) proto.toISOString = toISOString;","  if (!proto.toJSON) proto.toJSON = toJSON;","","})(Date.prototype);","","","RegExp.prototype.match = RegExp.prototype.test;","","RegExp.escape = function(str) {","  return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');","};","var PeriodicalExecuter = Class.create({","  initialize: function(callback, frequency) {","    this.callback = callback;","    this.frequency = frequency;","    this.currentlyExecuting = false;","","    this.registerCallback();","  },","","  registerCallback: function() {","    this.timer = setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);","  },","","  execute: function() {","    this.callback(this);","  },","","  stop: function() {","    if (!this.timer) return;","    clearInterval(this.timer);","    this.timer = null;","  },","","  onTimerEvent: function() {","    if (!this.currentlyExecuting) {","      try {","        this.currentlyExecuting = true;","        this.execute();","        this.currentlyExecuting = false;","      } catch(e) {","        this.currentlyExecuting = false;","        throw e;","      }","    }","  }","});","Object.extend(String, {","  interpret: function(value) {","    return value == null ? '' : String(value);","  },","  specialChar: {","    '\\b': '\\\\b',","    '\\t': '\\\\t',","    '\\n': '\\\\n',","    '\\f': '\\\\f',","    '\\r': '\\\\r',","    '\\\\': '\\\\\\\\'","  }","});","","Object.extend(String.prototype, (function() {","  var NATIVE_JSON_PARSE_SUPPORT = window.JSON &&","    typeof JSON.parse === 'function' &&","    JSON.parse('{\"test\": true}').test;","","  function prepareReplacement(replacement) {","    if (Object.isFunction(replacement)) return replacement;","    var template = new Template(replacement);","    return function(match) { return template.evaluate(match) };","  }","","  function isNonEmptyRegExp(regexp) {","    return regexp.source && regexp.source !== '(?:)';","  }","","","  function gsub(pattern, replacement) {","    var result = '', source = this, match;","    replacement = prepareReplacement(replacement);","","    if (Object.isString(pattern))","      pattern = RegExp.escape(pattern);","","    if (!(pattern.length || isNonEmptyRegExp(pattern))) {","      replacement = replacement('');","      return replacement + source.split('').join(replacement) + replacement;","    }","","    while (source.length > 0) {","      match = source.match(pattern)","      if (match && match[0].length > 0) {","        result += source.slice(0, match.index);","        result += String.interpret(replacement(match));","        source  = source.slice(match.index + match[0].length);","      } else {","        result += source, source = '';","      }","    }","    return result;","  }","","  function sub(pattern, replacement, count) {","    replacement = prepareReplacement(replacement);","    count = Object.isUndefined(count) ? 1 : count;","","    return this.gsub(pattern, function(match) {","      if (--count < 0) return match[0];","      return replacement(match);","    });","  }","","  function scan(pattern, iterator) {","    this.gsub(pattern, iterator);","    return String(this);","  }","","  function truncate(length, truncation) {","    length = length || 30;","    truncation = Object.isUndefined(truncation) ? '...' : truncation;","    return this.length > length ?","      this.slice(0, length - truncation.length) + truncation : String(this);","  }","","  function strip() {","    return this.replace(/^\\s+/, '').replace(/\\s+$/, '');","  }","","  function stripTags() {","    return this.replace(/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\/\\w+>/gi, '');","  }","","  function stripScripts() {","    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');","  }","","  function extractScripts() {","    var matchAll = new RegExp(Prototype.ScriptFragment, 'img'),","        matchOne = new RegExp(Prototype.ScriptFragment, 'im');","    return (this.match(matchAll) || []).map(function(scriptTag) {","      return (scriptTag.match(matchOne) || ['', ''])[1];","    });","  }","","  function evalScripts() {","    return this.extractScripts().map(function(script) { return eval(script); });","  }","","  function escapeHTML() {","    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');","  }","","  function unescapeHTML() {","    return this.stripTags().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');","  }","","","  function toQueryParams(separator) {","    var match = this.strip().match(/([^?#]*)(#.*)?$/);","    if (!match) return { };","","    return match[1].split(separator || '&').inject({ }, function(hash, pair) {","      if ((pair = pair.split('='))[0]) {","        var key = decodeURIComponent(pair.shift()),","            value = pair.length > 1 ? pair.join('=') : pair[0];","","        if (value != undefined) {","          value = value.gsub('+', ' ');","          value = decodeURIComponent(value);","        }","","        if (key in hash) {","          if (!Object.isArray(hash[key])) hash[key] = [hash[key]];","          hash[key].push(value);","        }","        else hash[key] = value;","      }","      return hash;","    });","  }","","  function toArray() {","    return this.split('');","  }","","  function succ() {","    return this.slice(0, this.length - 1) +","      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);","  }","","  function times(count) {","    return count < 1 ? '' : new Array(count + 1).join(this);","  }","","  function camelize() {","    return this.replace(/-+(.)?/g, function(match, chr) {","      return chr ? chr.toUpperCase() : '';","    });","  }","","  function capitalize() {","    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();","  }","","  function underscore() {","    return this.replace(/::/g, '/')","               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')","               .replace(/([a-z\\d])([A-Z])/g, '$1_$2')","               .replace(/-/g, '_')","               .toLowerCase();","  }","","  function dasherize() {","    return this.replace(/_/g, '-');","  }","","  function inspect(useDoubleQuotes) {","    var escapedString = this.replace(/[\\x00-\\x1f\\\\]/g, function(character) {","      if (character in String.specialChar) {","        return String.specialChar[character];","      }","      return '\\\\u00' + character.charCodeAt().toPaddedString(2, 16);","    });","    if (useDoubleQuotes) return '\"' + escapedString.replace(/\"/g, '\\\\\"') + '\"';","    return \"'\" + escapedString.replace(/'/g, '\\\\\\'') + \"'\";","  }","","  function unfilterJSON(filter) {","    return this.replace(filter || Prototype.JSONFilter, '$1');","  }","","  function isJSON() {","    var str = this;","    if (str.blank()) return false;","    str = str.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@');","    str = str.replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']');","    str = str.replace(/(?:^|:|,)(?:\\s*\\[)+/g, '');","    return (/^[\\],:{}\\s]*$/).test(str);","  }","","  function evalJSON(sanitize) {","    var json = this.unfilterJSON(),","        cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;","    if (cx.test(json)) {","      json = json.replace(cx, function (a) {","        return '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);","      });","    }","    try {","      if (!sanitize || json.isJSON()) return eval('(' + json + ')');","    } catch (e) { }","    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());","  }","","  function parseJSON() {","    var json = this.unfilterJSON();","    return JSON.parse(json);","  }","","  function include(pattern) {","    return this.indexOf(pattern) > -1;","  }","","  function startsWith(pattern, position) {","    position = Object.isNumber(position) ? position : 0;","    return this.lastIndexOf(pattern, position) === position;","  }","","  function endsWith(pattern, position) {","    pattern = String(pattern);","    position = Object.isNumber(position) ? position : this.length;","    if (position < 0) position = 0;","    if (position > this.length) position = this.length;","    var d = position - pattern.length;","    return d >= 0 && this.indexOf(pattern, d) === d;","  }","","  function empty() {","    return this == '';","  }","","  function blank() {","    return /^\\s*$/.test(this);","  }","","  function interpolate(object, pattern) {","    return new Template(this, pattern).evaluate(object);","  }","","  return {","    gsub:           gsub,","    sub:            sub,","    scan:           scan,","    truncate:       truncate,","    strip:          String.prototype.trim || strip,","    stripTags:      stripTags,","    stripScripts:   stripScripts,","    extractScripts: extractScripts,","    evalScripts:    evalScripts,","    escapeHTML:     escapeHTML,","    unescapeHTML:   unescapeHTML,","    toQueryParams:  toQueryParams,","    parseQuery:     toQueryParams,","    toArray:        toArray,","    succ:           succ,","    times:          times,","    camelize:       camelize,","    capitalize:     capitalize,","    underscore:     underscore,","    dasherize:      dasherize,","    inspect:        inspect,","    unfilterJSON:   unfilterJSON,","    isJSON:         isJSON,","    evalJSON:       NATIVE_JSON_PARSE_SUPPORT ? parseJSON : evalJSON,","    include:        include,","    startsWith:     String.prototype.startsWith || startsWith,","    endsWith:       String.prototype.endsWith || endsWith,","    empty:          empty,","    blank:          blank,","    interpolate:    interpolate","  };","})());","","var Template = Class.create({","  initialize: function(template, pattern) {","    this.template = template.toString();","    this.pattern = pattern || Template.Pattern;","  },","","  evaluate: function(object) {","    if (object && Object.isFunction(object.toTemplateReplacements))","      object = object.toTemplateReplacements();","","    return this.template.gsub(this.pattern, function(match) {","      if (object == null) return (match[1] + '');","","      var before = match[1] || '';","      if (before == '\\\\') return match[2];","","      var ctx = object, expr = match[3],","          pattern = /^([^.[]+|\\[((?:.*?[^\\\\])?)\\])(\\.|\\[|$)/;","","      match = pattern.exec(expr);","      if (match == null) return before;","","      while (match != null) {","        var comp = match[1].startsWith('[') ? match[2].replace(/\\\\\\\\]/g, ']') : match[1];","        ctx = ctx[comp];","        if (null == ctx || '' == match[3]) break;","        expr = expr.substring('[' == match[3] ? match[1].length : match[0].length);","        match = pattern.exec(expr);","      }","","      return before + String.interpret(ctx);","    });","  }","});","Template.Pattern = /(^|.|\\r|\\n)(#\\{(.*?)\\})/;","","var $break = { };","","var Enumerable = (function() {","  function each(iterator, context) {","    try {","      this._each(iterator, context);","    } catch (e) {","      if (e != $break) throw e;","    }","    return this;","  }","","  function eachSlice(number, iterator, context) {","    var index = -number, slices = [], array = this.toArray();","    if (number < 1) return array;","    while ((index += number) < array.length)","      slices.push(array.slice(index, index+number));","    return slices.collect(iterator, context);","  }","","  function all(iterator, context) {","    iterator = iterator || Prototype.K;","    var result = true;","    this.each(function(value, index) {","      result = result && !!iterator.call(context, value, index, this);","      if (!result) throw $break;","    }, this);","    return result;","  }","","  function any(iterator, context) {","    iterator = iterator || Prototype.K;","    var result = false;","    this.each(function(value, index) {","      if (result = !!iterator.call(context, value, index, this))","        throw $break;","    }, this);","    return result;","  }","","  function collect(iterator, context) {","    iterator = iterator || Prototype.K;","    var results = [];","    this.each(function(value, index) {","      results.push(iterator.call(context, value, index, this));","    }, this);","    return results;","  }","","  function detect(iterator, context) {","    var result;","    this.each(function(value, index) {","      if (iterator.call(context, value, index, this)) {","        result = value;","        throw $break;","      }","    }, this);","    return result;","  }","","  function findAll(iterator, context) {","    var results = [];","    this.each(function(value, index) {","      if (iterator.call(context, value, index, this))","        results.push(value);","    }, this);","    return results;","  }","","  function grep(filter, iterator, context) {","    iterator = iterator || Prototype.K;","    var results = [];","","    if (Object.isString(filter))","      filter = new RegExp(RegExp.escape(filter));","","    this.each(function(value, index) {","      if (filter.match(value))","        results.push(iterator.call(context, value, index, this));","    }, this);","    return results;","  }","","  function include(object) {","    if (Object.isFunction(this.indexOf) && this.indexOf(object) != -1)","      return true;","","    var found = false;","    this.each(function(value) {","      if (value == object) {","        found = true;","        throw $break;","      }","    });","    return found;","  }","","  function inGroupsOf(number, fillWith) {","    fillWith = Object.isUndefined(fillWith) ? null : fillWith;","    return this.eachSlice(number, function(slice) {","      while(slice.length < number) slice.push(fillWith);","      return slice;","    });","  }","","  function inject(memo, iterator, context) {","    this.each(function(value, index) {","      memo = iterator.call(context, memo, value, index, this);","    }, this);","    return memo;","  }","","  function invoke(method) {","    var args = $A(arguments).slice(1);","    return this.map(function(value) {","      return value[method].apply(value, args);","    });","  }","","  function max(iterator, context) {","    iterator = iterator || Prototype.K;","    var result;","    this.each(function(value, index) {","      value = iterator.call(context, value, index, this);","      if (result == null || value >= result)","        result = value;","    }, this);","    return result;","  }","","  function min(iterator, context) {","    iterator = iterator || Prototype.K;","    var result;","    this.each(function(value, index) {","      value = iterator.call(context, value, index, this);","      if (result == null || value < result)","        result = value;","    }, this);","    return result;","  }","","  function partition(iterator, context) {","    iterator = iterator || Prototype.K;","    var trues = [], falses = [];","    this.each(function(value, index) {","      (iterator.call(context, value, index, this) ?","        trues : falses).push(value);","    }, this);","    return [trues, falses];","  }","","  function pluck(property) {","    var results = [];","    this.each(function(value) {","      results.push(value[property]);","    });","    return results;","  }","","  function reject(iterator, context) {","    var results = [];","    this.each(function(value, index) {","      if (!iterator.call(context, value, index, this))","        results.push(value);","    }, this);","    return results;","  }","","  function sortBy(iterator, context) {","    return this.map(function(value, index) {","      return {","        value: value,","        criteria: iterator.call(context, value, index, this)","      };","    }, this).sort(function(left, right) {","      var a = left.criteria, b = right.criteria;","      return a < b ? -1 : a > b ? 1 : 0;","    }).pluck('value');","  }","","  function toArray() {","    return this.map();","  }","","  function zip() {","    var iterator = Prototype.K, args = $A(arguments);","    if (Object.isFunction(args.last()))","      iterator = args.pop();","","    var collections = [this].concat(args).map($A);","    return this.map(function(value, index) {","      return iterator(collections.pluck(index));","    });","  }","","  function size() {","    return this.toArray().length;","  }","","  function inspect() {","    return '#<Enumerable:' + this.toArray().inspect() + '>';","  }","","","","","","","","","","  return {","    each:       each,","    eachSlice:  eachSlice,","    all:        all,","    every:      all,","    any:        any,","    some:       any,","    collect:    collect,","    map:        collect,","    detect:     detect,","    findAll:    findAll,","    select:     findAll,","    filter:     findAll,","    grep:       grep,","    include:    include,","    member:     include,","    inGroupsOf: inGroupsOf,","    inject:     inject,","    invoke:     invoke,","    max:        max,","    min:        min,","    partition:  partition,","    pluck:      pluck,","    reject:     reject,","    sortBy:     sortBy,","    toArray:    toArray,","    entries:    toArray,","    zip:        zip,","    size:       size,","    inspect:    inspect,","    find:       detect","  };","})();","","function $A(iterable) {","  if (!iterable) return [];","  if ('toArray' in Object(iterable)) return iterable.toArray();","  var length = iterable.length || 0, results = new Array(length);","  while (length--) results[length] = iterable[length];","  return results;","}","","","function $w(string) {","  if (!Object.isString(string)) return [];","  string = string.strip();","  return string ? string.split(/\\s+/) : [];","}","","Array.from = $A;","","","(function() {","  var arrayProto = Array.prototype,","      slice = arrayProto.slice,","      _each = arrayProto.forEach; // use native browser JS 1.6 implementation if available","","  function each(iterator, context) {","    for (var i = 0, length = this.length >>> 0; i < length; i++) {","      if (i in this) iterator.call(context, this[i], i, this);","    }","  }","  if (!_each) _each = each;","","  function clear() {","    this.length = 0;","    return this;","  }","","  function first() {","    return this[0];","  }","","  function last() {","    return this[this.length - 1];","  }","","  function compact() {","    return this.select(function(value) {","      return value != null;","    });","  }","","  function flatten() {","    return this.inject([], function(array, value) {","      if (Object.isArray(value))","        return array.concat(value.flatten());","      array.push(value);","      return array;","    });","  }","","  function without() {","    var values = slice.call(arguments, 0);","    return this.select(function(value) {","      return !values.include(value);","    });","  }","","  function reverse(inline) {","    return (inline === false ? this.toArray() : this)._reverse();","  }","","  function uniq(sorted) {","    return this.inject([], function(array, value, index) {","      if (0 == index || (sorted ? array.last() != value : !array.include(value)))","        array.push(value);","      return array;","    });","  }","","  function intersect(array) {","    return this.uniq().findAll(function(item) {","      return array.indexOf(item) !== -1;","    });","  }","","","  function clone() {","    return slice.call(this, 0);","  }","","  function size() {","    return this.length;","  }","","  function inspect() {","    return '[' + this.map(Object.inspect).join(', ') + ']';","  }","","  function indexOf(item, i) {","    if (this == null) throw new TypeError();","","    var array = Object(this), length = array.length >>> 0;","    if (length === 0) return -1;","","    i = Number(i);","    if (isNaN(i)) {","      i = 0;","    } else if (i !== 0 && isFinite(i)) {","      i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));","    }","","    if (i > length) return -1;","","    var k = i >= 0 ? i : Math.max(length - Math.abs(i), 0);","    for (; k < length; k++)","      if (k in array && array[k] === item) return k;","    return -1;","  }","","","  function lastIndexOf(item, i) {","    if (this == null) throw new TypeError();","","    var array = Object(this), length = array.length >>> 0;","    if (length === 0) return -1;","","    if (!Object.isUndefined(i)) {","      i = Number(i);","      if (isNaN(i)) {","        i = 0;","      } else if (i !== 0 && isFinite(i)) {","        i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));","      }","    } else {","      i = length;","    }","","    var k = i >= 0 ? Math.min(i, length - 1) :","     length - Math.abs(i);","","    for (; k >= 0; k--)","      if (k in array && array[k] === item) return k;","    return -1;","  }","","  function concat(_) {","    var array = [], items = slice.call(arguments, 0), item, n = 0;","    items.unshift(this);","    for (var i = 0, length = items.length; i < length; i++) {","      item = items[i];","      if (Object.isArray(item) && !('callee' in item)) {","        for (var j = 0, arrayLength = item.length; j < arrayLength; j++) {","          if (j in item) array[n] = item[j];","          n++;","        }","      } else {","        array[n++] = item;","      }","    }","    array.length = n;","    return array;","  }","","","  function wrapNative(method) {","    return function() {","      if (arguments.length === 0) {","        return method.call(this, Prototype.K);","      } else if (arguments[0] === undefined) {","        var args = slice.call(arguments, 1);","        args.unshift(Prototype.K);","        return method.apply(this, args);","      } else {","        return method.apply(this, arguments);","      }","    };","  }","","","  function map(iterator) {","    if (this == null) throw new TypeError();","    iterator = iterator || Prototype.K;","","    var object = Object(this);","    var results = [], context = arguments[1], n = 0;","","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","      if (i in object) {","        results[n] = iterator.call(context, object[i], i, object);","      }","      n++;","    }","    results.length = n;","    return results;","  }","","  if (arrayProto.map) {","    map = wrapNative(Array.prototype.map);","  }","","  function filter(iterator) {","    if (this == null || !Object.isFunction(iterator))","      throw new TypeError();","","    var object = Object(this);","    var results = [], context = arguments[1], value;","","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","      if (i in object) {","        value = object[i];","        if (iterator.call(context, value, i, object)) {","          results.push(value);","        }","      }","    }","    return results;","  }","","  if (arrayProto.filter) {","    filter = Array.prototype.filter;","  }","","  function some(iterator) {","    if (this == null) throw new TypeError();","    iterator = iterator || Prototype.K;","    var context = arguments[1];","","    var object = Object(this);","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","      if (i in object && iterator.call(context, object[i], i, object)) {","        return true;","      }","    }","","    return false;","  }","","  if (arrayProto.some) {","    var some = wrapNative(Array.prototype.some);","  }","","","  function every(iterator) {","    if (this == null) throw new TypeError();","    iterator = iterator || Prototype.K;","    var context = arguments[1];","","    var object = Object(this);","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","      if (i in object && !iterator.call(context, object[i], i, object)) {","        return false;","      }","    }","","    return true;","  }","","  if (arrayProto.every) {","    var every = wrapNative(Array.prototype.every);","  }","","  var _reduce = arrayProto.reduce;","  function inject(memo, iterator) {","    iterator = iterator || Prototype.K;","    var context = arguments[2];","    return _reduce.call(this, iterator.bind(context), memo);","  }","","  if (!arrayProto.reduce) {","    var inject = Enumerable.inject;","  }","","  Object.extend(arrayProto, Enumerable);","","  if (!arrayProto._reverse)","    arrayProto._reverse = arrayProto.reverse;","","  Object.extend(arrayProto, {","    _each:     _each,","","    map:       map,","    collect:   map,","    select:    filter,","    filter:    filter,","    findAll:   filter,","    some:      some,","    any:       some,","    every:     every,","    all:       every,","    inject:    inject,","","    clear:     clear,","    first:     first,","    last:      last,","    compact:   compact,","    flatten:   flatten,","    without:   without,","    reverse:   reverse,","    uniq:      uniq,","    intersect: intersect,","    clone:     clone,","    toArray:   clone,","    size:      size,","    inspect:   inspect","  });","","  var CONCAT_ARGUMENTS_BUGGY = (function() {","    return [].concat(arguments)[0][0] !== 1;","  })(1,2);","","  if (CONCAT_ARGUMENTS_BUGGY) arrayProto.concat = concat;","","  if (!arrayProto.indexOf) arrayProto.indexOf = indexOf;","  if (!arrayProto.lastIndexOf) arrayProto.lastIndexOf = lastIndexOf;","})();","function $H(object) {","  return new Hash(object);","};","","var Hash = Class.create(Enumerable, (function() {","  function initialize(object) {","    this._object = Object.isHash(object) ? object.toObject() : Object.clone(object);","  }","","","  function _each(iterator, context) {","    var i = 0;","    for (var key in this._object) {","      var value = this._object[key], pair = [key, value];","      pair.key = key;","      pair.value = value;","      iterator.call(context, pair, i);","      i++;","    }","  }","","  function set(key, value) {","    return this._object[key] = value;","  }","","  function get(key) {","    if (this._object[key] !== Object.prototype[key])","      return this._object[key];","  }","","  function unset(key) {","    var value = this._object[key];","    delete this._object[key];","    return value;","  }","","  function toObject() {","    return Object.clone(this._object);","  }","","","","  function keys() {","    return this.pluck('key');","  }","","  function values() {","    return this.pluck('value');","  }","","  function index(value) {","    var match = this.detect(function(pair) {","      return pair.value === value;","    });","    return match && match.key;","  }","","  function merge(object) {","    return this.clone().update(object);","  }","","  function update(object) {","    return new Hash(object).inject(this, function(result, pair) {","      result.set(pair.key, pair.value);","      return result;","    });","  }","","  function toQueryPair(key, value) {","    if (Object.isUndefined(value)) return key;","","    value = String.interpret(value);","","    value = value.gsub(/(\\r)?\\n/, '\\r\\n');","    value = encodeURIComponent(value);","    value = value.gsub(/%20/, '+');","    return key + '=' + value;","  }","","  function toQueryString() {","    return this.inject([], function(results, pair) {","      var key = encodeURIComponent(pair.key), values = pair.value;","","      if (values && typeof values == 'object') {","        if (Object.isArray(values)) {","          var queryValues = [];","          for (var i = 0, len = values.length, value; i < len; i++) {","            value = values[i];","            queryValues.push(toQueryPair(key, value));","          }","          return results.concat(queryValues);","        }","      } else results.push(toQueryPair(key, values));","      return results;","    }).join('&');","  }","","  function inspect() {","    return '#<Hash:{' + this.map(function(pair) {","      return pair.map(Object.inspect).join(': ');","    }).join(', ') + '}>';","  }","","  function clone() {","    return new Hash(this);","  }","","  return {","    initialize:             initialize,","    _each:                  _each,","    set:                    set,","    get:                    get,","    unset:                  unset,","    toObject:               toObject,","    toTemplateReplacements: toObject,","    keys:                   keys,","    values:                 values,","    index:                  index,","    merge:                  merge,","    update:                 update,","    toQueryString:          toQueryString,","    inspect:                inspect,","    toJSON:                 toObject,","    clone:                  clone","  };","})());","","Hash.from = $H;","Object.extend(Number.prototype, (function() {","  function toColorPart() {","    return this.toPaddedString(2, 16);","  }","","  function succ() {","    return this + 1;","  }","","  function times(iterator, context) {","    $R(0, this, true).each(iterator, context);","    return this;","  }","","  function toPaddedString(length, radix) {","    var string = this.toString(radix || 10);","    return '0'.times(length - string.length) + string;","  }","","  function abs() {","    return Math.abs(this);","  }","","  function round() {","    return Math.round(this);","  }","","  function ceil() {","    return Math.ceil(this);","  }","","  function floor() {","    return Math.floor(this);","  }","","  return {","    toColorPart:    toColorPart,","    succ:           succ,","    times:          times,","    toPaddedString: toPaddedString,","    abs:            abs,","    round:          round,","    ceil:           ceil,","    floor:          floor","  };","})());","","function $R(start, end, exclusive) {","  return new ObjectRange(start, end, exclusive);","}","","var ObjectRange = Class.create(Enumerable, (function() {","  function initialize(start, end, exclusive) {","    this.start = start;","    this.end = end;","    this.exclusive = exclusive;","  }","","  function _each(iterator, context) {","    var value = this.start, i;","    for (i = 0; this.include(value); i++) {","      iterator.call(context, value, i);","      value = value.succ();","    }","  }","","  function include(value) {","    if (value < this.start)","      return false;","    if (this.exclusive)","      return value < this.end;","    return value <= this.end;","  }","","  return {","    initialize: initialize,","    _each:      _each,","    include:    include","  };","})());","","","","var Abstract = { };","","","var Try = {","  these: function() {","    var returnValue;","","    for (var i = 0, length = arguments.length; i < length; i++) {","      var lambda = arguments[i];","      try {","        returnValue = lambda();","        break;","      } catch (e) { }","    }","","    return returnValue;","  }","};","","var Ajax = {","  getTransport: function() {","    return Try.these(","      function() {return new XMLHttpRequest()},","      function() {return new ActiveXObject('Msxml2.XMLHTTP')},","      function() {return new ActiveXObject('Microsoft.XMLHTTP')}","    ) || false;","  },","","  activeRequestCount: 0","};","","Ajax.Responders = {","  responders: [],","","  _each: function(iterator, context) {","    this.responders._each(iterator, context);","  },","","  register: function(responder) {","    if (!this.include(responder))","      this.responders.push(responder);","  },","","  unregister: function(responder) {","    this.responders = this.responders.without(responder);","  },","","  dispatch: function(callback, request, transport, json) {","    this.each(function(responder) {","      if (Object.isFunction(responder[callback])) {","        try {","          responder[callback].apply(responder, [request, transport, json]);","        } catch (e) { }","      }","    });","  }","};","","Object.extend(Ajax.Responders, Enumerable);","","Ajax.Responders.register({","  onCreate:   function() { Ajax.activeRequestCount++ },","  onComplete: function() { Ajax.activeRequestCount-- }","});","Ajax.Base = Class.create({","  initialize: function(options) {","    this.options = {","      method:       'post',","      asynchronous: true,","      contentType:  'application/x-www-form-urlencoded',","      encoding:     'UTF-8',","      parameters:   '',","      evalJSON:     true,","      evalJS:       true","    };","    Object.extend(this.options, options || { });","","    this.options.method = this.options.method.toLowerCase();","","    if (Object.isHash(this.options.parameters))","      this.options.parameters = this.options.parameters.toObject();","  }","});","Ajax.Request = Class.create(Ajax.Base, {","  _complete: false,","","  initialize: function($super, url, options) {","    $super(options);","    this.transport = Ajax.getTransport();","    this.request(url);","  },","","  request: function(url) {","    this.url = url;","    this.method = this.options.method;","    var params = Object.isString(this.options.parameters) ?","          this.options.parameters :","          Object.toQueryString(this.options.parameters);","","    if (!['get', 'post'].include(this.method)) {","      params += (params ? '&' : '') + \"_method=\" + this.method;","      this.method = 'post';","    }","","    if (params && this.method === 'get') {","      this.url += (this.url.include('?') ? '&' : '?') + params;","    }","","    this.parameters = params.toQueryParams();","","    try {","      var response = new Ajax.Response(this);","      if (this.options.onCreate) this.options.onCreate(response);","      Ajax.Responders.dispatch('onCreate', this, response);","","      this.transport.open(this.method.toUpperCase(), this.url,","        this.options.asynchronous);","","      if (this.options.asynchronous) this.respondToReadyState.bind(this).defer(1);","","      this.transport.onreadystatechange = this.onStateChange.bind(this);","      this.setRequestHeaders();","","      this.body = this.method == 'post' ? (this.options.postBody || params) : null;","      this.transport.send(this.body);","","      /* Force Firefox to handle ready state 4 for synchronous requests */","      if (!this.options.asynchronous && this.transport.overrideMimeType)","        this.onStateChange();","","    }","    catch (e) {","      this.dispatchException(e);","    }","  },","","  onStateChange: function() {","    var readyState = this.transport.readyState;","    if (readyState > 1 && !((readyState == 4) && this._complete))","      this.respondToReadyState(this.transport.readyState);","  },","","  setRequestHeaders: function() {","    var headers = {","      'X-Requested-With': 'XMLHttpRequest',","      'X-Prototype-Version': Prototype.Version,","      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'","    };","","    if (this.method == 'post') {","      headers['Content-type'] = this.options.contentType +","        (this.options.encoding ? '; charset=' + this.options.encoding : '');","","      /* Force \"Connection: close\" for older Mozilla browsers to work","       * around a bug where XMLHttpRequest sends an incorrect","       * Content-length header. See Mozilla Bugzilla #246651.","       */","      if (this.transport.overrideMimeType &&","          (navigator.userAgent.match(/Gecko\\/(\\d{4})/) || [0,2005])[1] < 2005)","            headers['Connection'] = 'close';","    }","","    if (typeof this.options.requestHeaders == 'object') {","      var extras = this.options.requestHeaders;","","      if (Object.isFunction(extras.push))","        for (var i = 0, length = extras.length; i < length; i += 2)","          headers[extras[i]] = extras[i+1];","      else","        $H(extras).each(function(pair) { headers[pair.key] = pair.value });","    }","","    for (var name in headers)","      if (headers[name] != null)","        this.transport.setRequestHeader(name, headers[name]);","  },","","  success: function() {","    var status = this.getStatus();","    return !status || (status >= 200 && status < 300) || status == 304;","  },","","  getStatus: function() {","    try {","      if (this.transport.status === 1223) return 204;","      return this.transport.status || 0;","    } catch (e) { return 0 }","  },","","  respondToReadyState: function(readyState) {","    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);","","    if (state == 'Complete') {","      try {","        this._complete = true;","        (this.options['on' + response.status]","         || this.options['on' + (this.success() ? 'Success' : 'Failure')]","         || Prototype.emptyFunction)(response, response.headerJSON);","      } catch (e) {","        this.dispatchException(e);","      }","","      var contentType = response.getHeader('Content-type');","      if (this.options.evalJS == 'force'","          || (this.options.evalJS && this.isSameOrigin() && contentType","          && contentType.match(/^\\s*(text|application)\\/(x-)?(java|ecma)script(;.*)?\\s*$/i)))","        this.evalResponse();","    }","","    try {","      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);","      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);","    } catch (e) {","      this.dispatchException(e);","    }","","    if (state == 'Complete') {","      this.transport.onreadystatechange = Prototype.emptyFunction;","    }","  },","","  isSameOrigin: function() {","    var m = this.url.match(/^\\s*https?:\\/\\/[^\\/]*/);","    return !m || (m[0] == '#{protocol}//#{domain}#{port}'.interpolate({","      protocol: location.protocol,","      domain: document.domain,","      port: location.port ? ':' + location.port : ''","    }));","  },","","  getHeader: function(name) {","    try {","      return this.transport.getResponseHeader(name) || null;","    } catch (e) { return null; }","  },","","  evalResponse: function() {","    try {","      return eval((this.transport.responseText || '').unfilterJSON());","    } catch (e) {","      this.dispatchException(e);","    }","  },","","  dispatchException: function(exception) {","    (this.options.onException || Prototype.emptyFunction)(this, exception);","    Ajax.Responders.dispatch('onException', this, exception);","  }","});","","Ajax.Request.Events =","  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];","","","","","","","","","Ajax.Response = Class.create({","  initialize: function(request){","    this.request = request;","    var transport  = this.transport  = request.transport,","        readyState = this.readyState = transport.readyState;","","    if ((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {","      this.status       = this.getStatus();","      this.statusText   = this.getStatusText();","      this.responseText = String.interpret(transport.responseText);","      this.headerJSON   = this._getHeaderJSON();","    }","","    if (readyState == 4) {","      var xml = transport.responseXML;","      this.responseXML  = Object.isUndefined(xml) ? null : xml;","      this.responseJSON = this._getResponseJSON();","    }","  },","","  status:      0,","","  statusText: '',","","  getStatus: Ajax.Request.prototype.getStatus,","","  getStatusText: function() {","    try {","      return this.transport.statusText || '';","    } catch (e) { return '' }","  },","","  getHeader: Ajax.Request.prototype.getHeader,","","  getAllHeaders: function() {","    try {","      return this.getAllResponseHeaders();","    } catch (e) { return null }","  },","","  getResponseHeader: function(name) {","    return this.transport.getResponseHeader(name);","  },","","  getAllResponseHeaders: function() {","    return this.transport.getAllResponseHeaders();","  },","","  _getHeaderJSON: function() {","    var json = this.getHeader('X-JSON');","    if (!json) return null;","","    try {","      json = decodeURIComponent(escape(json));","    } catch(e) {","    }","","    try {","      return json.evalJSON(this.request.options.sanitizeJSON ||","        !this.request.isSameOrigin());","    } catch (e) {","      this.request.dispatchException(e);","    }","  },","","  _getResponseJSON: function() {","    var options = this.request.options;","    if (!options.evalJSON || (options.evalJSON != 'force' &&","      !(this.getHeader('Content-type') || '').include('application/json')) ||","        this.responseText.blank())","          return null;","    try {","      return this.responseText.evalJSON(options.sanitizeJSON ||","        !this.request.isSameOrigin());","    } catch (e) {","      this.request.dispatchException(e);","    }","  }","});","","Ajax.Updater = Class.create(Ajax.Request, {","  initialize: function($super, container, url, options) {","    this.container = {","      success: (container.success || container),","      failure: (container.failure || (container.success ? null : container))","    };","","    options = Object.clone(options);","    var onComplete = options.onComplete;","    options.onComplete = (function(response, json) {","      this.updateContent(response.responseText);","      if (Object.isFunction(onComplete)) onComplete(response, json);","    }).bind(this);","","    $super(url, options);","  },","","  updateContent: function(responseText) {","    var receiver = this.container[this.success() ? 'success' : 'failure'],","        options = this.options;","","    if (!options.evalScripts) responseText = responseText.stripScripts();","","    if (receiver = $(receiver)) {","      if (options.insertion) {","        if (Object.isString(options.insertion)) {","          var insertion = { }; insertion[options.insertion] = responseText;","          receiver.insert(insertion);","        }","        else options.insertion(receiver, responseText);","      }","      else receiver.update(responseText);","    }","  }","});","","Ajax.PeriodicalUpdater = Class.create(Ajax.Base, {","  initialize: function($super, container, url, options) {","    $super(options);","    this.onComplete = this.options.onComplete;","","    this.frequency = (this.options.frequency || 2);","    this.decay = (this.options.decay || 1);","","    this.updater = { };","    this.container = container;","    this.url = url;","","    this.start();","  },","","  start: function() {","    this.options.onComplete = this.updateComplete.bind(this);","    this.onTimerEvent();","  },","","  stop: function() {","    this.updater.options.onComplete = undefined;","    clearTimeout(this.timer);","    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);","  },","","  updateComplete: function(response) {","    if (this.options.decay) {","      this.decay = (response.responseText == this.lastText ?","        this.decay * this.options.decay : 1);","","      this.lastText = response.responseText;","    }","    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);","  },","","  onTimerEvent: function() {","    this.updater = new Ajax.Updater(this.container, this.url, this.options);","  }","});","","(function(GLOBAL) {","","  var UNDEFINED;","  var SLICE = Array.prototype.slice;","","  var DIV = document.createElement('div');","","","  function $(element) {","    if (arguments.length > 1) {","      for (var i = 0, elements = [], length = arguments.length; i < length; i++)","        elements.push($(arguments[i]));","      return elements;","    }","","    if (Object.isString(element))","      element = document.getElementById(element);","    return Element.extend(element);","  }","","  GLOBAL.$ = $;","","","  if (!GLOBAL.Node) GLOBAL.Node = {};","","  if (!GLOBAL.Node.ELEMENT_NODE) {","    Object.extend(GLOBAL.Node, {","      ELEMENT_NODE:                1,","      ATTRIBUTE_NODE:              2,","      TEXT_NODE:                   3,","      CDATA_SECTION_NODE:          4,","      ENTITY_REFERENCE_NODE:       5,","      ENTITY_NODE:                 6,","      PROCESSING_INSTRUCTION_NODE: 7,","      COMMENT_NODE:                8,","      DOCUMENT_NODE:               9,","      DOCUMENT_TYPE_NODE:         10,","      DOCUMENT_FRAGMENT_NODE:     11,","      NOTATION_NODE:              12","    });","  }","","  var ELEMENT_CACHE = {};","","  function shouldUseCreationCache(tagName, attributes) {","    if (tagName === 'select') return false;","    if ('type' in attributes) return false;","    return true;","  }","","  var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX = (function(){","    try {","      var el = document.createElement('<input name=\"x\">');","      return el.tagName.toLowerCase() === 'input' && el.name === 'x';","    }","    catch(err) {","      return false;","    }","  })();","","","  var oldElement = GLOBAL.Element;","  function Element(tagName, attributes) {","    attributes = attributes || {};","    tagName = tagName.toLowerCase();","","    if (HAS_EXTENDED_CREATE_ELEMENT_SYNTAX && attributes.name) {","      tagName = '<' + tagName + ' name=\"' + attributes.name + '\">';","      delete attributes.name;","      return Element.writeAttribute(document.createElement(tagName), attributes);","    }","","    if (!ELEMENT_CACHE[tagName])","      ELEMENT_CACHE[tagName] = Element.extend(document.createElement(tagName));","","    var node = shouldUseCreationCache(tagName, attributes) ?","     ELEMENT_CACHE[tagName].cloneNode(false) : document.createElement(tagName);","","    return Element.writeAttribute(node, attributes);","  }","","  GLOBAL.Element = Element;","","  Object.extend(GLOBAL.Element, oldElement || {});","  if (oldElement) GLOBAL.Element.prototype = oldElement.prototype;","","  Element.Methods = { ByTag: {}, Simulated: {} };","","  var methods = {};","","  var INSPECT_ATTRIBUTES = { id: 'id', className: 'class' };","  function inspect(element) {","    element = $(element);","    var result = '<' + element.tagName.toLowerCase();","","    var attribute, value;","    for (var property in INSPECT_ATTRIBUTES) {","      attribute = INSPECT_ATTRIBUTES[property];","      value = (element[property] || '').toString();","      if (value) result += ' ' + attribute + '=' + value.inspect(true);","    }","","    return result + '>';","  }","","  methods.inspect = inspect;","","","  function visible(element) {","    return $(element).style.display !== 'none';","  }","","  function toggle(element, bool) {","    element = $(element);","    if (Object.isUndefined(bool))","      bool = !Element.visible(element);","    Element[bool ? 'show' : 'hide'](element);","","    return element;","  }","","  function hide(element) {","    element = $(element);","    element.style.display = 'none';","    return element;","  }","","  function show(element) {","    element = $(element);","    element.style.display = '';","    return element;","  }","","","  Object.extend(methods, {","    visible: visible,","    toggle:  toggle,","    hide:    hide,","    show:    show","  });","","","  function remove(element) {","    element = $(element);","    element.parentNode.removeChild(element);","    return element;","  }","","  var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){","    var el = document.createElement(\"select\"),","        isBuggy = true;","    el.innerHTML = \"<option value=\\\"test\\\">test</option>\";","    if (el.options && el.options[0]) {","      isBuggy = el.options[0].nodeName.toUpperCase() !== \"OPTION\";","    }","    el = null;","    return isBuggy;","  })();","","  var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){","    try {","      var el = document.createElement(\"table\");","      if (el && el.tBodies) {","        el.innerHTML = \"<tbody><tr><td>test</td></tr></tbody>\";","        var isBuggy = typeof el.tBodies[0] == \"undefined\";","        el = null;","        return isBuggy;","      }","    } catch (e) {","      return true;","    }","  })();","","  var LINK_ELEMENT_INNERHTML_BUGGY = (function() {","    try {","      var el = document.createElement('div');","      el.innerHTML = \"<link />\";","      var isBuggy = (el.childNodes.length === 0);","      el = null;","      return isBuggy;","    } catch(e) {","      return true;","    }","  })();","","  var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||","   TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;","","  var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {","    var s = document.createElement(\"script\"),","        isBuggy = false;","    try {","      s.appendChild(document.createTextNode(\"\"));","      isBuggy = !s.firstChild ||","        s.firstChild && s.firstChild.nodeType !== 3;","    } catch (e) {","      isBuggy = true;","    }","    s = null;","    return isBuggy;","  })();","","  function update(element, content) {","    element = $(element);","","    var descendants = element.getElementsByTagName('*'),","     i = descendants.length;","    while (i--) purgeElement(descendants[i]);","","    if (content && content.toElement)","      content = content.toElement();","","    if (Object.isElement(content))","      return element.update().insert(content);","","","    content = Object.toHTML(content);","    var tagName = element.tagName.toUpperCase();","","    if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {","      element.text = content;","      return element;","    }","","    if (ANY_INNERHTML_BUGGY) {","      if (tagName in INSERTION_TRANSLATIONS.tags) {","        while (element.firstChild)","          element.removeChild(element.firstChild);","","        var nodes = getContentFromAnonymousElement(tagName, content.stripScripts());","        for (var i = 0, node; node = nodes[i]; i++)","          element.appendChild(node);","","      } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {","        while (element.firstChild)","          element.removeChild(element.firstChild);","","        var nodes = getContentFromAnonymousElement(tagName,","         content.stripScripts(), true);","","        for (var i = 0, node; node = nodes[i]; i++)","          element.appendChild(node);","      } else {","        element.innerHTML = content.stripScripts();","      }","    } else {","      element.innerHTML = content.stripScripts();","    }","","    content.evalScripts.bind(content).defer();","    return element;","  }","","  function replace(element, content) {","    element = $(element);","","    if (content && content.toElement) {","      content = content.toElement();","    } else if (!Object.isElement(content)) {","      content = Object.toHTML(content);","      var range = element.ownerDocument.createRange();","      range.selectNode(element);","      content.evalScripts.bind(content).defer();","      content = range.createContextualFragment(content.stripScripts());","    }","","    element.parentNode.replaceChild(content, element);","    return element;","  }","","  var INSERTION_TRANSLATIONS = {","    before: function(element, node) {","      element.parentNode.insertBefore(node, element);","    },","    top: function(element, node) {","      element.insertBefore(node, element.firstChild);","    },","    bottom: function(element, node) {","      element.appendChild(node);","    },","    after: function(element, node) {","      element.parentNode.insertBefore(node, element.nextSibling);","    },","","    tags: {","      TABLE:  ['<table>',                '</table>',                   1],","      TBODY:  ['<table><tbody>',         '</tbody></table>',           2],","      TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],","      TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],","      SELECT: ['<select>',               '</select>',                  1]","    }","  };","","  var tags = INSERTION_TRANSLATIONS.tags;","","  Object.extend(tags, {","    THEAD: tags.TBODY,","    TFOOT: tags.TBODY,","    TH:    tags.TD","  });","","  function replace_IE(element, content) {","    element = $(element);","    if (content && content.toElement)","      content = content.toElement();","    if (Object.isElement(content)) {","      element.parentNode.replaceChild(content, element);","      return element;","    }","","    content = Object.toHTML(content);","    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();","","    if (tagName in INSERTION_TRANSLATIONS.tags) {","      var nextSibling = Element.next(element);","      var fragments = getContentFromAnonymousElement(","       tagName, content.stripScripts());","","      parent.removeChild(element);","","      var iterator;","      if (nextSibling)","        iterator = function(node) { parent.insertBefore(node, nextSibling) };","      else","        iterator = function(node) { parent.appendChild(node); }","","      fragments.each(iterator);","    } else {","      element.outerHTML = content.stripScripts();","    }","","    content.evalScripts.bind(content).defer();","    return element;","  }","","  if ('outerHTML' in document.documentElement)","    replace = replace_IE;","","  function isContent(content) {","    if (Object.isUndefined(content) || content === null) return false;","","    if (Object.isString(content) || Object.isNumber(content)) return true;","    if (Object.isElement(content)) return true;","    if (content.toElement || content.toHTML) return true;","","    return false;","  }","","  function insertContentAt(element, content, position) {","    position   = position.toLowerCase();","    var method = INSERTION_TRANSLATIONS[position];","","    if (content && content.toElement) content = content.toElement();","    if (Object.isElement(content)) {","      method(element, content);","      return element;","    }","","    content = Object.toHTML(content);","    var tagName = ((position === 'before' || position === 'after') ?","     element.parentNode : element).tagName.toUpperCase();","","    var childNodes = getContentFromAnonymousElement(tagName, content.stripScripts());","","    if (position === 'top' || position === 'after') childNodes.reverse();","","    for (var i = 0, node; node = childNodes[i]; i++)","      method(element, node);","","    content.evalScripts.bind(content).defer();","  }","","  function insert(element, insertions) {","    element = $(element);","","    if (isContent(insertions))","      insertions = { bottom: insertions };","","    for (var position in insertions)","      insertContentAt(element, insertions[position], position);","","    return element;","  }","","  function wrap(element, wrapper, attributes) {","    element = $(element);","","    if (Object.isElement(wrapper)) {","      $(wrapper).writeAttribute(attributes || {});","    } else if (Object.isString(wrapper)) {","      wrapper = new Element(wrapper, attributes);","    } else {","      wrapper = new Element('div', wrapper);","    }","","    if (element.parentNode)","      element.parentNode.replaceChild(wrapper, element);","","    wrapper.appendChild(element);","","    return wrapper;","  }","","  function cleanWhitespace(element) {","    element = $(element);","    var node = element.firstChild;","","    while (node) {","      var nextNode = node.nextSibling;","      if (node.nodeType === Node.TEXT_NODE && !/\\S/.test(node.nodeValue))","        element.removeChild(node);","      node = nextNode;","    }","    return element;","  }","","  function empty(element) {","    return $(element).innerHTML.blank();","  }","","  function getContentFromAnonymousElement(tagName, html, force) {","    var t = INSERTION_TRANSLATIONS.tags[tagName], div = DIV;","","    var workaround = !!t;","    if (!workaround && force) {","      workaround = true;","      t = ['', '', 0];","    }","","    if (workaround) {","      div.innerHTML = '&#160;' + t[0] + html + t[1];","      div.removeChild(div.firstChild);","      for (var i = t[2]; i--; )","        div = div.firstChild;","    } else {","      div.innerHTML = html;","    }","","    return $A(div.childNodes);","  }","","  function clone(element, deep) {","    if (!(element = $(element))) return;","    var clone = element.cloneNode(deep);","    if (!HAS_UNIQUE_ID_PROPERTY) {","      clone._prototypeUID = UNDEFINED;","      if (deep) {","        var descendants = Element.select(clone, '*'),","         i = descendants.length;","        while (i--)","          descendants[i]._prototypeUID = UNDEFINED;","      }","    }","    return Element.extend(clone);","  }","","  function purgeElement(element) {","    var uid = getUniqueElementID(element);","    if (uid) {","      Element.stopObserving(element);","      if (!HAS_UNIQUE_ID_PROPERTY)","        element._prototypeUID = UNDEFINED;","      delete Element.Storage[uid];","    }","  }","","  function purgeCollection(elements) {","    var i = elements.length;","    while (i--)","      purgeElement(elements[i]);","  }","","  function purgeCollection_IE(elements) {","    var i = elements.length, element, uid;","    while (i--) {","      element = elements[i];","      uid = getUniqueElementID(element);","      delete Element.Storage[uid];","      delete Event.cache[uid];","    }","  }","","  if (HAS_UNIQUE_ID_PROPERTY) {","    purgeCollection = purgeCollection_IE;","  }","","","  function purge(element) {","    if (!(element = $(element))) return;","    purgeElement(element);","","    var descendants = element.getElementsByTagName('*'),","     i = descendants.length;","","    while (i--) purgeElement(descendants[i]);","","    return null;","  }","","  Object.extend(methods, {","    remove:  remove,","    update:  update,","    replace: replace,","    insert:  insert,","    wrap:    wrap,","    cleanWhitespace: cleanWhitespace,","    empty:   empty,","    clone:   clone,","    purge:   purge","  });","","","","  function recursivelyCollect(element, property, maximumLength) {","    element = $(element);","    maximumLength = maximumLength || -1;","    var elements = [];","","    while (element = element[property]) {","      if (element.nodeType === Node.ELEMENT_NODE)","        elements.push(Element.extend(element));","","      if (elements.length === maximumLength) break;","    }","","    return elements;","  }","","","  function ancestors(element) {","    return recursivelyCollect(element, 'parentNode');","  }","","  function descendants(element) {","    return Element.select(element, '*');","  }","","  function firstDescendant(element) {","    element = $(element).firstChild;","    while (element && element.nodeType !== Node.ELEMENT_NODE)","      element = element.nextSibling;","","    return $(element);","  }","","  function immediateDescendants(element) {","    var results = [], child = $(element).firstChild;","","    while (child) {","      if (child.nodeType === Node.ELEMENT_NODE)","        results.push(Element.extend(child));","","      child = child.nextSibling;","    }","","    return results;","  }","","  function previousSiblings(element) {","    return recursivelyCollect(element, 'previousSibling');","  }","","  function nextSiblings(element) {","    return recursivelyCollect(element, 'nextSibling');","  }","","  function siblings(element) {","    element = $(element);","    var previous = previousSiblings(element),","     next = nextSiblings(element);","    return previous.reverse().concat(next);","  }","","  function match(element, selector) {","    element = $(element);","","    if (Object.isString(selector))","      return Prototype.Selector.match(element, selector);","","    return selector.match(element);","  }","","","  function _recursivelyFind(element, property, expression, index) {","    element = $(element), expression = expression || 0, index = index || 0;","    if (Object.isNumber(expression)) {","      index = expression, expression = null;","    }","","    while (element = element[property]) {","      if (element.nodeType !== 1) continue;","      if (expression && !Prototype.Selector.match(element, expression))","        continue;","      if (--index >= 0) continue;","","      return Element.extend(element);","    }","  }","","","  function up(element, expression, index) {","    element = $(element);","","    if (arguments.length === 1) return $(element.parentNode);","    return _recursivelyFind(element, 'parentNode', expression, index);","  }","","  function down(element, expression, index) {","    if (arguments.length === 1) return firstDescendant(element);","    element = $(element), expression = expression || 0, index = index || 0;","","    if (Object.isNumber(expression))","      index = expression, expression = '*';","","    var node = Prototype.Selector.select(expression, element)[index];","    return Element.extend(node);","  }","","  function previous(element, expression, index) {","    return _recursivelyFind(element, 'previousSibling', expression, index);","  }","","  function next(element, expression, index) {","    return _recursivelyFind(element, 'nextSibling', expression, index);","  }","","  function select(element) {","    element = $(element);","    var expressions = SLICE.call(arguments, 1).join(', ');","    return Prototype.Selector.select(expressions, element);","  }","","  function adjacent(element) {","    element = $(element);","    var expressions = SLICE.call(arguments, 1).join(', ');","    var siblings = Element.siblings(element), results = [];","    for (var i = 0, sibling; sibling = siblings[i]; i++) {","      if (Prototype.Selector.match(sibling, expressions))","        results.push(sibling);","    }","","    return results;","  }","","  function descendantOf_DOM(element, ancestor) {","    element = $(element), ancestor = $(ancestor);","    while (element = element.parentNode)","      if (element === ancestor) return true;","    return false;","  }","","  function descendantOf_contains(element, ancestor) {","    element = $(element), ancestor = $(ancestor);","    if (!ancestor.contains) return descendantOf_DOM(element, ancestor);","    return ancestor.contains(element) && ancestor !== element;","  }","","  function descendantOf_compareDocumentPosition(element, ancestor) {","    element = $(element), ancestor = $(ancestor);","    return (element.compareDocumentPosition(ancestor) & 8) === 8;","  }","","  var descendantOf;","  if (DIV.compareDocumentPosition) {","    descendantOf = descendantOf_compareDocumentPosition;","  } else if (DIV.contains) {","    descendantOf = descendantOf_contains;","  } else {","    descendantOf = descendantOf_DOM;","  }","","","  Object.extend(methods, {","    recursivelyCollect:   recursivelyCollect,","    ancestors:            ancestors,","    descendants:          descendants,","    firstDescendant:      firstDescendant,","    immediateDescendants: immediateDescendants,","    previousSiblings:     previousSiblings,","    nextSiblings:         nextSiblings,","    siblings:             siblings,","    match:                match,","    up:                   up,","    down:                 down,","    previous:             previous,","    next:                 next,","    select:               select,","    adjacent:             adjacent,","    descendantOf:         descendantOf,","","    getElementsBySelector: select,","","    childElements:         immediateDescendants","  });","","","  var idCounter = 1;","  function identify(element) {","    element = $(element);","    var id = Element.readAttribute(element, 'id');","    if (id) return id;","","    do { id = 'anonymous_element_' + idCounter++ } while ($(id));","","    Element.writeAttribute(element, 'id', id);","    return id;","  }","","","  function readAttribute(element, name) {","    return $(element).getAttribute(name);","  }","","  function readAttribute_IE(element, name) {","    element = $(element);","","    var table = ATTRIBUTE_TRANSLATIONS.read;","    if (table.values[name])","      return table.values[name](element, name);","","    if (table.names[name]) name = table.names[name];","","    if (name.include(':')) {","      if (!element.attributes || !element.attributes[name]) return null;","      return element.attributes[name].value;","    }","","    return element.getAttribute(name);","  }","","  function readAttribute_Opera(element, name) {","    if (name === 'title') return element.title;","    return element.getAttribute(name);","  }","","  var PROBLEMATIC_ATTRIBUTE_READING = (function() {","    DIV.setAttribute('onclick', []);","    var value = DIV.getAttribute('onclick');","    var isFunction = Object.isArray(value);","    DIV.removeAttribute('onclick');","    return isFunction;","  })();","","  if (PROBLEMATIC_ATTRIBUTE_READING) {","    readAttribute = readAttribute_IE;","  } else if (Prototype.Browser.Opera) {","    readAttribute = readAttribute_Opera;","  }","","","  function writeAttribute(element, name, value) {","    element = $(element);","    var attributes = {}, table = ATTRIBUTE_TRANSLATIONS.write;","","    if (typeof name === 'object') {","      attributes = name;","    } else {","      attributes[name] = Object.isUndefined(value) ? true : value;","    }","","    for (var attr in attributes) {","      name = table.names[attr] || attr;","      value = attributes[attr];","      if (table.values[attr])","        name = table.values[attr](element, value) || name;","      if (value === false || value === null)","        element.removeAttribute(name);","      else if (value === true)","        element.setAttribute(name, name);","      else element.setAttribute(name, value);","    }","","    return element;","  }","","  var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES = (function () {","    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) {","      return false;","    }","    var checkbox = document.createElement('<input type=\"checkbox\">');","    checkbox.checked = true;","    var node = checkbox.getAttributeNode('checked');","    return !node || !node.specified;","  })();","","  function hasAttribute(element, attribute) {","    attribute = ATTRIBUTE_TRANSLATIONS.has[attribute] || attribute;","    var node = $(element).getAttributeNode(attribute);","    return !!(node && node.specified);","  }","","  function hasAttribute_IE(element, attribute) {","    if (attribute === 'checked') {","      return element.checked;","    }","    return hasAttribute(element, attribute);","  }","","  GLOBAL.Element.Methods.Simulated.hasAttribute =","   PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES ?","   hasAttribute_IE : hasAttribute;","","  function classNames(element) {","    return new Element.ClassNames(element);","  }","","  var regExpCache = {};","  function getRegExpForClassName(className) {","    if (regExpCache[className]) return regExpCache[className];","","    var re = new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");","    regExpCache[className] = re;","    return re;","  }","","  function hasClassName(element, className) {","    if (!(element = $(element))) return;","","    var elementClassName = element.className;","","    if (elementClassName.length === 0) return false;","    if (elementClassName === className) return true;","","    return getRegExpForClassName(className).test(elementClassName);","  }","","  function addClassName(element, className) {","    if (!(element = $(element))) return;","","    if (!hasClassName(element, className))","      element.className += (element.className ? ' ' : '') + className;","","    return element;","  }","","  function removeClassName(element, className) {","    if (!(element = $(element))) return;","","    element.className = element.className.replace(","     getRegExpForClassName(className), ' ').strip();","","    return element;","  }","","  function toggleClassName(element, className, bool) {","    if (!(element = $(element))) return;","","    if (Object.isUndefined(bool))","      bool = !hasClassName(element, className);","","    var method = Element[bool ? 'addClassName' : 'removeClassName'];","    return method(element, className);","  }","","  var ATTRIBUTE_TRANSLATIONS = {};","","  var classProp = 'className', forProp = 'for';","","  DIV.setAttribute(classProp, 'x');","  if (DIV.className !== 'x') {","    DIV.setAttribute('class', 'x');","    if (DIV.className === 'x')","      classProp = 'class';","  }","","  var LABEL = document.createElement('label');","  LABEL.setAttribute(forProp, 'x');","  if (LABEL.htmlFor !== 'x') {","    LABEL.setAttribute('htmlFor', 'x');","    if (LABEL.htmlFor === 'x')","      forProp = 'htmlFor';","  }","  LABEL = null;","","  function _getAttr(element, attribute) {","    return element.getAttribute(attribute);","  }","","  function _getAttr2(element, attribute) {","    return element.getAttribute(attribute, 2);","  }","","  function _getAttrNode(element, attribute) {","    var node = element.getAttributeNode(attribute);","    return node ? node.value : '';","  }","","  function _getFlag(element, attribute) {","    return $(element).hasAttribute(attribute) ? attribute : null;","  }","","  DIV.onclick = Prototype.emptyFunction;","  var onclickValue = DIV.getAttribute('onclick');","","  var _getEv;","","  if (String(onclickValue).indexOf('{') > -1) {","    _getEv = function(element, attribute) {","      var value = element.getAttribute(attribute);","      if (!value) return null;","      value = value.toString();","      value = value.split('{')[1];","      value = value.split('}')[0];","      return value.strip();","    };","  }","  else if (onclickValue === '') {","    _getEv = function(element, attribute) {","      var value = element.getAttribute(attribute);","      if (!value) return null;","      return value.strip();","    };","  }","","  ATTRIBUTE_TRANSLATIONS.read = {","    names: {","      'class':     classProp,","      'className': classProp,","      'for':       forProp,","      'htmlFor':   forProp","    },","","    values: {","      style: function(element) {","        return element.style.cssText.toLowerCase();","      },","      title: function(element) {","        return element.title;","      }","    }","  };","","  ATTRIBUTE_TRANSLATIONS.write = {","    names: {","      className:   'class',","      htmlFor:     'for',","      cellpadding: 'cellPadding',","      cellspacing: 'cellSpacing'","    },","","    values: {","      checked: function(element, value) {","        element.checked = !!value;","      },","","      style: function(element, value) {","        element.style.cssText = value ? value : '';","      }","    }","  };","","  ATTRIBUTE_TRANSLATIONS.has = { names: {} };","","  Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,","   ATTRIBUTE_TRANSLATIONS.read.names);","","  var CAMEL_CASED_ATTRIBUTE_NAMES = $w('colSpan rowSpan vAlign dateTime ' +","   'accessKey tabIndex encType maxLength readOnly longDesc frameBorder');","","  for (var i = 0, attr; attr = CAMEL_CASED_ATTRIBUTE_NAMES[i]; i++) {","    ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()] = attr;","    ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]   = attr;","  }","","  Object.extend(ATTRIBUTE_TRANSLATIONS.read.values, {","    href:        _getAttr2,","    src:         _getAttr2,","    type:        _getAttr,","    action:      _getAttrNode,","    disabled:    _getFlag,","    checked:     _getFlag,","    readonly:    _getFlag,","    multiple:    _getFlag,","    onload:      _getEv,","    onunload:    _getEv,","    onclick:     _getEv,","    ondblclick:  _getEv,","    onmousedown: _getEv,","    onmouseup:   _getEv,","    onmouseover: _getEv,","    onmousemove: _getEv,","    onmouseout:  _getEv,","    onfocus:     _getEv,","    onblur:      _getEv,","    onkeypress:  _getEv,","    onkeydown:   _getEv,","    onkeyup:     _getEv,","    onsubmit:    _getEv,","    onreset:     _getEv,","    onselect:    _getEv,","    onchange:    _getEv","  });","","","  Object.extend(methods, {","    identify:        identify,","    readAttribute:   readAttribute,","    writeAttribute:  writeAttribute,","    classNames:      classNames,","    hasClassName:    hasClassName,","    addClassName:    addClassName,","    removeClassName: removeClassName,","    toggleClassName: toggleClassName","  });","","","  function normalizeStyleName(style) {","    if (style === 'float' || style === 'styleFloat')","      return 'cssFloat';","    return style.camelize();","  }","","  function normalizeStyleName_IE(style) {","    if (style === 'float' || style === 'cssFloat')","      return 'styleFloat';","    return style.camelize();","  }","","  function setStyle(element, styles) {","    element = $(element);","    var elementStyle = element.style, match;","","    if (Object.isString(styles)) {","      elementStyle.cssText += ';' + styles;","      if (styles.include('opacity')) {","        var opacity = styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1];","        Element.setOpacity(element, opacity);","      }","      return element;","    }","","    for (var property in styles) {","      if (property === 'opacity') {","        Element.setOpacity(element, styles[property]);","      } else {","        var value = styles[property];","        if (property === 'float' || property === 'cssFloat') {","          property = Object.isUndefined(elementStyle.styleFloat) ?","           'cssFloat' : 'styleFloat';","        }","        elementStyle[property] = value;","      }","    }","","    return element;","  }","","","  function getStyle(element, style) {","    element = $(element);","    style = normalizeStyleName(style);","","    var value = element.style[style];","    if (!value || value === 'auto') {","      var css = document.defaultView.getComputedStyle(element, null);","      value = css ? css[style] : null;","    }","","    if (style === 'opacity') return value ? parseFloat(value) : 1.0;","    return value === 'auto' ? null : value;","  }","","  function getStyle_Opera(element, style) {","    switch (style) {","      case 'height': case 'width':","        if (!Element.visible(element)) return null;","","        var dim = parseInt(getStyle(element, style), 10);","","        if (dim !== element['offset' + style.capitalize()])","          return dim + 'px';","","        return Element.measure(element, style);","","      default: return getStyle(element, style);","    }","  }","","  function getStyle_IE(element, style) {","    element = $(element);","    style = normalizeStyleName_IE(style);","","    var value = element.style[style];","    if (!value && element.currentStyle) {","      value = element.currentStyle[style];","    }","","    if (style === 'opacity' && !STANDARD_CSS_OPACITY_SUPPORTED)","      return getOpacity_IE(element);","","    if (value === 'auto') {","      if ((style === 'width' || style === 'height') && Element.visible(element))","        return Element.measure(element, style) + 'px';","      return null;","    }","","    return value;","  }","","  function stripAlphaFromFilter_IE(filter) {","    return (filter || '').replace(/alpha\\([^\\)]*\\)/gi, '');","  }","","  function hasLayout_IE(element) {","    if (!element.currentStyle || !element.currentStyle.hasLayout)","      element.style.zoom = 1;","    return element;","  }","","  var STANDARD_CSS_OPACITY_SUPPORTED = (function() {","    DIV.style.cssText = \"opacity:.55\";","    return /^0.55/.test(DIV.style.opacity);","  })();","","  function setOpacity(element, value) {","    element = $(element);","    if (value == 1 || value === '') value = '';","    else if (value < 0.00001) value = 0;","    element.style.opacity = value;","    return element;","  }","","  function setOpacity_IE(element, value) {","    if (STANDARD_CSS_OPACITY_SUPPORTED)","      return setOpacity(element, value);","","    element = hasLayout_IE($(element));","    var filter = Element.getStyle(element, 'filter'),","     style = element.style;","","    if (value == 1 || value === '') {","      filter = stripAlphaFromFilter_IE(filter);","      if (filter) style.filter = filter;","      else style.removeAttribute('filter');","      return element;","    }","","    if (value < 0.00001) value = 0;","","    style.filter = stripAlphaFromFilter_IE(filter) +","     'alpha(opacity=' + (value * 100) + ')';","","    return element;","  }","","","  function getOpacity(element) {","    return Element.getStyle(element, 'opacity');","  }","","  function getOpacity_IE(element) {","    if (STANDARD_CSS_OPACITY_SUPPORTED)","      return getOpacity(element);","","    var filter = Element.getStyle(element, 'filter');","    if (filter.length === 0) return 1.0;","    var match = (filter || '').match(/alpha\\(opacity=(.*)\\)/);","    if (match && match[1]) return parseFloat(match[1]) / 100;","    return 1.0;","  }","","","  Object.extend(methods, {","    setStyle:   setStyle,","    getStyle:   getStyle,","    setOpacity: setOpacity,","    getOpacity: getOpacity","  });","","  if ('styleFloat' in DIV.style) {","    methods.getStyle = getStyle_IE;","    methods.setOpacity = setOpacity_IE;","    methods.getOpacity = getOpacity_IE;","  }","","  var UID = 0;","","  GLOBAL.Element.Storage = { UID: 1 };","","  function getUniqueElementID(element) {","    if (element === window) return 0;","","    if (typeof element._prototypeUID === 'undefined')","      element._prototypeUID = Element.Storage.UID++;","    return element._prototypeUID;","  }","","  function getUniqueElementID_IE(element) {","    if (element === window) return 0;","    if (element == document) return 1;","    return element.uniqueID;","  }","","  var HAS_UNIQUE_ID_PROPERTY = ('uniqueID' in DIV);","  if (HAS_UNIQUE_ID_PROPERTY)","    getUniqueElementID = getUniqueElementID_IE;","","  function getStorage(element) {","    if (!(element = $(element))) return;","","    var uid = getUniqueElementID(element);","","    if (!Element.Storage[uid])","      Element.Storage[uid] = $H();","","    return Element.Storage[uid];","  }","","  function store(element, key, value) {","    if (!(element = $(element))) return;","    var storage = getStorage(element);","    if (arguments.length === 2) {","      storage.update(key);","    } else {","      storage.set(key, value);","    }","    return element;","  }","","  function retrieve(element, key, defaultValue) {","    if (!(element = $(element))) return;","    var storage = getStorage(element), value = storage.get(key);","","    if (Object.isUndefined(value)) {","      storage.set(key, defaultValue);","      value = defaultValue;","    }","","    return value;","  }","","","  Object.extend(methods, {","    getStorage: getStorage,","    store:      store,","    retrieve:   retrieve","  });","","","  var Methods = {}, ByTag = Element.Methods.ByTag,","   F = Prototype.BrowserFeatures;","","  if (!F.ElementExtensions && ('__proto__' in DIV)) {","    GLOBAL.HTMLElement = {};","    GLOBAL.HTMLElement.prototype = DIV['__proto__'];","    F.ElementExtensions = true;","  }","","  function checkElementPrototypeDeficiency(tagName) {","    if (typeof window.Element === 'undefined') return false;","    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) return false;","    var proto = window.Element.prototype;","    if (proto) {","      var id = '_' + (Math.random() + '').slice(2),","       el = document.createElement(tagName);","      proto[id] = 'x';","      var isBuggy = (el[id] !== 'x');","      delete proto[id];","      el = null;","      return isBuggy;","    }","","    return false;","  }","","  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =","   checkElementPrototypeDeficiency('object');","","  function extendElementWith(element, methods) {","    for (var property in methods) {","      var value = methods[property];","      if (Object.isFunction(value) && !(property in element))","        element[property] = value.methodize();","    }","  }","","  var EXTENDED = {};","  function elementIsExtended(element) {","    var uid = getUniqueElementID(element);","    return (uid in EXTENDED);","  }","","  function extend(element) {","    if (!element || elementIsExtended(element)) return element;","    if (element.nodeType !== Node.ELEMENT_NODE || element == window)","      return element;","","    var methods = Object.clone(Methods),","     tagName = element.tagName.toUpperCase();","","    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);","","    extendElementWith(element, methods);","    EXTENDED[getUniqueElementID(element)] = true;","    return element;","  }","","  function extend_IE8(element) {","    if (!element || elementIsExtended(element)) return element;","","    var t = element.tagName;","    if (t && (/^(?:object|applet|embed)$/i.test(t))) {","      extendElementWith(element, Element.Methods);","      extendElementWith(element, Element.Methods.Simulated);","      extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);","    }","","    return element;","  }","","  if (F.SpecificElementExtensions) {","    extend = HTMLOBJECTELEMENT_PROTOTYPE_BUGGY ? extend_IE8 : Prototype.K;","  }","","  function addMethodsToTagName(tagName, methods) {","    tagName = tagName.toUpperCase();","    if (!ByTag[tagName]) ByTag[tagName] = {};","    Object.extend(ByTag[tagName], methods);","  }","","  function mergeMethods(destination, methods, onlyIfAbsent) {","    if (Object.isUndefined(onlyIfAbsent)) onlyIfAbsent = false;","    for (var property in methods) {","      var value = methods[property];","      if (!Object.isFunction(value)) continue;","      if (!onlyIfAbsent || !(property in destination))","        destination[property] = value.methodize();","    }","  }","","  function findDOMClass(tagName) {","    var klass;","    var trans = {","      \"OPTGROUP\": \"OptGroup\", \"TEXTAREA\": \"TextArea\", \"P\": \"Paragraph\",","      \"FIELDSET\": \"FieldSet\", \"UL\": \"UList\", \"OL\": \"OList\", \"DL\": \"DList\",","      \"DIR\": \"Directory\", \"H1\": \"Heading\", \"H2\": \"Heading\", \"H3\": \"Heading\",","      \"H4\": \"Heading\", \"H5\": \"Heading\", \"H6\": \"Heading\", \"Q\": \"Quote\",","      \"INS\": \"Mod\", \"DEL\": \"Mod\", \"A\": \"Anchor\", \"IMG\": \"Image\", \"CAPTION\":","      \"TableCaption\", \"COL\": \"TableCol\", \"COLGROUP\": \"TableCol\", \"THEAD\":","      \"TableSection\", \"TFOOT\": \"TableSection\", \"TBODY\": \"TableSection\", \"TR\":","      \"TableRow\", \"TH\": \"TableCell\", \"TD\": \"TableCell\", \"FRAMESET\":","      \"FrameSet\", \"IFRAME\": \"IFrame\"","    };","    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';","    if (window[klass]) return window[klass];","    klass = 'HTML' + tagName + 'Element';","    if (window[klass]) return window[klass];","    klass = 'HTML' + tagName.capitalize() + 'Element';","    if (window[klass]) return window[klass];","","    var element = document.createElement(tagName),","     proto = element['__proto__'] || element.constructor.prototype;","","    element = null;","    return proto;","  }","","  function addMethods(methods) {","    if (arguments.length === 0) addFormMethods();","","    if (arguments.length === 2) {","      var tagName = methods;","      methods = arguments[1];","    }","","    if (!tagName) {","      Object.extend(Element.Methods, methods || {});","    } else {","      if (Object.isArray(tagName)) {","        for (var i = 0, tag; tag = tagName[i]; i++)","          addMethodsToTagName(tag, methods);","      } else {","        addMethodsToTagName(tagName, methods);","      }","    }","","    var ELEMENT_PROTOTYPE = window.HTMLElement ? HTMLElement.prototype :","     Element.prototype;","","    if (F.ElementExtensions) {","      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods);","      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods.Simulated, true);","    }","","    if (F.SpecificElementExtensions) {","      for (var tag in Element.Methods.ByTag) {","        var klass = findDOMClass(tag);","        if (Object.isUndefined(klass)) continue;","        mergeMethods(klass.prototype, ByTag[tag]);","      }","    }","","    Object.extend(Element, Element.Methods);","    Object.extend(Element, Element.Methods.Simulated);","    delete Element.ByTag;","    delete Element.Simulated;","","    Element.extend.refresh();","","    ELEMENT_CACHE = {};","  }","","  Object.extend(GLOBAL.Element, {","    extend:     extend,","    addMethods: addMethods","  });","","  if (extend === Prototype.K) {","    GLOBAL.Element.extend.refresh = Prototype.emptyFunction;","  } else {","    GLOBAL.Element.extend.refresh = function() {","      if (Prototype.BrowserFeatures.ElementExtensions) return;","      Object.extend(Methods, Element.Methods);","      Object.extend(Methods, Element.Methods.Simulated);","","      EXTENDED = {};","    };","  }","","  function addFormMethods() {","    Object.extend(Form, Form.Methods);","    Object.extend(Form.Element, Form.Element.Methods);","    Object.extend(Element.Methods.ByTag, {","      \"FORM\":     Object.clone(Form.Methods),","      \"INPUT\":    Object.clone(Form.Element.Methods),","      \"SELECT\":   Object.clone(Form.Element.Methods),","      \"TEXTAREA\": Object.clone(Form.Element.Methods),","      \"BUTTON\":   Object.clone(Form.Element.Methods)","    });","  }","","  Element.addMethods(methods);","","  function destroyCache_IE() {","    DIV = null;","    ELEMENT_CACHE = null;","  }","","  if (window.attachEvent)","    window.attachEvent('onunload', destroyCache_IE);","","})(this);","(function() {","","  function toDecimal(pctString) {","    var match = pctString.match(/^(\\d+)%?$/i);","    if (!match) return null;","    return (Number(match[1]) / 100);","  }","","  function getRawStyle(element, style) {","    element = $(element);","","    var value = element.style[style];","    if (!value || value === 'auto') {","      var css = document.defaultView.getComputedStyle(element, null);","      value = css ? css[style] : null;","    }","","    if (style === 'opacity') return value ? parseFloat(value) : 1.0;","    return value === 'auto' ? null : value;","  }","","  function getRawStyle_IE(element, style) {","    var value = element.style[style];","    if (!value && element.currentStyle) {","      value = element.currentStyle[style];","    }","    return value;","  }","","  function getContentWidth(element, context) {","    var boxWidth = element.offsetWidth;","","    var bl = getPixelValue(element, 'borderLeftWidth',  context) || 0;","    var br = getPixelValue(element, 'borderRightWidth', context) || 0;","    var pl = getPixelValue(element, 'paddingLeft',      context) || 0;","    var pr = getPixelValue(element, 'paddingRight',     context) || 0;","","    return boxWidth - bl - br - pl - pr;","  }","","  if ('currentStyle' in document.documentElement) {","    getRawStyle = getRawStyle_IE;","  }","","","  function getPixelValue(value, property, context) {","    var element = null;","    if (Object.isElement(value)) {","      element = value;","      value = getRawStyle(element, property);","    }","","    if (value === null || Object.isUndefined(value)) {","      return null;","    }","","    if ((/^(?:-)?\\d+(\\.\\d+)?(px)?$/i).test(value)) {","      return window.parseFloat(value);","    }","","    var isPercentage = value.include('%'), isViewport = (context === document.viewport);","","    if (/\\d/.test(value) && element && element.runtimeStyle && !(isPercentage && isViewport)) {","      var style = element.style.left, rStyle = element.runtimeStyle.left;","      element.runtimeStyle.left = element.currentStyle.left;","      element.style.left = value || 0;","      value = element.style.pixelLeft;","      element.style.left = style;","      element.runtimeStyle.left = rStyle;","","      return value;","    }","","    if (element && isPercentage) {","      context = context || element.parentNode;","      var decimal = toDecimal(value), whole = null;","","      var isHorizontal = property.include('left') || property.include('right') ||","       property.include('width');","","      var isVertical   = property.include('top') || property.include('bottom') ||","        property.include('height');","","      if (context === document.viewport) {","        if (isHorizontal) {","          whole = document.viewport.getWidth();","        } else if (isVertical) {","          whole = document.viewport.getHeight();","        }","      } else {","        if (isHorizontal) {","          whole = $(context).measure('width');","        } else if (isVertical) {","          whole = $(context).measure('height');","        }","      }","","      return (whole === null) ? 0 : whole * decimal;","    }","","    return 0;","  }","","  function toCSSPixels(number) {","    if (Object.isString(number) && number.endsWith('px'))","      return number;","    return number + 'px';","  }","","  function isDisplayed(element) {","    while (element && element.parentNode) {","      var display = element.getStyle('display');","      if (display === 'none') {","        return false;","      }","      element = $(element.parentNode);","    }","    return true;","  }","","  var hasLayout = Prototype.K;","  if ('currentStyle' in document.documentElement) {","    hasLayout = function(element) {","      if (!element.currentStyle.hasLayout) {","        element.style.zoom = 1;","      }","      return element;","    };","  }","","  function cssNameFor(key) {","    if (key.include('border')) key = key + '-width';","    return key.camelize();","  }","","  Element.Layout = Class.create(Hash, {","    initialize: function($super, element, preCompute) {","      $super();","      this.element = $(element);","","      Element.Layout.PROPERTIES.each( function(property) {","        this._set(property, null);","      }, this);","","      if (preCompute) {","        this._preComputing = true;","        this._begin();","        Element.Layout.PROPERTIES.each( this._compute, this );","        this._end();","        this._preComputing = false;","      }","    },","","    _set: function(property, value) {","      return Hash.prototype.set.call(this, property, value);","    },","","    set: function(property, value) {","      throw \"Properties of Element.Layout are read-only.\";","    },","","    get: function($super, property) {","      var value = $super(property);","      return value === null ? this._compute(property) : value;","    },","","    _begin: function() {","      if (this._isPrepared()) return;","","      var element = this.element;","      if (isDisplayed(element)) {","        this._setPrepared(true);","        return;","      }","","","      var originalStyles = {","        position:   element.style.position   || '',","        width:      element.style.width      || '',","        visibility: element.style.visibility || '',","        display:    element.style.display    || ''","      };","","      element.store('prototype_original_styles', originalStyles);","","      var position = getRawStyle(element, 'position'), width = element.offsetWidth;","","      if (width === 0 || width === null) {","        element.style.display = 'block';","        width = element.offsetWidth;","      }","","      var context = (position === 'fixed') ? document.viewport :","       element.parentNode;","","      var tempStyles = {","        visibility: 'hidden',","        display:    'block'","      };","","      if (position !== 'fixed') tempStyles.position = 'absolute';","","      element.setStyle(tempStyles);","","      var positionedWidth = element.offsetWidth, newWidth;","      if (width && (positionedWidth === width)) {","        newWidth = getContentWidth(element, context);","      } else if (position === 'absolute' || position === 'fixed') {","        newWidth = getContentWidth(element, context);","      } else {","        var parent = element.parentNode, pLayout = $(parent).getLayout();","","        newWidth = pLayout.get('width') -","         this.get('margin-left') -","         this.get('border-left') -","         this.get('padding-left') -","         this.get('padding-right') -","         this.get('border-right') -","         this.get('margin-right');","      }","","      element.setStyle({ width: newWidth + 'px' });","","      this._setPrepared(true);","    },","","    _end: function() {","      var element = this.element;","      var originalStyles = element.retrieve('prototype_original_styles');","      element.store('prototype_original_styles', null);","      element.setStyle(originalStyles);","      this._setPrepared(false);","    },","","    _compute: function(property) {","      var COMPUTATIONS = Element.Layout.COMPUTATIONS;","      if (!(property in COMPUTATIONS)) {","        throw \"Property not found.\";","      }","","      return this._set(property, COMPUTATIONS[property].call(this, this.element));","    },","","    _isPrepared: function() {","      return this.element.retrieve('prototype_element_layout_prepared', false);","    },","","    _setPrepared: function(bool) {","      return this.element.store('prototype_element_layout_prepared', bool);","    },","","    toObject: function() {","      var args = $A(arguments);","      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :","       args.join(' ').split(' ');","      var obj = {};","      keys.each( function(key) {","        if (!Element.Layout.PROPERTIES.include(key)) return;","        var value = this.get(key);","        if (value != null) obj[key] = value;","      }, this);","      return obj;","    },","","    toHash: function() {","      var obj = this.toObject.apply(this, arguments);","      return new Hash(obj);","    },","","    toCSS: function() {","      var args = $A(arguments);","      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :","       args.join(' ').split(' ');","      var css = {};","","      keys.each( function(key) {","        if (!Element.Layout.PROPERTIES.include(key)) return;","        if (Element.Layout.COMPOSITE_PROPERTIES.include(key)) return;","","        var value = this.get(key);","        if (value != null) css[cssNameFor(key)] = value + 'px';","      }, this);","      return css;","    },","","    inspect: function() {","      return \"#<Element.Layout>\";","    }","  });","","  Object.extend(Element.Layout, {","    PROPERTIES: $w('height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height'),","","    COMPOSITE_PROPERTIES: $w('padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height'),","","    COMPUTATIONS: {","      'height': function(element) {","        if (!this._preComputing) this._begin();","","        var bHeight = this.get('border-box-height');","        if (bHeight <= 0) {","          if (!this._preComputing) this._end();","          return 0;","        }","","        var bTop = this.get('border-top'),","         bBottom = this.get('border-bottom');","","        var pTop = this.get('padding-top'),","         pBottom = this.get('padding-bottom');","","        if (!this._preComputing) this._end();","","        return bHeight - bTop - bBottom - pTop - pBottom;","      },","","      'width': function(element) {","        if (!this._preComputing) this._begin();","","        var bWidth = this.get('border-box-width');","        if (bWidth <= 0) {","          if (!this._preComputing) this._end();","          return 0;","        }","","        var bLeft = this.get('border-left'),","         bRight = this.get('border-right');","","        var pLeft = this.get('padding-left'),","         pRight = this.get('padding-right');","","        if (!this._preComputing) this._end();","        return bWidth - bLeft - bRight - pLeft - pRight;","      },","","      'padding-box-height': function(element) {","        var height = this.get('height'),","         pTop = this.get('padding-top'),","         pBottom = this.get('padding-bottom');","","        return height + pTop + pBottom;","      },","","      'padding-box-width': function(element) {","        var width = this.get('width'),","         pLeft = this.get('padding-left'),","         pRight = this.get('padding-right');","","        return width + pLeft + pRight;","      },","","      'border-box-height': function(element) {","        if (!this._preComputing) this._begin();","        var height = element.offsetHeight;","        if (!this._preComputing) this._end();","        return height;","      },","","      'border-box-width': function(element) {","        if (!this._preComputing) this._begin();","        var width = element.offsetWidth;","        if (!this._preComputing) this._end();","        return width;","      },","","      'margin-box-height': function(element) {","        var bHeight = this.get('border-box-height'),","         mTop = this.get('margin-top'),","         mBottom = this.get('margin-bottom');","","        if (bHeight <= 0) return 0;","","        return bHeight + mTop + mBottom;","      },","","      'margin-box-width': function(element) {","        var bWidth = this.get('border-box-width'),","         mLeft = this.get('margin-left'),","         mRight = this.get('margin-right');","","        if (bWidth <= 0) return 0;","","        return bWidth + mLeft + mRight;","      },","","      'top': function(element) {","        var offset = element.positionedOffset();","        return offset.top;","      },","","      'bottom': function(element) {","        var offset = element.positionedOffset(),","         parent = element.getOffsetParent(),","         pHeight = parent.measure('height');","","        var mHeight = this.get('border-box-height');","","        return pHeight - mHeight - offset.top;","      },","","      'left': function(element) {","        var offset = element.positionedOffset();","        return offset.left;","      },","","      'right': function(element) {","        var offset = element.positionedOffset(),","         parent = element.getOffsetParent(),","         pWidth = parent.measure('width');","","        var mWidth = this.get('border-box-width');","","        return pWidth - mWidth - offset.left;","      },","","      'padding-top': function(element) {","        return getPixelValue(element, 'paddingTop');","      },","","      'padding-bottom': function(element) {","        return getPixelValue(element, 'paddingBottom');","      },","","      'padding-left': function(element) {","        return getPixelValue(element, 'paddingLeft');","      },","","      'padding-right': function(element) {","        return getPixelValue(element, 'paddingRight');","      },","","      'border-top': function(element) {","        return getPixelValue(element, 'borderTopWidth');","      },","","      'border-bottom': function(element) {","        return getPixelValue(element, 'borderBottomWidth');","      },","","      'border-left': function(element) {","        return getPixelValue(element, 'borderLeftWidth');","      },","","      'border-right': function(element) {","        return getPixelValue(element, 'borderRightWidth');","      },","","      'margin-top': function(element) {","        return getPixelValue(element, 'marginTop');","      },","","      'margin-bottom': function(element) {","        return getPixelValue(element, 'marginBottom');","      },","","      'margin-left': function(element) {","        return getPixelValue(element, 'marginLeft');","      },","","      'margin-right': function(element) {","        return getPixelValue(element, 'marginRight');","      }","    }","  });","","  if ('getBoundingClientRect' in document.documentElement) {","    Object.extend(Element.Layout.COMPUTATIONS, {","      'right': function(element) {","        var parent = hasLayout(element.getOffsetParent());","        var rect = element.getBoundingClientRect(),","         pRect = parent.getBoundingClientRect();","","        return (pRect.right - rect.right).round();","      },","","      'bottom': function(element) {","        var parent = hasLayout(element.getOffsetParent());","        var rect = element.getBoundingClientRect(),","         pRect = parent.getBoundingClientRect();","","        return (pRect.bottom - rect.bottom).round();","      }","    });","  }","","  Element.Offset = Class.create({","    initialize: function(left, top) {","      this.left = left.round();","      this.top  = top.round();","","      this[0] = this.left;","      this[1] = this.top;","    },","","    relativeTo: function(offset) {","      return new Element.Offset(","        this.left - offset.left,","        this.top  - offset.top","      );","    },","","    inspect: function() {","      return \"#<Element.Offset left: #{left} top: #{top}>\".interpolate(this);","    },","","    toString: function() {","      return \"[#{left}, #{top}]\".interpolate(this);","    },","","    toArray: function() {","      return [this.left, this.top];","    }","  });","","  function getLayout(element, preCompute) {","    return new Element.Layout(element, preCompute);","  }","","  function measure(element, property) {","    return $(element).getLayout().get(property);","  }","","  function getHeight(element) {","    return Element.getDimensions(element).height;","  }","","  function getWidth(element) {","    return Element.getDimensions(element).width;","  }","","  function getDimensions(element) {","    element = $(element);","    var display = Element.getStyle(element, 'display');","","    if (display && display !== 'none') {","      return { width: element.offsetWidth, height: element.offsetHeight };","    }","","    var style = element.style;","    var originalStyles = {","      visibility: style.visibility,","      position:   style.position,","      display:    style.display","    };","","    var newStyles = {","      visibility: 'hidden',","      display:    'block'","    };","","    if (originalStyles.position !== 'fixed')","      newStyles.position = 'absolute';","","    Element.setStyle(element, newStyles);","","    var dimensions = {","      width:  element.offsetWidth,","      height: element.offsetHeight","    };","","    Element.setStyle(element, originalStyles);","","    return dimensions;","  }","","  function getOffsetParent(element) {","    element = $(element);","","    if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))","      return $(document.body);","","    var isInline = (Element.getStyle(element, 'display') === 'inline');","    if (!isInline && element.offsetParent) return $(element.offsetParent);","","    while ((element = element.parentNode) && element !== document.body) {","      if (Element.getStyle(element, 'position') !== 'static') {","        return isHtml(element) ? $(document.body) : $(element);","      }","    }","","    return $(document.body);","  }","","","  function cumulativeOffset(element) {","    element = $(element);","    var valueT = 0, valueL = 0;","    if (element.parentNode) {","      do {","        valueT += element.offsetTop  || 0;","        valueL += element.offsetLeft || 0;","        element = element.offsetParent;","      } while (element);","    }","    return new Element.Offset(valueL, valueT);","  }","","  function positionedOffset(element) {","    element = $(element);","","    var layout = element.getLayout();","","    var valueT = 0, valueL = 0;","    do {","      valueT += element.offsetTop  || 0;","      valueL += element.offsetLeft || 0;","      element = element.offsetParent;","      if (element) {","        if (isBody(element)) break;","        var p = Element.getStyle(element, 'position');","        if (p !== 'static') break;","      }","    } while (element);","","    valueL -= layout.get('margin-top');","    valueT -= layout.get('margin-left');","","    return new Element.Offset(valueL, valueT);","  }","","  function cumulativeScrollOffset(element) {","    var valueT = 0, valueL = 0;","    do {","      if (element === document.body) {","        var bodyScrollNode = document.documentElement || document.body.parentNode || document.body;","        valueT += !Object.isUndefined(window.pageYOffset) ? window.pageYOffset : bodyScrollNode.scrollTop || 0;","        valueL += !Object.isUndefined(window.pageXOffset) ? window.pageXOffset : bodyScrollNode.scrollLeft || 0;","        break;","      } else {","        valueT += element.scrollTop  || 0;","        valueL += element.scrollLeft || 0;","        element = element.parentNode;","      }","    } while (element);","    return new Element.Offset(valueL, valueT);","  }","","  function viewportOffset(forElement) {","    var valueT = 0, valueL = 0, docBody = document.body;","","    forElement = $(forElement);","    var element = forElement;","    do {","      valueT += element.offsetTop  || 0;","      valueL += element.offsetLeft || 0;","      if (element.offsetParent == docBody &&","        Element.getStyle(element, 'position') == 'absolute') break;","    } while (element = element.offsetParent);","","    element = forElement;","    do {","      if (element != docBody) {","        valueT -= element.scrollTop  || 0;","        valueL -= element.scrollLeft || 0;","      }","    } while (element = element.parentNode);","    return new Element.Offset(valueL, valueT);","  }","","  function absolutize(element) {","    element = $(element);","","    if (Element.getStyle(element, 'position') === 'absolute') {","      return element;","    }","","    var offsetParent = getOffsetParent(element);","    var eOffset = element.viewportOffset(),","     pOffset = offsetParent.viewportOffset();","","    var offset = eOffset.relativeTo(pOffset);","    var layout = element.getLayout();","","    element.store('prototype_absolutize_original_styles', {","      position: element.getStyle('position'),","      left:     element.getStyle('left'),","      top:      element.getStyle('top'),","      width:    element.getStyle('width'),","      height:   element.getStyle('height')","    });","","    element.setStyle({","      position: 'absolute',","      top:    offset.top + 'px',","      left:   offset.left + 'px',","      width:  layout.get('width') + 'px',","      height: layout.get('height') + 'px'","    });","","    return element;","  }","","  function relativize(element) {","    element = $(element);","    if (Element.getStyle(element, 'position') === 'relative') {","      return element;","    }","","    var originalStyles =","     element.retrieve('prototype_absolutize_original_styles');","","    if (originalStyles) element.setStyle(originalStyles);","    return element;","  }","","","  function scrollTo(element) {","    element = $(element);","    var pos = Element.cumulativeOffset(element);","    window.scrollTo(pos.left, pos.top);","    return element;","  }","","","  function makePositioned(element) {","    element = $(element);","    var position = Element.getStyle(element, 'position'), styles = {};","    if (position === 'static' || !position) {","      styles.position = 'relative';","      if (Prototype.Browser.Opera) {","        styles.top  = 0;","        styles.left = 0;","      }","      Element.setStyle(element, styles);","      Element.store(element, 'prototype_made_positioned', true);","    }","    return element;","  }","","  function undoPositioned(element) {","    element = $(element);","    var storage = Element.getStorage(element),","     madePositioned = storage.get('prototype_made_positioned');","","    if (madePositioned) {","      storage.unset('prototype_made_positioned');","      Element.setStyle(element, {","        position: '',","        top:      '',","        bottom:   '',","        left:     '',","        right:    ''","      });","    }","    return element;","  }","","  function makeClipping(element) {","    element = $(element);","","    var storage = Element.getStorage(element),","     madeClipping = storage.get('prototype_made_clipping');","","    if (Object.isUndefined(madeClipping)) {","      var overflow = Element.getStyle(element, 'overflow');","      storage.set('prototype_made_clipping', overflow);","      if (overflow !== 'hidden')","        element.style.overflow = 'hidden';","    }","","    return element;","  }","","  function undoClipping(element) {","    element = $(element);","    var storage = Element.getStorage(element),","     overflow = storage.get('prototype_made_clipping');","","    if (!Object.isUndefined(overflow)) {","      storage.unset('prototype_made_clipping');","      element.style.overflow = overflow || '';","    }","","    return element;","  }","","  function clonePosition(element, source, options) {","    options = Object.extend({","      setLeft:    true,","      setTop:     true,","      setWidth:   true,","      setHeight:  true,","      offsetTop:  0,","      offsetLeft: 0","    }, options || {});","","    source  = $(source);","    element = $(element);","    var p, delta, layout, styles = {};","","    if (options.setLeft || options.setTop) {","      p = Element.viewportOffset(source);","      delta = [0, 0];","      if (Element.getStyle(element, 'position') === 'absolute') {","        var parent = Element.getOffsetParent(element);","        if (parent !== document.body) delta = Element.viewportOffset(parent);","      }","    }","","    if (options.setWidth || options.setHeight) {","      layout = Element.getLayout(source);","    }","","    if (options.setLeft)","      styles.left = (p[0] - delta[0] + options.offsetLeft) + 'px';","    if (options.setTop)","      styles.top  = (p[1] - delta[1] + options.offsetTop)  + 'px';","","    if (options.setWidth)","      styles.width  = layout.get('border-box-width')  + 'px';","    if (options.setHeight)","      styles.height = layout.get('border-box-height') + 'px';","","    return Element.setStyle(element, styles);","  }","","","  if (Prototype.Browser.IE) {","    getOffsetParent = getOffsetParent.wrap(","      function(proceed, element) {","        element = $(element);","","        if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))","          return $(document.body);","","        var position = element.getStyle('position');","        if (position !== 'static') return proceed(element);","","        element.setStyle({ position: 'relative' });","        var value = proceed(element);","        element.setStyle({ position: position });","        return value;","      }","    );","","    positionedOffset = positionedOffset.wrap(function(proceed, element) {","      element = $(element);","      if (!element.parentNode) return new Element.Offset(0, 0);","      var position = element.getStyle('position');","      if (position !== 'static') return proceed(element);","","      var offsetParent = element.getOffsetParent();","      if (offsetParent && offsetParent.getStyle('position') === 'fixed')","        hasLayout(offsetParent);","","      element.setStyle({ position: 'relative' });","      var value = proceed(element);","      element.setStyle({ position: position });","      return value;","    });","  } else if (Prototype.Browser.Webkit) {","    cumulativeOffset = function(element) {","      element = $(element);","      var valueT = 0, valueL = 0;","      do {","        valueT += element.offsetTop  || 0;","        valueL += element.offsetLeft || 0;","        if (element.offsetParent == document.body) {","          if (Element.getStyle(element, 'position') == 'absolute') break;","        }","","        element = element.offsetParent;","      } while (element);","","      return new Element.Offset(valueL, valueT);","    };","  }","","","  Element.addMethods({","    getLayout:              getLayout,","    measure:                measure,","    getWidth:               getWidth,","    getHeight:              getHeight,","    getDimensions:          getDimensions,","    getOffsetParent:        getOffsetParent,","    cumulativeOffset:       cumulativeOffset,","    positionedOffset:       positionedOffset,","    cumulativeScrollOffset: cumulativeScrollOffset,","    viewportOffset:         viewportOffset,","    absolutize:             absolutize,","    relativize:             relativize,","    scrollTo:               scrollTo,","    makePositioned:         makePositioned,","    undoPositioned:         undoPositioned,","    makeClipping:           makeClipping,","    undoClipping:           undoClipping,","    clonePosition:          clonePosition","  });","","  function isBody(element) {","    return element.nodeName.toUpperCase() === 'BODY';","  }","","  function isHtml(element) {","    return element.nodeName.toUpperCase() === 'HTML';","  }","","  function isDocument(element) {","    return element.nodeType === Node.DOCUMENT_NODE;","  }","","  function isDetached(element) {","    return element !== document.body &&","     !Element.descendantOf(element, document.body);","  }","","  if ('getBoundingClientRect' in document.documentElement) {","    Element.addMethods({","      viewportOffset: function(element) {","        element = $(element);","        if (isDetached(element)) return new Element.Offset(0, 0);","","        var rect = element.getBoundingClientRect(),","         docEl = document.documentElement;","        return new Element.Offset(rect.left - docEl.clientLeft,","         rect.top - docEl.clientTop);","      }","    });","  }","","","})();","","(function() {","","  var IS_OLD_OPERA = Prototype.Browser.Opera &&","   (window.parseFloat(window.opera.version()) < 9.5);","  var ROOT = null;","  function getRootElement() {","    if (ROOT) return ROOT;","    ROOT = IS_OLD_OPERA ? document.body : document.documentElement;","    return ROOT;","  }","","  function getDimensions() {","    return { width: this.getWidth(), height: this.getHeight() };","  }","","  function getWidth() {","    return getRootElement().clientWidth;","  }","","  function getHeight() {","    return getRootElement().clientHeight;","  }","","  function getScrollOffsets() {","    var x = window.pageXOffset || document.documentElement.scrollLeft ||","     document.body.scrollLeft;","    var y = window.pageYOffset || document.documentElement.scrollTop ||","     document.body.scrollTop;","","    return new Element.Offset(x, y);","  }","","  document.viewport = {","    getDimensions:    getDimensions,","    getWidth:         getWidth,","    getHeight:        getHeight,","    getScrollOffsets: getScrollOffsets","  };","","})();","window.$$ = function() {","  var expression = $A(arguments).join(', ');","  return Prototype.Selector.select(expression, document);","};","","Prototype.Selector = (function() {","","  function select() {","    throw new Error('Method \"Prototype.Selector.select\" must be defined.');","  }","","  function match() {","    throw new Error('Method \"Prototype.Selector.match\" must be defined.');","  }","","  function find(elements, expression, index) {","    index = index || 0;","    var match = Prototype.Selector.match, length = elements.length, matchIndex = 0, i;","","    for (i = 0; i < length; i++) {","      if (match(elements[i], expression) && index == matchIndex++) {","        return Element.extend(elements[i]);","      }","    }","  }","","  function extendElements(elements) {","    for (var i = 0, length = elements.length; i < length; i++) {","      Element.extend(elements[i]);","    }","    return elements;","  }","","","  var K = Prototype.K;","","  return {","    select: select,","    match: match,","    find: find,","    extendElements: (Element.extend === K) ? K : extendElements,","    extendElement: Element.extend","  };","})();","Prototype._original_property = window.Sizzle;","/*!"," * Sizzle CSS Selector Engine v@VERSION"," * http://sizzlejs.com/"," *"," * Copyright 2013 jQuery Foundation, Inc. and other contributors"," * Released under the MIT license"," * http://jquery.org/license"," *"," * Date: @DATE"," */","(function( window ) {","","var i,","\tsupport,","\tExpr,","\tgetText,","\tisXML,","\tcompile,","\tselect,","\toutermostContext,","\tsortInput,","\thasDuplicate,","","\tsetDocument,","\tdocument,","\tdocElem,","\tdocumentIsHTML,","\trbuggyQSA,","\trbuggyMatches,","\tmatches,","\tcontains,","","\texpando = \"sizzle\" + -(new Date()),","\tpreferredDoc = window.document,","\tdirruns = 0,","\tdone = 0,","\tclassCache = createCache(),","\ttokenCache = createCache(),","\tcompilerCache = createCache(),","\tsortOrder = function( a, b ) {","\t\tif ( a === b ) {","\t\t\thasDuplicate = true;","\t\t}","\t\treturn 0;","\t},","","\tstrundefined = typeof undefined,","\tMAX_NEGATIVE = 1 << 31,","","\thasOwn = ({}).hasOwnProperty,","\tarr = [],","\tpop = arr.pop,","\tpush_native = arr.push,","\tpush = arr.push,","\tslice = arr.slice,","\tindexOf = arr.indexOf || function( elem ) {","\t\tvar i = 0,","\t\t\tlen = this.length;","\t\tfor ( ; i < len; i++ ) {","\t\t\tif ( this[i] === elem ) {","\t\t\t\treturn i;","\t\t\t}","\t\t}","\t\treturn -1;","\t},","","\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",","","","\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",","\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",","","\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),","","\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +","\t\t\"*(?:([*^$|!~]?=)\" + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",","","\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",","","\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),","","\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),","\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),","","\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),","","\trpseudo = new RegExp( pseudos ),","\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),","","\tmatchExpr = {","\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),","\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),","\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),","\t\t\"ATTR\": new RegExp( \"^\" + attributes ),","\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),","\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +","\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +","\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),","\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),","\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +","\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )","\t},","","\trinputs = /^(?:input|select|textarea|button)$/i,","\trheader = /^h\\d$/i,","","\trnative = /^[^{]+\\{\\s*\\[native \\w/,","","\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,","","\trsibling = /[+~]/,","\trescape = /'|\\\\/g,","","\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),","\tfunescape = function( _, escaped, escapedWhitespace ) {","\t\tvar high = \"0x\" + escaped - 0x10000;","\t\treturn high !== high || escapedWhitespace ?","\t\t\tescaped :","\t\t\thigh < 0 ?","\t\t\t\tString.fromCharCode( high + 0x10000 ) :","\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );","\t};","","try {","\tpush.apply(","\t\t(arr = slice.call( preferredDoc.childNodes )),","\t\tpreferredDoc.childNodes","\t);","\tarr[ preferredDoc.childNodes.length ].nodeType;","} catch ( e ) {","\tpush = { apply: arr.length ?","","\t\tfunction( target, els ) {","\t\t\tpush_native.apply( target, slice.call(els) );","\t\t} :","","\t\tfunction( target, els ) {","\t\t\tvar j = target.length,","\t\t\t\ti = 0;","\t\t\twhile ( (target[j++] = els[i++]) ) {}","\t\t\ttarget.length = j - 1;","\t\t}","\t};","}","","function Sizzle( selector, context, results, seed ) {","\tvar match, elem, m, nodeType,","\t\ti, groups, old, nid, newContext, newSelector;","","\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {","\t\tsetDocument( context );","\t}","","\tcontext = context || document;","\tresults = results || [];","","\tif ( !selector || typeof selector !== \"string\" ) {","\t\treturn results;","\t}","","\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {","\t\treturn [];","\t}","","\tif ( documentIsHTML && !seed ) {","","\t\tif ( (match = rquickExpr.exec( selector )) ) {","\t\t\tif ( (m = match[1]) ) {","\t\t\t\tif ( nodeType === 9 ) {","\t\t\t\t\telem = context.getElementById( m );","\t\t\t\t\tif ( elem && elem.parentNode ) {","\t\t\t\t\t\tif ( elem.id === m ) {","\t\t\t\t\t\t\tresults.push( elem );","\t\t\t\t\t\t\treturn results;","\t\t\t\t\t\t}","\t\t\t\t\t} else {","\t\t\t\t\t\treturn results;","\t\t\t\t\t}","\t\t\t\t} else {","\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&","\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {","\t\t\t\t\t\tresults.push( elem );","\t\t\t\t\t\treturn results;","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t} else if ( match[2] ) {","\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );","\t\t\t\treturn results;","","\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {","\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );","\t\t\t\treturn results;","\t\t\t}","\t\t}","","\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {","\t\t\tnid = old = expando;","\t\t\tnewContext = context;","\t\t\tnewSelector = nodeType === 9 && selector;","","\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {","\t\t\t\tgroups = tokenize( selector );","","\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {","\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );","\t\t\t\t} else {","\t\t\t\t\tcontext.setAttribute( \"id\", nid );","\t\t\t\t}","\t\t\t\tnid = \"[id='\" + nid + \"'] \";","","\t\t\t\ti = groups.length;","\t\t\t\twhile ( i-- ) {","\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );","\t\t\t\t}","\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;","\t\t\t\tnewSelector = groups.join(\",\");","\t\t\t}","","\t\t\tif ( newSelector ) {","\t\t\t\ttry {","\t\t\t\t\tpush.apply( results,","\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )","\t\t\t\t\t);","\t\t\t\t\treturn results;","\t\t\t\t} catch(qsaError) {","\t\t\t\t} finally {","\t\t\t\t\tif ( !old ) {","\t\t\t\t\t\tcontext.removeAttribute(\"id\");","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","\t\t}","\t}","","\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );","}","","/**"," * Create key-value caches of limited size"," * @returns {Function(string, Object)} Returns the Object data after storing it on itself with"," *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)"," *\tdeleting the oldest entry"," */","function createCache() {","\tvar keys = [];","","\tfunction cache( key, value ) {","\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {","\t\t\tdelete cache[ keys.shift() ];","\t\t}","\t\treturn (cache[ key + \" \" ] = value);","\t}","\treturn cache;","}","","/**"," * Mark a function for special use by Sizzle"," * @param {Function} fn The function to mark"," */","function markFunction( fn ) {","\tfn[ expando ] = true;","\treturn fn;","}","","/**"," * Support testing using an element"," * @param {Function} fn Passed the created div and expects a boolean result"," */","function assert( fn ) {","\tvar div = document.createElement(\"div\");","","\ttry {","\t\treturn !!fn( div );","\t} catch (e) {","\t\treturn false;","\t} finally {","\t\tif ( div.parentNode ) {","\t\t\tdiv.parentNode.removeChild( div );","\t\t}","\t\tdiv = null;","\t}","}","","/**"," * Adds the same handler for all of the specified attrs"," * @param {String} attrs Pipe-separated list of attributes"," * @param {Function} handler The method that will be applied"," */","function addHandle( attrs, handler ) {","\tvar arr = attrs.split(\"|\"),","\t\ti = attrs.length;","","\twhile ( i-- ) {","\t\tExpr.attrHandle[ arr[i] ] = handler;","\t}","}","","/**"," * Checks document order of two siblings"," * @param {Element} a"," * @param {Element} b"," * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b"," */","function siblingCheck( a, b ) {","\tvar cur = b && a,","\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&","\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -","\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );","","\tif ( diff ) {","\t\treturn diff;","\t}","","\tif ( cur ) {","\t\twhile ( (cur = cur.nextSibling) ) {","\t\t\tif ( cur === b ) {","\t\t\t\treturn -1;","\t\t\t}","\t\t}","\t}","","\treturn a ? 1 : -1;","}","","/**"," * Returns a function to use in pseudos for input types"," * @param {String} type"," */","function createInputPseudo( type ) {","\treturn function( elem ) {","\t\tvar name = elem.nodeName.toLowerCase();","\t\treturn name === \"input\" && elem.type === type;","\t};","}","","/**"," * Returns a function to use in pseudos for buttons"," * @param {String} type"," */","function createButtonPseudo( type ) {","\treturn function( elem ) {","\t\tvar name = elem.nodeName.toLowerCase();","\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;","\t};","}","","/**"," * Returns a function to use in pseudos for positionals"," * @param {Function} fn"," */","function createPositionalPseudo( fn ) {","\treturn markFunction(function( argument ) {","\t\targument = +argument;","\t\treturn markFunction(function( seed, matches ) {","\t\t\tvar j,","\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),","\t\t\t\ti = matchIndexes.length;","","\t\t\twhile ( i-- ) {","\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {","\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);","\t\t\t\t}","\t\t\t}","\t\t});","\t});","}","","/**"," * Checks a node for validity as a Sizzle context"," * @param {Element|Object=} context"," * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value"," */","function testContext( context ) {","\treturn context && typeof context.getElementsByTagName !== strundefined && context;","}","","support = Sizzle.support = {};","","/**"," * Detects XML nodes"," * @param {Element|Object} elem An element or a document"," * @returns {Boolean} True iff elem is a non-HTML XML node"," */","isXML = Sizzle.isXML = function( elem ) {","\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;","\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;","};","","/**"," * Sets document-related variables once based on the current document"," * @param {Element|Object} [doc] An element or document object to use to set the document"," * @returns {Object} Returns the current document"," */","setDocument = Sizzle.setDocument = function( node ) {","\tvar hasCompare,","\t\tdoc = node ? node.ownerDocument || node : preferredDoc,","\t\tparent = doc.defaultView;","","\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {","\t\treturn document;","\t}","","\tdocument = doc;","\tdocElem = doc.documentElement;","","\tdocumentIsHTML = !isXML( doc );","","\tif ( parent && parent !== parent.top ) {","\t\tif ( parent.addEventListener ) {","\t\t\tparent.addEventListener( \"unload\", function() {","\t\t\t\tsetDocument();","\t\t\t}, false );","\t\t} else if ( parent.attachEvent ) {","\t\t\tparent.attachEvent( \"onunload\", function() {","\t\t\t\tsetDocument();","\t\t\t});","\t\t}","\t}","","\t/* Attributes","\t---------------------------------------------------------------------- */","","\tsupport.attributes = assert(function( div ) {","\t\tdiv.className = \"i\";","\t\treturn !div.getAttribute(\"className\");","\t});","","\t/* getElement(s)By*","\t---------------------------------------------------------------------- */","","\tsupport.getElementsByTagName = assert(function( div ) {","\t\tdiv.appendChild( doc.createComment(\"\") );","\t\treturn !div.getElementsByTagName(\"*\").length;","\t});","","\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {","\t\tdiv.innerHTML = \"<div class='a'></div><div class='a i'></div>\";","","\t\tdiv.firstChild.className = \"i\";","\t\treturn div.getElementsByClassName(\"i\").length === 2;","\t});","","\tsupport.getById = assert(function( div ) {","\t\tdocElem.appendChild( div ).id = expando;","\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;","\t});","","\tif ( support.getById ) {","\t\tExpr.find[\"ID\"] = function( id, context ) {","\t\t\tif ( typeof context.getElementById !== strundefined && documentIsHTML ) {","\t\t\t\tvar m = context.getElementById( id );","\t\t\t\treturn m && m.parentNode ? [m] : [];","\t\t\t}","\t\t};","\t\tExpr.filter[\"ID\"] = function( id ) {","\t\t\tvar attrId = id.replace( runescape, funescape );","\t\t\treturn function( elem ) {","\t\t\t\treturn elem.getAttribute(\"id\") === attrId;","\t\t\t};","\t\t};","\t} else {","\t\tdelete Expr.find[\"ID\"];","","\t\tExpr.filter[\"ID\"] =  function( id ) {","\t\t\tvar attrId = id.replace( runescape, funescape );","\t\t\treturn function( elem ) {","\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");","\t\t\t\treturn node && node.value === attrId;","\t\t\t};","\t\t};","\t}","","\tExpr.find[\"TAG\"] = support.getElementsByTagName ?","\t\tfunction( tag, context ) {","\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {","\t\t\t\treturn context.getElementsByTagName( tag );","\t\t\t}","\t\t} :","\t\tfunction( tag, context ) {","\t\t\tvar elem,","\t\t\t\ttmp = [],","\t\t\t\ti = 0,","\t\t\t\tresults = context.getElementsByTagName( tag );","","\t\t\tif ( tag === \"*\" ) {","\t\t\t\twhile ( (elem = results[i++]) ) {","\t\t\t\t\tif ( elem.nodeType === 1 ) {","\t\t\t\t\t\ttmp.push( elem );","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\treturn tmp;","\t\t\t}","\t\t\treturn results;","\t\t};","","\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {","\t\tif ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {","\t\t\treturn context.getElementsByClassName( className );","\t\t}","\t};","","\t/* QSA/matchesSelector","\t---------------------------------------------------------------------- */","","","\trbuggyMatches = [];","","\trbuggyQSA = [];","","\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {","\t\tassert(function( div ) {","\t\t\tdiv.innerHTML = \"<select t=''><option selected=''></option></select>\";","","\t\t\tif ( div.querySelectorAll(\"[t^='']\").length ) {","\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );","\t\t\t}","","\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {","\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );","\t\t\t}","","\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {","\t\t\t\trbuggyQSA.push(\":checked\");","\t\t\t}","\t\t});","","\t\tassert(function( div ) {","\t\t\tvar input = doc.createElement(\"input\");","\t\t\tinput.setAttribute( \"type\", \"hidden\" );","\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );","","\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {","\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );","\t\t\t}","","\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {","\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );","\t\t\t}","","\t\t\tdiv.querySelectorAll(\"*,:x\");","\t\t\trbuggyQSA.push(\",.*:\");","\t\t});","\t}","","\tif ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||","\t\tdocElem.mozMatchesSelector ||","\t\tdocElem.oMatchesSelector ||","\t\tdocElem.msMatchesSelector) )) ) {","","\t\tassert(function( div ) {","\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );","","\t\t\tmatches.call( div, \"[s!='']:x\" );","\t\t\trbuggyMatches.push( \"!=\", pseudos );","\t\t});","\t}","","\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );","\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );","","\t/* Contains","\t---------------------------------------------------------------------- */","\thasCompare = rnative.test( docElem.compareDocumentPosition );","","\tcontains = hasCompare || rnative.test( docElem.contains ) ?","\t\tfunction( a, b ) {","\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,","\t\t\t\tbup = b && b.parentNode;","\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (","\t\t\t\tadown.contains ?","\t\t\t\t\tadown.contains( bup ) :","\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16","\t\t\t));","\t\t} :","\t\tfunction( a, b ) {","\t\t\tif ( b ) {","\t\t\t\twhile ( (b = b.parentNode) ) {","\t\t\t\t\tif ( b === a ) {","\t\t\t\t\t\treturn true;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","\t\t\treturn false;","\t\t};","","\t/* Sorting","\t---------------------------------------------------------------------- */","","\tsortOrder = hasCompare ?","\tfunction( a, b ) {","","\t\tif ( a === b ) {","\t\t\thasDuplicate = true;","\t\t\treturn 0;","\t\t}","","\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;","\t\tif ( compare ) {","\t\t\treturn compare;","\t\t}","","\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?","\t\t\ta.compareDocumentPosition( b ) :","","\t\t\t1;","","\t\tif ( compare & 1 ||","\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {","","\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {","\t\t\t\treturn -1;","\t\t\t}","\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {","\t\t\t\treturn 1;","\t\t\t}","","\t\t\treturn sortInput ?","\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :","\t\t\t\t0;","\t\t}","","\t\treturn compare & 4 ? -1 : 1;","\t} :","\tfunction( a, b ) {","\t\tif ( a === b ) {","\t\t\thasDuplicate = true;","\t\t\treturn 0;","\t\t}","","\t\tvar cur,","\t\t\ti = 0,","\t\t\taup = a.parentNode,","\t\t\tbup = b.parentNode,","\t\t\tap = [ a ],","\t\t\tbp = [ b ];","","\t\tif ( !aup || !bup ) {","\t\t\treturn a === doc ? -1 :","\t\t\t\tb === doc ? 1 :","\t\t\t\taup ? -1 :","\t\t\t\tbup ? 1 :","\t\t\t\tsortInput ?","\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :","\t\t\t\t0;","","\t\t} else if ( aup === bup ) {","\t\t\treturn siblingCheck( a, b );","\t\t}","","\t\tcur = a;","\t\twhile ( (cur = cur.parentNode) ) {","\t\t\tap.unshift( cur );","\t\t}","\t\tcur = b;","\t\twhile ( (cur = cur.parentNode) ) {","\t\t\tbp.unshift( cur );","\t\t}","","\t\twhile ( ap[i] === bp[i] ) {","\t\t\ti++;","\t\t}","","\t\treturn i ?","\t\t\tsiblingCheck( ap[i], bp[i] ) :","","\t\t\tap[i] === preferredDoc ? -1 :","\t\t\tbp[i] === preferredDoc ? 1 :","\t\t\t0;","\t};","","\treturn doc;","};","","Sizzle.matches = function( expr, elements ) {","\treturn Sizzle( expr, null, null, elements );","};","","Sizzle.matchesSelector = function( elem, expr ) {","\tif ( ( elem.ownerDocument || elem ) !== document ) {","\t\tsetDocument( elem );","\t}","","\texpr = expr.replace( rattributeQuotes, \"='$1']\" );","","\tif ( support.matchesSelector && documentIsHTML &&","\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&","\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {","","\t\ttry {","\t\t\tvar ret = matches.call( elem, expr );","","\t\t\tif ( ret || support.disconnectedMatch ||","\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {","\t\t\t\treturn ret;","\t\t\t}","\t\t} catch(e) {}","\t}","","\treturn Sizzle( expr, document, null, [elem] ).length > 0;","};","","Sizzle.contains = function( context, elem ) {","\tif ( ( context.ownerDocument || context ) !== document ) {","\t\tsetDocument( context );","\t}","\treturn contains( context, elem );","};","","Sizzle.attr = function( elem, name ) {","\tif ( ( elem.ownerDocument || elem ) !== document ) {","\t\tsetDocument( elem );","\t}","","\tvar fn = Expr.attrHandle[ name.toLowerCase() ],","\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?","\t\t\tfn( elem, name, !documentIsHTML ) :","\t\t\tundefined;","","\treturn val !== undefined ?","\t\tval :","\t\tsupport.attributes || !documentIsHTML ?","\t\t\telem.getAttribute( name ) :","\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?","\t\t\t\tval.value :","\t\t\t\tnull;","};","","Sizzle.error = function( msg ) {","\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );","};","","/**"," * Document sorting and removing duplicates"," * @param {ArrayLike} results"," */","Sizzle.uniqueSort = function( results ) {","\tvar elem,","\t\tduplicates = [],","\t\tj = 0,","\t\ti = 0;","","\thasDuplicate = !support.detectDuplicates;","\tsortInput = !support.sortStable && results.slice( 0 );","\tresults.sort( sortOrder );","","\tif ( hasDuplicate ) {","\t\twhile ( (elem = results[i++]) ) {","\t\t\tif ( elem === results[ i ] ) {","\t\t\t\tj = duplicates.push( i );","\t\t\t}","\t\t}","\t\twhile ( j-- ) {","\t\t\tresults.splice( duplicates[ j ], 1 );","\t\t}","\t}","","\tsortInput = null;","","\treturn results;","};","","/**"," * Utility function for retrieving the text value of an array of DOM nodes"," * @param {Array|Element} elem"," */","getText = Sizzle.getText = function( elem ) {","\tvar node,","\t\tret = \"\",","\t\ti = 0,","\t\tnodeType = elem.nodeType;","","\tif ( !nodeType ) {","\t\twhile ( (node = elem[i++]) ) {","\t\t\tret += getText( node );","\t\t}","\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {","\t\tif ( typeof elem.textContent === \"string\" ) {","\t\t\treturn elem.textContent;","\t\t} else {","\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {","\t\t\t\tret += getText( elem );","\t\t\t}","\t\t}","\t} else if ( nodeType === 3 || nodeType === 4 ) {","\t\treturn elem.nodeValue;","\t}","","\treturn ret;","};","","Expr = Sizzle.selectors = {","","\tcacheLength: 50,","","\tcreatePseudo: markFunction,","","\tmatch: matchExpr,","","\tattrHandle: {},","","\tfind: {},","","\trelative: {","\t\t\">\": { dir: \"parentNode\", first: true },","\t\t\" \": { dir: \"parentNode\" },","\t\t\"+\": { dir: \"previousSibling\", first: true },","\t\t\"~\": { dir: \"previousSibling\" }","\t},","","\tpreFilter: {","\t\t\"ATTR\": function( match ) {","\t\t\tmatch[1] = match[1].replace( runescape, funescape );","","\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );","","\t\t\tif ( match[2] === \"~=\" ) {","\t\t\t\tmatch[3] = \" \" + match[3] + \" \";","\t\t\t}","","\t\t\treturn match.slice( 0, 4 );","\t\t},","","\t\t\"CHILD\": function( match ) {","\t\t\t/* matches from matchExpr[\"CHILD\"]","\t\t\t\t1 type (only|nth|...)","\t\t\t\t2 what (child|of-type)","\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)","\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)","\t\t\t\t5 sign of xn-component","\t\t\t\t6 x of xn-component","\t\t\t\t7 sign of y-component","\t\t\t\t8 y of y-component","\t\t\t*/","\t\t\tmatch[1] = match[1].toLowerCase();","","\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {","\t\t\t\tif ( !match[3] ) {","\t\t\t\t\tSizzle.error( match[0] );","\t\t\t\t}","","\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );","\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );","","\t\t\t} else if ( match[3] ) {","\t\t\t\tSizzle.error( match[0] );","\t\t\t}","","\t\t\treturn match;","\t\t},","","\t\t\"PSEUDO\": function( match ) {","\t\t\tvar excess,","\t\t\t\tunquoted = !match[5] && match[2];","","\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {","\t\t\t\treturn null;","\t\t\t}","","\t\t\tif ( match[3] && match[4] !== undefined ) {","\t\t\t\tmatch[2] = match[4];","","\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&","\t\t\t\t(excess = tokenize( unquoted, true )) &&","\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {","","\t\t\t\tmatch[0] = match[0].slice( 0, excess );","\t\t\t\tmatch[2] = unquoted.slice( 0, excess );","\t\t\t}","","\t\t\treturn match.slice( 0, 3 );","\t\t}","\t},","","\tfilter: {","","\t\t\"TAG\": function( nodeNameSelector ) {","\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();","\t\t\treturn nodeNameSelector === \"*\" ?","\t\t\t\tfunction() { return true; } :","\t\t\t\tfunction( elem ) {","\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;","\t\t\t\t};","\t\t},","","\t\t\"CLASS\": function( className ) {","\t\t\tvar pattern = classCache[ className + \" \" ];","","\t\t\treturn pattern ||","\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&","\t\t\t\tclassCache( className, function( elem ) {","\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\") || \"\" );","\t\t\t\t});","\t\t},","","\t\t\"ATTR\": function( name, operator, check ) {","\t\t\treturn function( elem ) {","\t\t\t\tvar result = Sizzle.attr( elem, name );","","\t\t\t\tif ( result == null ) {","\t\t\t\t\treturn operator === \"!=\";","\t\t\t\t}","\t\t\t\tif ( !operator ) {","\t\t\t\t\treturn true;","\t\t\t\t}","","\t\t\t\tresult += \"\";","","\t\t\t\treturn operator === \"=\" ? result === check :","\t\t\t\t\toperator === \"!=\" ? result !== check :","\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :","\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :","\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :","\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :","\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :","\t\t\t\t\tfalse;","\t\t\t};","\t\t},","","\t\t\"CHILD\": function( type, what, argument, first, last ) {","\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",","\t\t\t\tforward = type.slice( -4 ) !== \"last\",","\t\t\t\tofType = what === \"of-type\";","","\t\t\treturn first === 1 && last === 0 ?","","\t\t\t\tfunction( elem ) {","\t\t\t\t\treturn !!elem.parentNode;","\t\t\t\t} :","","\t\t\t\tfunction( elem, context, xml ) {","\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,","\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",","\t\t\t\t\t\tparent = elem.parentNode,","\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),","\t\t\t\t\t\tuseCache = !xml && !ofType;","","\t\t\t\t\tif ( parent ) {","","\t\t\t\t\t\tif ( simple ) {","\t\t\t\t\t\t\twhile ( dir ) {","\t\t\t\t\t\t\t\tnode = elem;","\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {","\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {","\t\t\t\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\treturn true;","\t\t\t\t\t\t}","","\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];","","\t\t\t\t\t\tif ( forward && useCache ) {","\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});","\t\t\t\t\t\t\tcache = outerCache[ type ] || [];","\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];","\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];","\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];","","\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||","","\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {","","\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {","\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];","\t\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}","","\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {","\t\t\t\t\t\t\tdiff = cache[1];","","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||","\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {","","\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {","\t\t\t\t\t\t\t\t\tif ( useCache ) {","\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];","\t\t\t\t\t\t\t\t\t}","","\t\t\t\t\t\t\t\t\tif ( node === elem ) {","\t\t\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","","\t\t\t\t\t\tdiff -= last;","\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );","\t\t\t\t\t}","\t\t\t\t};","\t\t},","","\t\t\"PSEUDO\": function( pseudo, argument ) {","\t\t\tvar args,","\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||","\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );","","\t\t\tif ( fn[ expando ] ) {","\t\t\t\treturn fn( argument );","\t\t\t}","","\t\t\tif ( fn.length > 1 ) {","\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];","\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?","\t\t\t\t\tmarkFunction(function( seed, matches ) {","\t\t\t\t\t\tvar idx,","\t\t\t\t\t\t\tmatched = fn( seed, argument ),","\t\t\t\t\t\t\ti = matched.length;","\t\t\t\t\t\twhile ( i-- ) {","\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );","\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );","\t\t\t\t\t\t}","\t\t\t\t\t}) :","\t\t\t\t\tfunction( elem ) {","\t\t\t\t\t\treturn fn( elem, 0, args );","\t\t\t\t\t};","\t\t\t}","","\t\t\treturn fn;","\t\t}","\t},","","\tpseudos: {","\t\t\"not\": markFunction(function( selector ) {","\t\t\tvar input = [],","\t\t\t\tresults = [],","\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );","","\t\t\treturn matcher[ expando ] ?","\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {","\t\t\t\t\tvar elem,","\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),","\t\t\t\t\t\ti = seed.length;","","\t\t\t\t\twhile ( i-- ) {","\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {","\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}) :","\t\t\t\tfunction( elem, context, xml ) {","\t\t\t\t\tinput[0] = elem;","\t\t\t\t\tmatcher( input, null, xml, results );","\t\t\t\t\treturn !results.pop();","\t\t\t\t};","\t\t}),","","\t\t\"has\": markFunction(function( selector ) {","\t\t\treturn function( elem ) {","\t\t\t\treturn Sizzle( selector, elem ).length > 0;","\t\t\t};","\t\t}),","","\t\t\"contains\": markFunction(function( text ) {","\t\t\treturn function( elem ) {","\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;","\t\t\t};","\t\t}),","","\t\t\"lang\": markFunction( function( lang ) {","\t\t\tif ( !ridentifier.test(lang || \"\") ) {","\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );","\t\t\t}","\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();","\t\t\treturn function( elem ) {","\t\t\t\tvar elemLang;","\t\t\t\tdo {","\t\t\t\t\tif ( (elemLang = documentIsHTML ?","\t\t\t\t\t\telem.lang :","\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {","","\t\t\t\t\t\telemLang = elemLang.toLowerCase();","\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;","\t\t\t\t\t}","\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );","\t\t\t\treturn false;","\t\t\t};","\t\t}),","","\t\t\"target\": function( elem ) {","\t\t\tvar hash = window.location && window.location.hash;","\t\t\treturn hash && hash.slice( 1 ) === elem.id;","\t\t},","","\t\t\"root\": function( elem ) {","\t\t\treturn elem === docElem;","\t\t},","","\t\t\"focus\": function( elem ) {","\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);","\t\t},","","\t\t\"enabled\": function( elem ) {","\t\t\treturn elem.disabled === false;","\t\t},","","\t\t\"disabled\": function( elem ) {","\t\t\treturn elem.disabled === true;","\t\t},","","\t\t\"checked\": function( elem ) {","\t\t\tvar nodeName = elem.nodeName.toLowerCase();","\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);","\t\t},","","\t\t\"selected\": function( elem ) {","\t\t\tif ( elem.parentNode ) {","\t\t\t\telem.parentNode.selectedIndex;","\t\t\t}","","\t\t\treturn elem.selected === true;","\t\t},","","\t\t\"empty\": function( elem ) {","\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {","\t\t\t\tif ( elem.nodeType < 6 ) {","\t\t\t\t\treturn false;","\t\t\t\t}","\t\t\t}","\t\t\treturn true;","\t\t},","","\t\t\"parent\": function( elem ) {","\t\t\treturn !Expr.pseudos[\"empty\"]( elem );","\t\t},","","\t\t\"header\": function( elem ) {","\t\t\treturn rheader.test( elem.nodeName );","\t\t},","","\t\t\"input\": function( elem ) {","\t\t\treturn rinputs.test( elem.nodeName );","\t\t},","","\t\t\"button\": function( elem ) {","\t\t\tvar name = elem.nodeName.toLowerCase();","\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";","\t\t},","","\t\t\"text\": function( elem ) {","\t\t\tvar attr;","\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&","\t\t\t\telem.type === \"text\" &&","","\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );","\t\t},","","\t\t\"first\": createPositionalPseudo(function() {","\t\t\treturn [ 0 ];","\t\t}),","","\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {","\t\t\treturn [ length - 1 ];","\t\t}),","","\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {","\t\t\treturn [ argument < 0 ? argument + length : argument ];","\t\t}),","","\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {","\t\t\tvar i = 0;","\t\t\tfor ( ; i < length; i += 2 ) {","\t\t\t\tmatchIndexes.push( i );","\t\t\t}","\t\t\treturn matchIndexes;","\t\t}),","","\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {","\t\t\tvar i = 1;","\t\t\tfor ( ; i < length; i += 2 ) {","\t\t\t\tmatchIndexes.push( i );","\t\t\t}","\t\t\treturn matchIndexes;","\t\t}),","","\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {","\t\t\tvar i = argument < 0 ? argument + length : argument;","\t\t\tfor ( ; --i >= 0; ) {","\t\t\t\tmatchIndexes.push( i );","\t\t\t}","\t\t\treturn matchIndexes;","\t\t}),","","\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {","\t\t\tvar i = argument < 0 ? argument + length : argument;","\t\t\tfor ( ; ++i < length; ) {","\t\t\t\tmatchIndexes.push( i );","\t\t\t}","\t\t\treturn matchIndexes;","\t\t})","\t}","};","","Expr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];","","for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {","\tExpr.pseudos[ i ] = createInputPseudo( i );","}","for ( i in { submit: true, reset: true } ) {","\tExpr.pseudos[ i ] = createButtonPseudo( i );","}","","function setFilters() {}","setFilters.prototype = Expr.filters = Expr.pseudos;","Expr.setFilters = new setFilters();","","function tokenize( selector, parseOnly ) {","\tvar matched, match, tokens, type,","\t\tsoFar, groups, preFilters,","\t\tcached = tokenCache[ selector + \" \" ];","","\tif ( cached ) {","\t\treturn parseOnly ? 0 : cached.slice( 0 );","\t}","","\tsoFar = selector;","\tgroups = [];","\tpreFilters = Expr.preFilter;","","\twhile ( soFar ) {","","\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {","\t\t\tif ( match ) {","\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;","\t\t\t}","\t\t\tgroups.push( (tokens = []) );","\t\t}","","\t\tmatched = false;","","\t\tif ( (match = rcombinators.exec( soFar )) ) {","\t\t\tmatched = match.shift();","\t\t\ttokens.push({","\t\t\t\tvalue: matched,","\t\t\t\ttype: match[0].replace( rtrim, \" \" )","\t\t\t});","\t\t\tsoFar = soFar.slice( matched.length );","\t\t}","","\t\tfor ( type in Expr.filter ) {","\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||","\t\t\t\t(match = preFilters[ type ]( match ))) ) {","\t\t\t\tmatched = match.shift();","\t\t\t\ttokens.push({","\t\t\t\t\tvalue: matched,","\t\t\t\t\ttype: type,","\t\t\t\t\tmatches: match","\t\t\t\t});","\t\t\t\tsoFar = soFar.slice( matched.length );","\t\t\t}","\t\t}","","\t\tif ( !matched ) {","\t\t\tbreak;","\t\t}","\t}","","\treturn parseOnly ?","\t\tsoFar.length :","\t\tsoFar ?","\t\t\tSizzle.error( selector ) :","\t\t\ttokenCache( selector, groups ).slice( 0 );","}","","function toSelector( tokens ) {","\tvar i = 0,","\t\tlen = tokens.length,","\t\tselector = \"\";","\tfor ( ; i < len; i++ ) {","\t\tselector += tokens[i].value;","\t}","\treturn selector;","}","","function addCombinator( matcher, combinator, base ) {","\tvar dir = combinator.dir,","\t\tcheckNonElements = base && dir === \"parentNode\",","\t\tdoneName = done++;","","\treturn combinator.first ?","\t\tfunction( elem, context, xml ) {","\t\t\twhile ( (elem = elem[ dir ]) ) {","\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","\t\t\t\t\treturn matcher( elem, context, xml );","\t\t\t\t}","\t\t\t}","\t\t} :","","\t\tfunction( elem, context, xml ) {","\t\t\tvar oldCache, outerCache,","\t\t\t\tnewCache = [ dirruns, doneName ];","","\t\t\tif ( xml ) {","\t\t\t\twhile ( (elem = elem[ dir ]) ) {","\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {","\t\t\t\t\t\t\treturn true;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t} else {","\t\t\t\twhile ( (elem = elem[ dir ]) ) {","\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});","\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&","\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {","","\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\touterCache[ dir ] = newCache;","","\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {","\t\t\t\t\t\t\t\treturn true;","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","\t\t};","}","","function elementMatcher( matchers ) {","\treturn matchers.length > 1 ?","\t\tfunction( elem, context, xml ) {","\t\t\tvar i = matchers.length;","\t\t\twhile ( i-- ) {","\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {","\t\t\t\t\treturn false;","\t\t\t\t}","\t\t\t}","\t\t\treturn true;","\t\t} :","\t\tmatchers[0];","}","","function multipleContexts( selector, contexts, results ) {","\tvar i = 0,","\t\tlen = contexts.length;","\tfor ( ; i < len; i++ ) {","\t\tSizzle( selector, contexts[i], results );","\t}","\treturn results;","}","","function condense( unmatched, map, filter, context, xml ) {","\tvar elem,","\t\tnewUnmatched = [],","\t\ti = 0,","\t\tlen = unmatched.length,","\t\tmapped = map != null;","","\tfor ( ; i < len; i++ ) {","\t\tif ( (elem = unmatched[i]) ) {","\t\t\tif ( !filter || filter( elem, context, xml ) ) {","\t\t\t\tnewUnmatched.push( elem );","\t\t\t\tif ( mapped ) {","\t\t\t\t\tmap.push( i );","\t\t\t\t}","\t\t\t}","\t\t}","\t}","","\treturn newUnmatched;","}","","function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {","\tif ( postFilter && !postFilter[ expando ] ) {","\t\tpostFilter = setMatcher( postFilter );","\t}","\tif ( postFinder && !postFinder[ expando ] ) {","\t\tpostFinder = setMatcher( postFinder, postSelector );","\t}","\treturn markFunction(function( seed, results, context, xml ) {","\t\tvar temp, i, elem,","\t\t\tpreMap = [],","\t\t\tpostMap = [],","\t\t\tpreexisting = results.length,","","\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),","","\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?","\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :","\t\t\t\telems,","","\t\t\tmatcherOut = matcher ?","\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?","","\t\t\t\t\t[] :","","\t\t\t\t\tresults :","\t\t\t\tmatcherIn;","","\t\tif ( matcher ) {","\t\t\tmatcher( matcherIn, matcherOut, context, xml );","\t\t}","","\t\tif ( postFilter ) {","\t\t\ttemp = condense( matcherOut, postMap );","\t\t\tpostFilter( temp, [], context, xml );","","\t\t\ti = temp.length;","\t\t\twhile ( i-- ) {","\t\t\t\tif ( (elem = temp[i]) ) {","\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);","\t\t\t\t}","\t\t\t}","\t\t}","","\t\tif ( seed ) {","\t\t\tif ( postFinder || preFilter ) {","\t\t\t\tif ( postFinder ) {","\t\t\t\t\ttemp = [];","\t\t\t\t\ti = matcherOut.length;","\t\t\t\t\twhile ( i-- ) {","\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {","\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );","\t\t\t\t}","","\t\t\t\ti = matcherOut.length;","\t\t\t\twhile ( i-- ) {","\t\t\t\t\tif ( (elem = matcherOut[i]) &&","\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {","","\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t} else {","\t\t\tmatcherOut = condense(","\t\t\t\tmatcherOut === results ?","\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :","\t\t\t\t\tmatcherOut","\t\t\t);","\t\t\tif ( postFinder ) {","\t\t\t\tpostFinder( null, results, matcherOut, xml );","\t\t\t} else {","\t\t\t\tpush.apply( results, matcherOut );","\t\t\t}","\t\t}","\t});","}","","function matcherFromTokens( tokens ) {","\tvar checkContext, matcher, j,","\t\tlen = tokens.length,","\t\tleadingRelative = Expr.relative[ tokens[0].type ],","\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],","\t\ti = leadingRelative ? 1 : 0,","","\t\tmatchContext = addCombinator( function( elem ) {","\t\t\treturn elem === checkContext;","\t\t}, implicitRelative, true ),","\t\tmatchAnyContext = addCombinator( function( elem ) {","\t\t\treturn indexOf.call( checkContext, elem ) > -1;","\t\t}, implicitRelative, true ),","\t\tmatchers = [ function( elem, context, xml ) {","\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (","\t\t\t\t(checkContext = context).nodeType ?","\t\t\t\t\tmatchContext( elem, context, xml ) :","\t\t\t\t\tmatchAnyContext( elem, context, xml ) );","\t\t} ];","","\tfor ( ; i < len; i++ ) {","\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {","\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];","\t\t} else {","\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );","","\t\t\tif ( matcher[ expando ] ) {","\t\t\t\tj = ++i;","\t\t\t\tfor ( ; j < len; j++ ) {","\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {","\t\t\t\t\t\tbreak;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\treturn setMatcher(","\t\t\t\t\ti > 1 && elementMatcher( matchers ),","\t\t\t\t\ti > 1 && toSelector(","\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })","\t\t\t\t\t).replace( rtrim, \"$1\" ),","\t\t\t\t\tmatcher,","\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),","\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),","\t\t\t\t\tj < len && toSelector( tokens )","\t\t\t\t);","\t\t\t}","\t\t\tmatchers.push( matcher );","\t\t}","\t}","","\treturn elementMatcher( matchers );","}","","function matcherFromGroupMatchers( elementMatchers, setMatchers ) {","\tvar bySet = setMatchers.length > 0,","\t\tbyElement = elementMatchers.length > 0,","\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {","\t\t\tvar elem, j, matcher,","\t\t\t\tmatchedCount = 0,","\t\t\t\ti = \"0\",","\t\t\t\tunmatched = seed && [],","\t\t\t\tsetMatched = [],","\t\t\t\tcontextBackup = outermostContext,","\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),","\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),","\t\t\t\tlen = elems.length;","","\t\t\tif ( outermost ) {","\t\t\t\toutermostContext = context !== document && context;","\t\t\t}","","\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {","\t\t\t\tif ( byElement && elem ) {","\t\t\t\t\tj = 0;","\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {","\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {","\t\t\t\t\t\t\tresults.push( elem );","\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\tif ( outermost ) {","\t\t\t\t\t\tdirruns = dirrunsUnique;","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\tif ( bySet ) {","\t\t\t\t\tif ( (elem = !matcher && elem) ) {","\t\t\t\t\t\tmatchedCount--;","\t\t\t\t\t}","","\t\t\t\t\tif ( seed ) {","\t\t\t\t\t\tunmatched.push( elem );","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","\t\t\tmatchedCount += i;","\t\t\tif ( bySet && i !== matchedCount ) {","\t\t\t\tj = 0;","\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {","\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );","\t\t\t\t}","","\t\t\t\tif ( seed ) {","\t\t\t\t\tif ( matchedCount > 0 ) {","\t\t\t\t\t\twhile ( i-- ) {","\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {","\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","","\t\t\t\t\tsetMatched = condense( setMatched );","\t\t\t\t}","","\t\t\t\tpush.apply( results, setMatched );","","\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&","\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {","","\t\t\t\t\tSizzle.uniqueSort( results );","\t\t\t\t}","\t\t\t}","","\t\t\tif ( outermost ) {","\t\t\t\tdirruns = dirrunsUnique;","\t\t\t\toutermostContext = contextBackup;","\t\t\t}","","\t\t\treturn unmatched;","\t\t};","","\treturn bySet ?","\t\tmarkFunction( superMatcher ) :","\t\tsuperMatcher;","}","","compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {","\tvar i,","\t\tsetMatchers = [],","\t\telementMatchers = [],","\t\tcached = compilerCache[ selector + \" \" ];","","\tif ( !cached ) {","\t\tif ( !match ) {","\t\t\tmatch = tokenize( selector );","\t\t}","\t\ti = match.length;","\t\twhile ( i-- ) {","\t\t\tcached = matcherFromTokens( match[i] );","\t\t\tif ( cached[ expando ] ) {","\t\t\t\tsetMatchers.push( cached );","\t\t\t} else {","\t\t\t\telementMatchers.push( cached );","\t\t\t}","\t\t}","","\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );","","\t\tcached.selector = selector;","\t}","\treturn cached;","};","","/**"," * A low-level selection function that works with Sizzle's compiled"," *  selector functions"," * @param {String|Function} selector A selector or a pre-compiled"," *  selector function built with Sizzle.compile"," * @param {Element} context"," * @param {Array} [results]"," * @param {Array} [seed] A set of elements to match against"," */","select = Sizzle.select = function( selector, context, results, seed ) {","\tvar i, tokens, token, type, find,","\t\tcompiled = typeof selector === \"function\" && selector,","\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );","","\tresults = results || [];","","\tif ( match.length === 1 ) {","","\t\ttokens = match[0] = match[0].slice( 0 );","\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&","\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&","\t\t\t\tExpr.relative[ tokens[1].type ] ) {","","\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];","\t\t\tif ( !context ) {","\t\t\t\treturn results;","","\t\t\t} else if ( compiled ) {","\t\t\t\tcontext = context.parentNode;","\t\t\t}","","\t\t\tselector = selector.slice( tokens.shift().value.length );","\t\t}","","\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;","\t\twhile ( i-- ) {","\t\t\ttoken = tokens[i];","","\t\t\tif ( Expr.relative[ (type = token.type) ] ) {","\t\t\t\tbreak;","\t\t\t}","\t\t\tif ( (find = Expr.find[ type ]) ) {","\t\t\t\tif ( (seed = find(","\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),","\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context","\t\t\t\t)) ) {","","\t\t\t\t\ttokens.splice( i, 1 );","\t\t\t\t\tselector = seed.length && toSelector( tokens );","\t\t\t\t\tif ( !selector ) {","\t\t\t\t\t\tpush.apply( results, seed );","\t\t\t\t\t\treturn results;","\t\t\t\t\t}","","\t\t\t\t\tbreak;","\t\t\t\t}","\t\t\t}","\t\t}","\t}","","\t( compiled || compile( selector, match ) )(","\t\tseed,","\t\tcontext,","\t\t!documentIsHTML,","\t\tresults,","\t\trsibling.test( selector ) && testContext( context.parentNode ) || context","\t);","\treturn results;","};","","","support.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;","","support.detectDuplicates = !!hasDuplicate;","","setDocument();","","support.sortDetached = assert(function( div1 ) {","\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;","});","","if ( !assert(function( div ) {","\tdiv.innerHTML = \"<a href='#'></a>\";","\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;","}) ) {","\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {","\t\tif ( !isXML ) {","\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );","\t\t}","\t});","}","","if ( !support.attributes || !assert(function( div ) {","\tdiv.innerHTML = \"<input/>\";","\tdiv.firstChild.setAttribute( \"value\", \"\" );","\treturn div.firstChild.getAttribute( \"value\" ) === \"\";","}) ) {","\taddHandle( \"value\", function( elem, name, isXML ) {","\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {","\t\t\treturn elem.defaultValue;","\t\t}","\t});","}","","if ( !assert(function( div ) {","\treturn div.getAttribute(\"disabled\") == null;","}) ) {","\taddHandle( booleans, function( elem, name, isXML ) {","\t\tvar val;","\t\tif ( !isXML ) {","\t\t\treturn elem[ name ] === true ? name.toLowerCase() :","\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?","\t\t\t\t\tval.value :","\t\t\t\tnull;","\t\t}","\t});","}","","if ( typeof define === \"function\" && define.amd ) {","\tdefine(function() { return Sizzle; });","} else if ( typeof module !== \"undefined\" && module.exports ) {","\tmodule.exports = Sizzle;","} else {","\twindow.Sizzle = Sizzle;","}","","})( window );","",";(function(engine) {","  var extendElements = Prototype.Selector.extendElements;","","  function select(selector, scope) {","    return extendElements(engine(selector, scope || document));","  }","","  function match(element, selector) {","    return engine.matches(selector, [element]).length == 1;","  }","","  Prototype.Selector.engine = engine;","  Prototype.Selector.select = select;","  Prototype.Selector.match = match;","})(Sizzle);","","window.Sizzle = Prototype._original_property;","delete Prototype._original_property;","","var Form = {","  reset: function(form) {","    form = $(form);","    form.reset();","    return form;","  },","","  serializeElements: function(elements, options) {","    if (typeof options != 'object') options = { hash: !!options };","    else if (Object.isUndefined(options.hash)) options.hash = true;","    var key, value, submitted = false, submit = options.submit, accumulator, initial;","","    if (options.hash) {","      initial = {};","      accumulator = function(result, key, value) {","        if (key in result) {","          if (!Object.isArray(result[key])) result[key] = [result[key]];","          result[key] = result[key].concat(value);","        } else result[key] = value;","        return result;","      };","    } else {","      initial = '';","      accumulator = function(result, key, values) {","        if (!Object.isArray(values)) {values = [values];}","        if (!values.length) {return result;}","        var encodedKey = encodeURIComponent(key).gsub(/%20/, '+');","        return result + (result ? \"&\" : \"\") + values.map(function (value) {","          value = value.gsub(/(\\r)?\\n/, '\\r\\n');","          value = encodeURIComponent(value);","          value = value.gsub(/%20/, '+');","          return encodedKey + \"=\" + value;","        }).join(\"&\");","      };","    }","","    return elements.inject(initial, function(result, element) {","      if (!element.disabled && element.name) {","        key = element.name; value = $(element).getValue();","        if (value != null && element.type != 'file' && (element.type != 'submit' || (!submitted &&","            submit !== false && (!submit || key == submit) && (submitted = true)))) {","          result = accumulator(result, key, value);","        }","      }","      return result;","    });","  }","};","","Form.Methods = {","  serialize: function(form, options) {","    return Form.serializeElements(Form.getElements(form), options);","  },","","","  getElements: function(form) {","    var elements = $(form).getElementsByTagName('*');","    var element, results = [], serializers = Form.Element.Serializers;","","    for (var i = 0; element = elements[i]; i++) {","      if (serializers[element.tagName.toLowerCase()])","        results.push(Element.extend(element));","    }","    return results;","  },","","  getInputs: function(form, typeName, name) {","    form = $(form);","    var inputs = form.getElementsByTagName('input');","","    if (!typeName && !name) return $A(inputs).map(Element.extend);","","    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {","      var input = inputs[i];","      if ((typeName && input.type != typeName) || (name && input.name != name))","        continue;","      matchingInputs.push(Element.extend(input));","    }","","    return matchingInputs;","  },","","  disable: function(form) {","    form = $(form);","    Form.getElements(form).invoke('disable');","    return form;","  },","","  enable: function(form) {","    form = $(form);","    Form.getElements(form).invoke('enable');","    return form;","  },","","  findFirstElement: function(form) {","    var elements = $(form).getElements().findAll(function(element) {","      return 'hidden' != element.type && !element.disabled;","    });","    var firstByIndex = elements.findAll(function(element) {","      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;","    }).sortBy(function(element) { return element.tabIndex }).first();","","    return firstByIndex ? firstByIndex : elements.find(function(element) {","      return /^(?:input|select|textarea)$/i.test(element.tagName);","    });","  },","","  focusFirstElement: function(form) {","    form = $(form);","    var element = form.findFirstElement();","    if (element) element.activate();","    return form;","  },","","  request: function(form, options) {","    form = $(form), options = Object.clone(options || { });","","    var params = options.parameters, action = form.readAttribute('action') || '';","    if (action.blank()) action = window.location.href;","    options.parameters = form.serialize(true);","","    if (params) {","      if (Object.isString(params)) params = params.toQueryParams();","      Object.extend(options.parameters, params);","    }","","    if (form.hasAttribute('method') && !options.method)","      options.method = form.method;","","    return new Ajax.Request(action, options);","  }","};","","/*--------------------------------------------------------------------------*/","","","Form.Element = {","  focus: function(element) {","    $(element).focus();","    return element;","  },","","  select: function(element) {","    $(element).select();","    return element;","  }","};","","Form.Element.Methods = {","","  serialize: function(element) {","    element = $(element);","    if (!element.disabled && element.name) {","      var value = element.getValue();","      if (value != undefined) {","        var pair = { };","        pair[element.name] = value;","        return Object.toQueryString(pair);","      }","    }","    return '';","  },","","  getValue: function(element) {","    element = $(element);","    var method = element.tagName.toLowerCase();","    return Form.Element.Serializers[method](element);","  },","","  setValue: function(element, value) {","    element = $(element);","    var method = element.tagName.toLowerCase();","    Form.Element.Serializers[method](element, value);","    return element;","  },","","  clear: function(element) {","    $(element).value = '';","    return element;","  },","","  present: function(element) {","    return $(element).value != '';","  },","","  activate: function(element) {","    element = $(element);","    try {","      element.focus();","      if (element.select && (element.tagName.toLowerCase() != 'input' ||","          !(/^(?:button|reset|submit)$/i.test(element.type))))","        element.select();","    } catch (e) { }","    return element;","  },","","  disable: function(element) {","    element = $(element);","    element.disabled = true;","    return element;","  },","","  enable: function(element) {","    element = $(element);","    element.disabled = false;","    return element;","  }","};","","/*--------------------------------------------------------------------------*/","","var Field = Form.Element;","","var $F = Form.Element.Methods.getValue;","","/*--------------------------------------------------------------------------*/","","Form.Element.Serializers = (function() {","  function input(element, value) {","    switch (element.type.toLowerCase()) {","      case 'checkbox':","      case 'radio':","        return inputSelector(element, value);","      default:","        return valueSelector(element, value);","    }","  }","","  function inputSelector(element, value) {","    if (Object.isUndefined(value))","      return element.checked ? element.value : null;","    else element.checked = !!value;","  }","","  function valueSelector(element, value) {","    if (Object.isUndefined(value)) return element.value;","    else element.value = value;","  }","","  function select(element, value) {","    if (Object.isUndefined(value))","      return (element.type === 'select-one' ? selectOne : selectMany)(element);","","    var opt, currentValue, single = !Object.isArray(value);","    for (var i = 0, length = element.length; i < length; i++) {","      opt = element.options[i];","      currentValue = this.optionValue(opt);","      if (single) {","        if (currentValue == value) {","          opt.selected = true;","          return;","        }","      }","      else opt.selected = value.include(currentValue);","    }","  }","","  function selectOne(element) {","    var index = element.selectedIndex;","    return index >= 0 ? optionValue(element.options[index]) : null;","  }","","  function selectMany(element) {","    var values, length = element.length;","    if (!length) return null;","","    for (var i = 0, values = []; i < length; i++) {","      var opt = element.options[i];","      if (opt.selected) values.push(optionValue(opt));","    }","    return values;","  }","","  function optionValue(opt) {","    return Element.hasAttribute(opt, 'value') ? opt.value : opt.text;","  }","","  return {","    input:         input,","    inputSelector: inputSelector,","    textarea:      valueSelector,","    select:        select,","    selectOne:     selectOne,","    selectMany:    selectMany,","    optionValue:   optionValue,","    button:        valueSelector","  };","})();","","/*--------------------------------------------------------------------------*/","","","Abstract.TimedObserver = Class.create(PeriodicalExecuter, {","  initialize: function($super, element, frequency, callback) {","    $super(callback, frequency);","    this.element   = $(element);","    this.lastValue = this.getValue();","  },","","  execute: function() {","    var value = this.getValue();","    if (Object.isString(this.lastValue) && Object.isString(value) ?","        this.lastValue != value : String(this.lastValue) != String(value)) {","      this.callback(this.element, value);","      this.lastValue = value;","    }","  }","});","","Form.Element.Observer = Class.create(Abstract.TimedObserver, {","  getValue: function() {","    return Form.Element.getValue(this.element);","  }","});","","Form.Observer = Class.create(Abstract.TimedObserver, {","  getValue: function() {","    return Form.serialize(this.element);","  }","});","","/*--------------------------------------------------------------------------*/","","Abstract.EventObserver = Class.create({","  initialize: function(element, callback) {","    this.element  = $(element);","    this.callback = callback;","","    this.lastValue = this.getValue();","    if (this.element.tagName.toLowerCase() == 'form')","      this.registerFormCallbacks();","    else","      this.registerCallback(this.element);","  },","","  onElementEvent: function() {","    var value = this.getValue();","    if (this.lastValue != value) {","      this.callback(this.element, value);","      this.lastValue = value;","    }","  },","","  registerFormCallbacks: function() {","    Form.getElements(this.element).each(this.registerCallback, this);","  },","","  registerCallback: function(element) {","    if (element.type) {","      switch (element.type.toLowerCase()) {","        case 'checkbox':","        case 'radio':","          Event.observe(element, 'click', this.onElementEvent.bind(this));","          break;","        default:","          Event.observe(element, 'change', this.onElementEvent.bind(this));","          break;","      }","    }","  }","});","","Form.Element.EventObserver = Class.create(Abstract.EventObserver, {","  getValue: function() {","    return Form.Element.getValue(this.element);","  }","});","","Form.EventObserver = Class.create(Abstract.EventObserver, {","  getValue: function() {","    return Form.serialize(this.element);","  }","});","(function(GLOBAL) {","  var DIV = document.createElement('div');","  var docEl = document.documentElement;","  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl","   && 'onmouseleave' in docEl;","","  var Event = {","    KEY_BACKSPACE: 8,","    KEY_TAB:       9,","    KEY_RETURN:   13,","    KEY_ESC:      27,","    KEY_LEFT:     37,","    KEY_UP:       38,","    KEY_RIGHT:    39,","    KEY_DOWN:     40,","    KEY_DELETE:   46,","    KEY_HOME:     36,","    KEY_END:      35,","    KEY_PAGEUP:   33,","    KEY_PAGEDOWN: 34,","    KEY_INSERT:   45","  };","","","  var isIELegacyEvent = function(event) { return false; };","","  if (window.attachEvent) {","    if (window.addEventListener) {","      isIELegacyEvent = function(event) {","        return !(event instanceof window.Event);","      };","    } else {","      isIELegacyEvent = function(event) { return true; };","    }","  }","","  var _isButton;","","  function _isButtonForDOMEvents(event, code) {","    return event.which ? (event.which === code + 1) : (event.button === code);","  }","","  var legacyButtonMap = { 0: 1, 1: 4, 2: 2 };","  function _isButtonForLegacyEvents(event, code) {","    return event.button === legacyButtonMap[code];","  }","","  function _isButtonForWebKit(event, code) {","    switch (code) {","      case 0: return event.which == 1 && !event.metaKey;","      case 1: return event.which == 2 || (event.which == 1 && event.metaKey);","      case 2: return event.which == 3;","      default: return false;","    }","  }","","  if (window.attachEvent) {","    if (!window.addEventListener) {","      _isButton = _isButtonForLegacyEvents;","    } else {","      _isButton = function(event, code) {","        return isIELegacyEvent(event) ? _isButtonForLegacyEvents(event, code) :","         _isButtonForDOMEvents(event, code);","      }","    }","  } else if (Prototype.Browser.WebKit) {","    _isButton = _isButtonForWebKit;","  } else {","    _isButton = _isButtonForDOMEvents;","  }","","  function isLeftClick(event)   { return _isButton(event, 0) }","","  function isMiddleClick(event) { return _isButton(event, 1) }","","  function isRightClick(event)  { return _isButton(event, 2) }","","  function element(event) {","    return Element.extend(_element(event));","  }","","  function _element(event) {","    event = Event.extend(event);","","    var node = event.target, type = event.type,","     currentTarget = event.currentTarget;","","    if (currentTarget && currentTarget.tagName) {","      if (type === 'load' || type === 'error' ||","        (type === 'click' && currentTarget.tagName.toLowerCase() === 'input'","          && currentTarget.type === 'radio'))","            node = currentTarget;","    }","","    return node.nodeType == Node.TEXT_NODE ? node.parentNode : node;","  }","","  function findElement(event, expression) {","    var element = _element(event), selector = Prototype.Selector;","    if (!expression) return Element.extend(element);","    while (element) {","      if (Object.isElement(element) && selector.match(element, expression))","        return Element.extend(element);","      element = element.parentNode;","    }","  }","","  function pointer(event) {","    return { x: pointerX(event), y: pointerY(event) };","  }","","  function pointerX(event) {","    var docElement = document.documentElement,","     body = document.body || { scrollLeft: 0 };","","    return event.pageX || (event.clientX +","      (docElement.scrollLeft || body.scrollLeft) -","      (docElement.clientLeft || 0));","  }","","  function pointerY(event) {","    var docElement = document.documentElement,","     body = document.body || { scrollTop: 0 };","","    return  event.pageY || (event.clientY +","       (docElement.scrollTop || body.scrollTop) -","       (docElement.clientTop || 0));","  }","","","  function stop(event) {","    Event.extend(event);","    event.preventDefault();","    event.stopPropagation();","","    event.stopped = true;","  }","","","  Event.Methods = {","    isLeftClick:   isLeftClick,","    isMiddleClick: isMiddleClick,","    isRightClick:  isRightClick,","","    element:     element,","    findElement: findElement,","","    pointer:  pointer,","    pointerX: pointerX,","    pointerY: pointerY,","","    stop: stop","  };","","  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {","    m[name] = Event.Methods[name].methodize();","    return m;","  });","","  if (window.attachEvent) {","    function _relatedTarget(event) {","      var element;","      switch (event.type) {","        case 'mouseover':","        case 'mouseenter':","          element = event.fromElement;","          break;","        case 'mouseout':","        case 'mouseleave':","          element = event.toElement;","          break;","        default:","          return null;","      }","      return Element.extend(element);","    }","","    var additionalMethods = {","      stopPropagation: function() { this.cancelBubble = true },","      preventDefault:  function() { this.returnValue = false },","      inspect: function() { return '[object Event]' }","    };","","    Event.extend = function(event, element) {","      if (!event) return false;","","      if (!isIELegacyEvent(event)) return event;","","      if (event._extendedByPrototype) return event;","      event._extendedByPrototype = Prototype.emptyFunction;","","      var pointer = Event.pointer(event);","","      Object.extend(event, {","        target: event.srcElement || element,","        relatedTarget: _relatedTarget(event),","        pageX:  pointer.x,","        pageY:  pointer.y","      });","","      Object.extend(event, methods);","      Object.extend(event, additionalMethods);","","      return event;","    };","  } else {","    Event.extend = Prototype.K;","  }","","  if (window.addEventListener) {","    Event.prototype = window.Event.prototype || document.createEvent('HTMLEvents').__proto__;","    Object.extend(Event.prototype, methods);","  }","","  var EVENT_TRANSLATIONS = {","    mouseenter: 'mouseover',","    mouseleave: 'mouseout'","  };","","  function getDOMEventName(eventName) {","    return EVENT_TRANSLATIONS[eventName] || eventName;","  }","","  if (MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)","    getDOMEventName = Prototype.K;","","  function getUniqueElementID(element) {","    if (element === window) return 0;","","    if (typeof element._prototypeUID === 'undefined')","      element._prototypeUID = Element.Storage.UID++;","    return element._prototypeUID;","  }","","  function getUniqueElementID_IE(element) {","    if (element === window) return 0;","    if (element == document) return 1;","    return element.uniqueID;","  }","","  if ('uniqueID' in DIV)","    getUniqueElementID = getUniqueElementID_IE;","","  function isCustomEvent(eventName) {","    return eventName.include(':');","  }","","  Event._isCustomEvent = isCustomEvent;","","  function getRegistryForElement(element, uid) {","    var CACHE = GLOBAL.Event.cache;","    if (Object.isUndefined(uid))","      uid = getUniqueElementID(element);","    if (!CACHE[uid]) CACHE[uid] = { element: element };","    return CACHE[uid];","  }","","  function destroyRegistryForElement(element, uid) {","    if (Object.isUndefined(uid))","      uid = getUniqueElementID(element);","    delete GLOBAL.Event.cache[uid];","  }","","","  function register(element, eventName, handler) {","    var registry = getRegistryForElement(element);","    if (!registry[eventName]) registry[eventName] = [];","    var entries = registry[eventName];","","    var i = entries.length;","    while (i--)","      if (entries[i].handler === handler) return null;","","    var uid = getUniqueElementID(element);","    var responder = GLOBAL.Event._createResponder(uid, eventName, handler);","    var entry = {","      responder: responder,","      handler:   handler","    };","","    entries.push(entry);","    return entry;","  }","","  function unregister(element, eventName, handler) {","    var registry = getRegistryForElement(element);","    var entries = registry[eventName];","    if (!entries) return;","","    var i = entries.length, entry;","    while (i--) {","      if (entries[i].handler === handler) {","        entry = entries[i];","        break;","      }","    }","","    if (!entry) return;","","    var index = entries.indexOf(entry);","    entries.splice(index, 1);","","    return entry;","  }","","","  function observe(element, eventName, handler) {","    element = $(element);","    var entry = register(element, eventName, handler);","","    if (entry === null) return element;","","    var responder = entry.responder;","    if (isCustomEvent(eventName))","      observeCustomEvent(element, eventName, responder);","    else","      observeStandardEvent(element, eventName, responder);","","    return element;","  }","","  function observeStandardEvent(element, eventName, responder) {","    var actualEventName = getDOMEventName(eventName);","    if (element.addEventListener) {","      element.addEventListener(actualEventName, responder, false);","    } else {","      element.attachEvent('on' + actualEventName, responder);","    }","  }","","  function observeCustomEvent(element, eventName, responder) {","    if (element.addEventListener) {","      element.addEventListener('dataavailable', responder, false);","    } else {","      element.attachEvent('ondataavailable', responder);","      element.attachEvent('onlosecapture',   responder);","    }","  }","","  function stopObserving(element, eventName, handler) {","    element = $(element);","    var handlerGiven = !Object.isUndefined(handler),","     eventNameGiven = !Object.isUndefined(eventName);","","    if (!eventNameGiven && !handlerGiven) {","      stopObservingElement(element);","      return element;","    }","","    if (!handlerGiven) {","      stopObservingEventName(element, eventName);","      return element;","    }","","    var entry = unregister(element, eventName, handler);","","    if (!entry) return element;","    removeEvent(element, eventName, entry.responder);","    return element;","  }","","  function stopObservingStandardEvent(element, eventName, responder) {","    var actualEventName = getDOMEventName(eventName);","    if (element.removeEventListener) {","      element.removeEventListener(actualEventName, responder, false);","    } else {","      element.detachEvent('on' + actualEventName, responder);","    }","  }","","  function stopObservingCustomEvent(element, eventName, responder) {","    if (element.removeEventListener) {","      element.removeEventListener('dataavailable', responder, false);","    } else {","      element.detachEvent('ondataavailable', responder);","      element.detachEvent('onlosecapture',   responder);","    }","  }","","","","  function stopObservingElement(element) {","    var uid = getUniqueElementID(element), registry = GLOBAL.Event.cache[uid];","    if (!registry) return;","","    destroyRegistryForElement(element, uid);","","    var entries, i;","    for (var eventName in registry) {","      if (eventName === 'element') continue;","","      entries = registry[eventName];","      i = entries.length;","      while (i--)","        removeEvent(element, eventName, entries[i].responder);","    }","  }","","  function stopObservingEventName(element, eventName) {","    var registry = getRegistryForElement(element);","    var entries = registry[eventName];","    if (!entries) return;","    delete registry[eventName];","","    var i = entries.length;","    while (i--)","      removeEvent(element, eventName, entries[i].responder);","  }","","","  function removeEvent(element, eventName, handler) {","    if (isCustomEvent(eventName))","      stopObservingCustomEvent(element, eventName, handler);","    else","      stopObservingStandardEvent(element, eventName, handler);","  }","","","","  function getFireTarget(element) {","    if (element !== document) return element;","    if (document.createEvent && !element.dispatchEvent)","      return document.documentElement;","    return element;","  }","","  function fire(element, eventName, memo, bubble) {","    element = getFireTarget($(element));","    if (Object.isUndefined(bubble)) bubble = true;","    memo = memo || {};","","    var event = fireEvent(element, eventName, memo, bubble);","    return Event.extend(event);","  }","","  function fireEvent_DOM(element, eventName, memo, bubble) {","    var event = document.createEvent('HTMLEvents');","    event.initEvent('dataavailable', bubble, true);","","    event.eventName = eventName;","    event.memo = memo;","","    element.dispatchEvent(event);","    return event;","  }","","  function fireEvent_IE(element, eventName, memo, bubble) {","    var event = document.createEventObject();","    event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';","","    event.eventName = eventName;","    event.memo = memo;","","    element.fireEvent(event.eventType, event);","    return event;","  }","","  var fireEvent = document.createEvent ? fireEvent_DOM : fireEvent_IE;","","","","  Event.Handler = Class.create({","    initialize: function(element, eventName, selector, callback) {","      this.element   = $(element);","      this.eventName = eventName;","      this.selector  = selector;","      this.callback  = callback;","      this.handler   = this.handleEvent.bind(this);","    },","","","    start: function() {","      Event.observe(this.element, this.eventName, this.handler);","      return this;","    },","","    stop: function() {","      Event.stopObserving(this.element, this.eventName, this.handler);","      return this;","    },","","    handleEvent: function(event) {","      var element = Event.findElement(event, this.selector);","      if (element) this.callback.call(this.element, event, element);","    }","  });","","  function on(element, eventName, selector, callback) {","    element = $(element);","    if (Object.isFunction(selector) && Object.isUndefined(callback)) {","      callback = selector, selector = null;","    }","","    return new Event.Handler(element, eventName, selector, callback).start();","  }","","  Object.extend(Event, Event.Methods);","","  Object.extend(Event, {","    fire:          fire,","    observe:       observe,","    stopObserving: stopObserving,","    on:            on","  });","","  Element.addMethods({","    fire:          fire,","","    observe:       observe,","","    stopObserving: stopObserving,","","    on:            on","  });","","  Object.extend(document, {","    fire:          fire.methodize(),","","    observe:       observe.methodize(),","","    stopObserving: stopObserving.methodize(),","","    on:            on.methodize(),","","    loaded:        false","  });","","  if (GLOBAL.Event) Object.extend(window.Event, Event);","  else GLOBAL.Event = Event;","","  GLOBAL.Event.cache = {};","","  function destroyCache_IE() {","    GLOBAL.Event.cache = null;","  }","","  if (window.attachEvent)","    window.attachEvent('onunload', destroyCache_IE);","","  DIV = null;","  docEl = null;","})(this);","","(function(GLOBAL) {","  /* Code for creating leak-free event responders is based on work by","   John-David Dalton. */","","  var docEl = document.documentElement;","  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl","    && 'onmouseleave' in docEl;","","  function isSimulatedMouseEnterLeaveEvent(eventName) {","    return !MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&","     (eventName === 'mouseenter' || eventName === 'mouseleave');","  }","","  function createResponder(uid, eventName, handler) {","    if (Event._isCustomEvent(eventName))","      return createResponderForCustomEvent(uid, eventName, handler);","    if (isSimulatedMouseEnterLeaveEvent(eventName))","      return createMouseEnterLeaveResponder(uid, eventName, handler);","","    return function(event) {","      if (!Event.cache) return;","","      var element = Event.cache[uid].element;","      Event.extend(event, element);","      handler.call(element, event);","    };","  }","","  function createResponderForCustomEvent(uid, eventName, handler) {","    return function(event) {","      var element = Event.cache[uid].element;","","      if (Object.isUndefined(event.eventName))","        return false;","","      if (event.eventName !== eventName)","        return false;","","      Event.extend(event, element);","      handler.call(element, event);","    };","  }","","  function createMouseEnterLeaveResponder(uid, eventName, handler) {","    return function(event) {","      var element = Event.cache[uid].element;","","      Event.extend(event, element);","      var parent = event.relatedTarget;","","      while (parent && parent !== element) {","        try { parent = parent.parentNode; }","        catch(e) { parent = element; }","      }","","      if (parent === element) return;","      handler.call(element, event);","    }","  }","","  GLOBAL.Event._createResponder = createResponder;","  docEl = null;","})(this);","","(function(GLOBAL) {","  /* Support for the DOMContentLoaded event is based on work by Dan Webb,","     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */","","  var TIMER;","","  function fireContentLoadedEvent() {","    if (document.loaded) return;","    if (TIMER) window.clearTimeout(TIMER);","    document.loaded = true;","    document.fire('dom:loaded');","  }","","  function checkReadyState() {","    if (document.readyState === 'complete') {","      document.detachEvent('onreadystatechange', checkReadyState);","      fireContentLoadedEvent();","    }","  }","","  function pollDoScroll() {","    try {","      document.documentElement.doScroll('left');","    } catch (e) {","      TIMER = pollDoScroll.defer();","      return;","    }","","    fireContentLoadedEvent();","  }","","","  if (document.readyState === 'complete') {","    fireContentLoadedEvent();","    return;","  }","","  if (document.addEventListener) {","    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent, false);","  } else {","    document.attachEvent('onreadystatechange', checkReadyState);","    if (window == top) TIMER = pollDoScroll.defer();","  }","","  Event.observe(window, 'load', fireContentLoadedEvent);","})(this);","","","Element.addMethods();","/*------------------------------- DEPRECATED -------------------------------*/","","Hash.toQueryString = Object.toQueryString;","","var Toggle = { display: Element.toggle };","","Element.Methods.childOf = Element.Methods.descendantOf;","","var Insertion = {","  Before: function(element, content) {","    return Element.insert(element, {before:content});","  },","","  Top: function(element, content) {","    return Element.insert(element, {top:content});","  },","","  Bottom: function(element, content) {","    return Element.insert(element, {bottom:content});","  },","","  After: function(element, content) {","    return Element.insert(element, {after:content});","  }","};","","var $continue = new Error('\"throw $continue\" is deprecated, use \"return\" instead');","","var Position = {","  includeScrollOffsets: false,","","  prepare: function() {","    this.deltaX =  window.pageXOffset","                || document.documentElement.scrollLeft","                || document.body.scrollLeft","                || 0;","    this.deltaY =  window.pageYOffset","                || document.documentElement.scrollTop","                || document.body.scrollTop","                || 0;","  },","","  within: function(element, x, y) {","    if (this.includeScrollOffsets)","      return this.withinIncludingScrolloffsets(element, x, y);","    this.xcomp = x;","    this.ycomp = y;","    this.offset = Element.cumulativeOffset(element);","","    return (y >= this.offset[1] &&","            y <  this.offset[1] + element.offsetHeight &&","            x >= this.offset[0] &&","            x <  this.offset[0] + element.offsetWidth);","  },","","  withinIncludingScrolloffsets: function(element, x, y) {","    var offsetcache = Element.cumulativeScrollOffset(element);","","    this.xcomp = x + offsetcache[0] - this.deltaX;","    this.ycomp = y + offsetcache[1] - this.deltaY;","    this.offset = Element.cumulativeOffset(element);","","    return (this.ycomp >= this.offset[1] &&","            this.ycomp <  this.offset[1] + element.offsetHeight &&","            this.xcomp >= this.offset[0] &&","            this.xcomp <  this.offset[0] + element.offsetWidth);","  },","","  overlap: function(mode, element) {","    if (!mode) return 0;","    if (mode == 'vertical')","      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /","        element.offsetHeight;","    if (mode == 'horizontal')","      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /","        element.offsetWidth;","  },","","","  cumulativeOffset: Element.Methods.cumulativeOffset,","","  positionedOffset: Element.Methods.positionedOffset,","","  absolutize: function(element) {","    Position.prepare();","    return Element.absolutize(element);","  },","","  relativize: function(element) {","    Position.prepare();","    return Element.relativize(element);","  },","","  realOffset: Element.Methods.cumulativeScrollOffset,","","  offsetParent: Element.Methods.getOffsetParent,","","  page: Element.Methods.viewportOffset,","","  clone: function(source, target, options) {","    options = options || { };","    return Element.clonePosition(target, source, options);","  }","};","","/*--------------------------------------------------------------------------*/","","if (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){","  function iter(name) {","    return name.blank() ? null : \"[contains(concat(' ', @class, ' '), ' \" + name + \" ')]\";","  }","","  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?","  function(element, className) {","    className = className.toString().strip();","    var cond = /\\s/.test(className) ? $w(className).map(iter).join('') : iter(className);","    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];","  } : function(element, className) {","    className = className.toString().strip();","    var elements = [], classNames = (/\\s/.test(className) ? $w(className) : null);","    if (!classNames && !className) return elements;","","    var nodes = $(element).getElementsByTagName('*');","    className = ' ' + className + ' ';","","    for (var i = 0, child, cn; child = nodes[i]; i++) {","      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||","          (classNames && classNames.all(function(name) {","            return !name.toString().blank() && cn.include(' ' + name + ' ');","          }))))","        elements.push(Element.extend(child));","    }","    return elements;","  };","","  return function(className, parentElement) {","    return $(parentElement || document.body).getElementsByClassName(className);","  };","}(Element.Methods);","","/*--------------------------------------------------------------------------*/","","Element.ClassNames = Class.create();","Element.ClassNames.prototype = {","  initialize: function(element) {","    this.element = $(element);","  },","","  _each: function(iterator, context) {","    this.element.className.split(/\\s+/).select(function(name) {","      return name.length > 0;","    })._each(iterator, context);","  },","","  set: function(className) {","    this.element.className = className;","  },","","  add: function(classNameToAdd) {","    if (this.include(classNameToAdd)) return;","    this.set($A(this).concat(classNameToAdd).join(' '));","  },","","  remove: function(classNameToRemove) {","    if (!this.include(classNameToRemove)) return;","    this.set($A(this).without(classNameToRemove).join(' '));","  },","","  toString: function() {","    return $A(this).join(' ');","  }","};","","Object.extend(Element.ClassNames.prototype, Enumerable);","","/*--------------------------------------------------------------------------*/","","(function() {","  window.Selector = Class.create({","    initialize: function(expression) {","      this.expression = expression.strip();","    },","","    findElements: function(rootElement) {","      return Prototype.Selector.select(this.expression, rootElement);","    },","","    match: function(element) {","      return Prototype.Selector.match(element, this.expression);","    },","","    toString: function() {","      return this.expression;","    },","","    inspect: function() {","      return \"#<Selector: \" + this.expression + \">\";","    }","  });","","  Object.extend(Selector, {","    matchElements: function(elements, expression) {","      var match = Prototype.Selector.match,","          results = [];","","      for (var i = 0, length = elements.length; i < length; i++) {","        var element = elements[i];","        if (match(element, expression)) {","          results.push(Element.extend(element));","        }","      }","      return results;","    },","","    findElement: function(elements, expression, index) {","      index = index || 0;","      var matchIndex = 0, element;","      for (var i = 0, length = elements.length; i < length; i++) {","        element = elements[i];","        if (Prototype.Selector.match(element, expression) && index === matchIndex++) {","          return Element.extend(element);","        }","      }","    },","","    findChildElements: function(element, expressions) {","      var selector = expressions.toArray().join(', ');","      return Prototype.Selector.select(selector, element || document);","    }","  });","})();"]},{"action":"insertText","range":{"start":{"row":7514,"column":0},"end":{"row":7514,"column":24}},"text":"Displaying prototype.js."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7514,"column":0},"end":{"row":7514,"column":24}},"text":"Displaying prototype.js."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7513,"column":5},"end":{"row":7514,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7513,"column":4},"end":{"row":7513,"column":5}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7513,"column":4},"end":{"row":7513,"column":5}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":4,"column":0}},"nl":"\n","lines":["prototype.js","Open with","Cruze McFarlane ","(cruzemcfarlane@gmail.com)"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":1}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":1},"end":{"row":0,"column":2}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":2},"end":{"row":0,"column":3}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":0,"column":4}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":4},"end":{"row":0,"column":5}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":4},"end":{"row":0,"column":5}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":3},"end":{"row":0,"column":4}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":2},"end":{"row":0,"column":3}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":1},"end":{"row":0,"column":2}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":1}},"text":"g"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1412463178584}